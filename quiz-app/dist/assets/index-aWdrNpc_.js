(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();var Eg={exports:{}},Tu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lT;function B1(){if(lT)return Tu;lT=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,a,l){var c=null;if(l!==void 0&&(c=""+l),a.key!==void 0&&(c=""+a.key),"key"in a){l={};for(var d in a)d!=="key"&&(l[d]=a[d])}else l=a;return a=l.ref,{$$typeof:r,type:i,key:c,ref:a!==void 0?a:null,props:l}}return Tu.Fragment=e,Tu.jsx=t,Tu.jsxs=t,Tu}var uT;function z1(){return uT||(uT=1,Eg.exports=B1()),Eg.exports}var H=z1(),Tg={exports:{}},De={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cT;function j1(){if(cT)return De;cT=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),c=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.iterator;function b(x){return x===null||typeof x!="object"?null:(x=T&&x[T]||x["@@iterator"],typeof x=="function"?x:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,G={};function F(x,te,ue){this.props=x,this.context=te,this.refs=G,this.updater=ue||N}F.prototype.isReactComponent={},F.prototype.setState=function(x,te){if(typeof x!="object"&&typeof x!="function"&&x!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,x,te,"setState")},F.prototype.forceUpdate=function(x){this.updater.enqueueForceUpdate(this,x,"forceUpdate")};function ie(){}ie.prototype=F.prototype;function Z(x,te,ue){this.props=x,this.context=te,this.refs=G,this.updater=ue||N}var $=Z.prototype=new ie;$.constructor=Z,q($,F.prototype),$.isPureReactComponent=!0;var fe=Array.isArray,se={H:null,A:null,T:null,S:null,V:null},de=Object.prototype.hasOwnProperty;function D(x,te,ue,le,ye,Ne){return ue=Ne.ref,{$$typeof:r,type:x,key:te,ref:ue!==void 0?ue:null,props:Ne}}function w(x,te){return D(x.type,te,void 0,void 0,void 0,x.props)}function I(x){return typeof x=="object"&&x!==null&&x.$$typeof===r}function M(x){var te={"=":"=0",":":"=2"};return"$"+x.replace(/[=:]/g,function(ue){return te[ue]})}var V=/\/+/g;function P(x,te){return typeof x=="object"&&x!==null&&x.key!=null?M(""+x.key):te.toString(36)}function R(){}function je(x){switch(x.status){case"fulfilled":return x.value;case"rejected":throw x.reason;default:switch(typeof x.status=="string"?x.then(R,R):(x.status="pending",x.then(function(te){x.status==="pending"&&(x.status="fulfilled",x.value=te)},function(te){x.status==="pending"&&(x.status="rejected",x.reason=te)})),x.status){case"fulfilled":return x.value;case"rejected":throw x.reason}}throw x}function qe(x,te,ue,le,ye){var Ne=typeof x;(Ne==="undefined"||Ne==="boolean")&&(x=null);var Se=!1;if(x===null)Se=!0;else switch(Ne){case"bigint":case"string":case"number":Se=!0;break;case"object":switch(x.$$typeof){case r:case e:Se=!0;break;case _:return Se=x._init,qe(Se(x._payload),te,ue,le,ye)}}if(Se)return ye=ye(x),Se=le===""?"."+P(x,0):le,fe(ye)?(ue="",Se!=null&&(ue=Se.replace(V,"$&/")+"/"),qe(ye,te,ue,"",function(Fn){return Fn})):ye!=null&&(I(ye)&&(ye=w(ye,ue+(ye.key==null||x&&x.key===ye.key?"":(""+ye.key).replace(V,"$&/")+"/")+Se)),te.push(ye)),1;Se=0;var ot=le===""?".":le+":";if(fe(x))for(var We=0;We<x.length;We++)le=x[We],Ne=ot+P(le,We),Se+=qe(le,te,ue,Ne,ye);else if(We=b(x),typeof We=="function")for(x=We.call(x),We=0;!(le=x.next()).done;)le=le.value,Ne=ot+P(le,We++),Se+=qe(le,te,ue,Ne,ye);else if(Ne==="object"){if(typeof x.then=="function")return qe(je(x),te,ue,le,ye);throw te=String(x),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return Se}function X(x,te,ue){if(x==null)return x;var le=[],ye=0;return qe(x,le,"","",function(Ne){return te.call(ue,Ne,ye++)}),le}function he(x){if(x._status===-1){var te=x._result;te=te(),te.then(function(ue){(x._status===0||x._status===-1)&&(x._status=1,x._result=ue)},function(ue){(x._status===0||x._status===-1)&&(x._status=2,x._result=ue)}),x._status===-1&&(x._status=0,x._result=te)}if(x._status===1)return x._result.default;throw x._result}var _e=typeof reportError=="function"?reportError:function(x){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof x=="object"&&x!==null&&typeof x.message=="string"?String(x.message):String(x),error:x});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",x);return}console.error(x)};function xe(){}return De.Children={map:X,forEach:function(x,te,ue){X(x,function(){te.apply(this,arguments)},ue)},count:function(x){var te=0;return X(x,function(){te++}),te},toArray:function(x){return X(x,function(te){return te})||[]},only:function(x){if(!I(x))throw Error("React.Children.only expected to receive a single React element child.");return x}},De.Component=F,De.Fragment=t,De.Profiler=a,De.PureComponent=Z,De.StrictMode=i,De.Suspense=m,De.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=se,De.__COMPILER_RUNTIME={__proto__:null,c:function(x){return se.H.useMemoCache(x)}},De.cache=function(x){return function(){return x.apply(null,arguments)}},De.cloneElement=function(x,te,ue){if(x==null)throw Error("The argument must be a React element, but you passed "+x+".");var le=q({},x.props),ye=x.key,Ne=void 0;if(te!=null)for(Se in te.ref!==void 0&&(Ne=void 0),te.key!==void 0&&(ye=""+te.key),te)!de.call(te,Se)||Se==="key"||Se==="__self"||Se==="__source"||Se==="ref"&&te.ref===void 0||(le[Se]=te[Se]);var Se=arguments.length-2;if(Se===1)le.children=ue;else if(1<Se){for(var ot=Array(Se),We=0;We<Se;We++)ot[We]=arguments[We+2];le.children=ot}return D(x.type,ye,void 0,void 0,Ne,le)},De.createContext=function(x){return x={$$typeof:c,_currentValue:x,_currentValue2:x,_threadCount:0,Provider:null,Consumer:null},x.Provider=x,x.Consumer={$$typeof:l,_context:x},x},De.createElement=function(x,te,ue){var le,ye={},Ne=null;if(te!=null)for(le in te.key!==void 0&&(Ne=""+te.key),te)de.call(te,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(ye[le]=te[le]);var Se=arguments.length-2;if(Se===1)ye.children=ue;else if(1<Se){for(var ot=Array(Se),We=0;We<Se;We++)ot[We]=arguments[We+2];ye.children=ot}if(x&&x.defaultProps)for(le in Se=x.defaultProps,Se)ye[le]===void 0&&(ye[le]=Se[le]);return D(x,Ne,void 0,void 0,null,ye)},De.createRef=function(){return{current:null}},De.forwardRef=function(x){return{$$typeof:d,render:x}},De.isValidElement=I,De.lazy=function(x){return{$$typeof:_,_payload:{_status:-1,_result:x},_init:he}},De.memo=function(x,te){return{$$typeof:p,type:x,compare:te===void 0?null:te}},De.startTransition=function(x){var te=se.T,ue={};se.T=ue;try{var le=x(),ye=se.S;ye!==null&&ye(ue,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(xe,_e)}catch(Ne){_e(Ne)}finally{se.T=te}},De.unstable_useCacheRefresh=function(){return se.H.useCacheRefresh()},De.use=function(x){return se.H.use(x)},De.useActionState=function(x,te,ue){return se.H.useActionState(x,te,ue)},De.useCallback=function(x,te){return se.H.useCallback(x,te)},De.useContext=function(x){return se.H.useContext(x)},De.useDebugValue=function(){},De.useDeferredValue=function(x,te){return se.H.useDeferredValue(x,te)},De.useEffect=function(x,te,ue){var le=se.H;if(typeof ue=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return le.useEffect(x,te)},De.useId=function(){return se.H.useId()},De.useImperativeHandle=function(x,te,ue){return se.H.useImperativeHandle(x,te,ue)},De.useInsertionEffect=function(x,te){return se.H.useInsertionEffect(x,te)},De.useLayoutEffect=function(x,te){return se.H.useLayoutEffect(x,te)},De.useMemo=function(x,te){return se.H.useMemo(x,te)},De.useOptimistic=function(x,te){return se.H.useOptimistic(x,te)},De.useReducer=function(x,te,ue){return se.H.useReducer(x,te,ue)},De.useRef=function(x){return se.H.useRef(x)},De.useState=function(x){return se.H.useState(x)},De.useSyncExternalStore=function(x,te,ue){return se.H.useSyncExternalStore(x,te,ue)},De.useTransition=function(){return se.H.useTransition()},De.version="19.1.1",De}var hT;function Op(){return hT||(hT=1,Tg.exports=j1()),Tg.exports}var z=Op(),Sg={exports:{}},Su={},Ag={exports:{}},bg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fT;function q1(){return fT||(fT=1,(function(r){function e(X,he){var _e=X.length;X.push(he);e:for(;0<_e;){var xe=_e-1>>>1,x=X[xe];if(0<a(x,he))X[xe]=he,X[_e]=x,_e=xe;else break e}}function t(X){return X.length===0?null:X[0]}function i(X){if(X.length===0)return null;var he=X[0],_e=X.pop();if(_e!==he){X[0]=_e;e:for(var xe=0,x=X.length,te=x>>>1;xe<te;){var ue=2*(xe+1)-1,le=X[ue],ye=ue+1,Ne=X[ye];if(0>a(le,_e))ye<x&&0>a(Ne,le)?(X[xe]=Ne,X[ye]=_e,xe=ye):(X[xe]=le,X[ue]=_e,xe=ue);else if(ye<x&&0>a(Ne,_e))X[xe]=Ne,X[ye]=_e,xe=ye;else break e}}return he}function a(X,he){var _e=X.sortIndex-he.sortIndex;return _e!==0?_e:X.id-he.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;r.unstable_now=function(){return l.now()}}else{var c=Date,d=c.now();r.unstable_now=function(){return c.now()-d}}var m=[],p=[],_=1,T=null,b=3,N=!1,q=!1,G=!1,F=!1,ie=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,$=typeof setImmediate<"u"?setImmediate:null;function fe(X){for(var he=t(p);he!==null;){if(he.callback===null)i(p);else if(he.startTime<=X)i(p),he.sortIndex=he.expirationTime,e(m,he);else break;he=t(p)}}function se(X){if(G=!1,fe(X),!q)if(t(m)!==null)q=!0,de||(de=!0,P());else{var he=t(p);he!==null&&qe(se,he.startTime-X)}}var de=!1,D=-1,w=5,I=-1;function M(){return F?!0:!(r.unstable_now()-I<w)}function V(){if(F=!1,de){var X=r.unstable_now();I=X;var he=!0;try{e:{q=!1,G&&(G=!1,Z(D),D=-1),N=!0;var _e=b;try{t:{for(fe(X),T=t(m);T!==null&&!(T.expirationTime>X&&M());){var xe=T.callback;if(typeof xe=="function"){T.callback=null,b=T.priorityLevel;var x=xe(T.expirationTime<=X);if(X=r.unstable_now(),typeof x=="function"){T.callback=x,fe(X),he=!0;break t}T===t(m)&&i(m),fe(X)}else i(m);T=t(m)}if(T!==null)he=!0;else{var te=t(p);te!==null&&qe(se,te.startTime-X),he=!1}}break e}finally{T=null,b=_e,N=!1}he=void 0}}finally{he?P():de=!1}}}var P;if(typeof $=="function")P=function(){$(V)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,je=R.port2;R.port1.onmessage=V,P=function(){je.postMessage(null)}}else P=function(){ie(V,0)};function qe(X,he){D=ie(function(){X(r.unstable_now())},he)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(X){X.callback=null},r.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<X?Math.floor(1e3/X):5},r.unstable_getCurrentPriorityLevel=function(){return b},r.unstable_next=function(X){switch(b){case 1:case 2:case 3:var he=3;break;default:he=b}var _e=b;b=he;try{return X()}finally{b=_e}},r.unstable_requestPaint=function(){F=!0},r.unstable_runWithPriority=function(X,he){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var _e=b;b=X;try{return he()}finally{b=_e}},r.unstable_scheduleCallback=function(X,he,_e){var xe=r.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?xe+_e:xe):_e=xe,X){case 1:var x=-1;break;case 2:x=250;break;case 5:x=1073741823;break;case 4:x=1e4;break;default:x=5e3}return x=_e+x,X={id:_++,callback:he,priorityLevel:X,startTime:_e,expirationTime:x,sortIndex:-1},_e>xe?(X.sortIndex=_e,e(p,X),t(m)===null&&X===t(p)&&(G?(Z(D),D=-1):G=!0,qe(se,_e-xe))):(X.sortIndex=x,e(m,X),q||N||(q=!0,de||(de=!0,P()))),X},r.unstable_shouldYield=M,r.unstable_wrapCallback=function(X){var he=b;return function(){var _e=b;b=he;try{return X.apply(this,arguments)}finally{b=_e}}}})(bg)),bg}var dT;function F1(){return dT||(dT=1,Ag.exports=q1()),Ag.exports}var wg={exports:{}},Jt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mT;function H1(){if(mT)return Jt;mT=1;var r=Op();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)p+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,p,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:T==null?null:""+T,children:m,containerInfo:p,implementation:_}}var c=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Jt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Jt.createPortal=function(m,p){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(m,p,null,_)},Jt.flushSync=function(m){var p=c.T,_=i.p;try{if(c.T=null,i.p=2,m)return m()}finally{c.T=p,i.p=_,i.d.f()}},Jt.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(m,p))},Jt.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},Jt.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var _=p.as,T=d(_,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,N=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;_==="style"?i.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:T,integrity:b,fetchPriority:N}):_==="script"&&i.d.X(m,{crossOrigin:T,integrity:b,fetchPriority:N,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Jt.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var _=d(p.as,p.crossOrigin);i.d.M(m,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(m)},Jt.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var _=p.as,T=d(_,p.crossOrigin);i.d.L(m,_,{crossOrigin:T,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Jt.preloadModule=function(m,p){if(typeof m=="string")if(p){var _=d(p.as,p.crossOrigin);i.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(m)},Jt.requestFormReset=function(m){i.d.r(m)},Jt.unstable_batchedUpdates=function(m,p){return m(p)},Jt.useFormState=function(m,p,_){return c.H.useFormState(m,p,_)},Jt.useFormStatus=function(){return c.H.useHostTransitionStatus()},Jt.version="19.1.1",Jt}var gT;function G1(){if(gT)return wg.exports;gT=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),wg.exports=H1(),wg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pT;function K1(){if(pT)return Su;pT=1;var r=F1(),e=Op(),t=G1();function i(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var s=n,o=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(o=s.return),n=s.return;while(n)}return s.tag===3?o:null}function c(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function d(n){if(l(n)!==n)throw Error(i(188))}function m(n){var s=n.alternate;if(!s){if(s=l(n),s===null)throw Error(i(188));return s!==n?null:n}for(var o=n,u=s;;){var f=o.return;if(f===null)break;var g=f.alternate;if(g===null){if(u=f.return,u!==null){o=u;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===o)return d(f),n;if(g===u)return d(f),s;g=g.sibling}throw Error(i(188))}if(o.return!==u.return)o=f,u=g;else{for(var E=!1,S=f.child;S;){if(S===o){E=!0,o=f,u=g;break}if(S===u){E=!0,u=f,o=g;break}S=S.sibling}if(!E){for(S=g.child;S;){if(S===o){E=!0,o=g,u=f;break}if(S===u){E=!0,u=g,o=f;break}S=S.sibling}if(!E)throw Error(i(189))}}if(o.alternate!==u)throw Error(i(190))}if(o.tag!==3)throw Error(i(188));return o.stateNode.current===o?n:s}function p(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=p(n),s!==null)return s;n=n.sibling}return null}var _=Object.assign,T=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),q=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),F=Symbol.for("react.profiler"),ie=Symbol.for("react.provider"),Z=Symbol.for("react.consumer"),$=Symbol.for("react.context"),fe=Symbol.for("react.forward_ref"),se=Symbol.for("react.suspense"),de=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),M=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function P(n){return n===null||typeof n!="object"?null:(n=V&&n[V]||n["@@iterator"],typeof n=="function"?n:null)}var R=Symbol.for("react.client.reference");function je(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===R?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case q:return"Fragment";case F:return"Profiler";case G:return"StrictMode";case se:return"Suspense";case de:return"SuspenseList";case I:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case N:return"Portal";case $:return(n.displayName||"Context")+".Provider";case Z:return(n._context.displayName||"Context")+".Consumer";case fe:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case D:return s=n.displayName||null,s!==null?s:je(n.type)||"Memo";case w:s=n._payload,n=n._init;try{return je(n(s))}catch{}}return null}var qe=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e={pending:!1,data:null,method:null,action:null},xe=[],x=-1;function te(n){return{current:n}}function ue(n){0>x||(n.current=xe[x],xe[x]=null,x--)}function le(n,s){x++,xe[x]=n.current,n.current=s}var ye=te(null),Ne=te(null),Se=te(null),ot=te(null);function We(n,s){switch(le(Se,s),le(Ne,n),le(ye,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?kE(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=kE(s),n=LE(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}ue(ye),le(ye,n)}function Fn(){ue(ye),ue(Ne),ue(Se)}function gl(n){n.memoizedState!==null&&le(ot,n);var s=ye.current,o=LE(s,n.type);s!==o&&(le(Ne,n),le(ye,o))}function xa(n){Ne.current===n&&(ue(ye),ue(Ne)),ot.current===n&&(ue(ot),pu._currentValue=_e)}var Na=Object.prototype.hasOwnProperty,Es=r.unstable_scheduleCallback,Va=r.unstable_cancelCallback,Td=r.unstable_shouldYield,pl=r.unstable_requestPaint,un=r.unstable_now,Rc=r.unstable_getCurrentPriorityLevel,xt=r.unstable_ImmediatePriority,Lt=r.unstable_UserBlockingPriority,Di=r.unstable_NormalPriority,Sd=r.unstable_LowPriority,yl=r.unstable_IdlePriority,Ad=r.log,Ts=r.unstable_setDisableYieldValue,hr=null,Yt=null;function Dn(n){if(typeof Ad=="function"&&Ts(n),Yt&&typeof Yt.setStrictMode=="function")try{Yt.setStrictMode(hr,n)}catch{}}var nn=Math.clz32?Math.clz32:Dc,bd=Math.log,Cc=Math.LN2;function Dc(n){return n>>>=0,n===0?32:31-(bd(n)/Cc|0)|0}var ii=256,fr=4194304;function Hn(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function xn(n,s,o){var u=n.pendingLanes;if(u===0)return 0;var f=0,g=n.suspendedLanes,E=n.pingedLanes;n=n.warmLanes;var S=u&134217727;return S!==0?(u=S&~g,u!==0?f=Hn(u):(E&=S,E!==0?f=Hn(E):o||(o=S&~n,o!==0&&(f=Hn(o))))):(S=u&~g,S!==0?f=Hn(S):E!==0?f=Hn(E):o||(o=u&~n,o!==0&&(f=Hn(o)))),f===0?0:s!==0&&s!==f&&(s&g)===0&&(g=f&-f,o=s&-s,g>=o||g===32&&(o&4194048)!==0)?s:f}function dr(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function Oa(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _l(){var n=ii;return ii<<=1,(ii&4194048)===0&&(ii=256),n}function mr(){var n=fr;return fr<<=1,(fr&62914560)===0&&(fr=4194304),n}function Ma(n){for(var s=[],o=0;31>o;o++)s.push(n);return s}function _t(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function xc(n,s,o,u,f,g){var E=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var S=n.entanglements,C=n.expirationTimes,j=n.hiddenUpdates;for(o=E&~o;0<o;){var W=31-nn(o),ne=1<<W;S[W]=0,C[W]=-1;var K=j[W];if(K!==null)for(j[W]=null,W=0;W<K.length;W++){var Q=K[W];Q!==null&&(Q.lane&=-536870913)}o&=~ne}u!==0&&gr(n,u,0),g!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=g&~(E&~s))}function gr(n,s,o){n.pendingLanes|=s,n.suspendedLanes&=~s;var u=31-nn(s);n.entangledLanes|=s,n.entanglements[u]=n.entanglements[u]|1073741824|o&4194090}function pr(n,s){var o=n.entangledLanes|=s;for(n=n.entanglements;o;){var u=31-nn(o),f=1<<u;f&s|n[u]&s&&(n[u]|=s),o&=~f}}function vl(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function El(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function xi(){var n=he.p;return n!==0?n:(n=window.event,n===void 0?32:nT(n.type))}function wd(n,s){var o=he.p;try{return he.p=n,s()}finally{he.p=o}}var ri=Math.random().toString(36).slice(2),vt="__reactFiber$"+ri,Ft="__reactProps$"+ri,Ni="__reactContainer$"+ri,Ss="__reactEvents$"+ri,As="__reactListeners$"+ri,Id="__reactHandles$"+ri,Gn="__reactResources$"+ri,yr="__reactMarker$"+ri;function Pa(n){delete n[vt],delete n[Ft],delete n[Ss],delete n[As],delete n[Id]}function si(n){var s=n[vt];if(s)return s;for(var o=n.parentNode;o;){if(s=o[Ni]||o[vt]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(n=jE(n);n!==null;){if(o=n[vt])return o;n=jE(n)}return s}n=o,o=n.parentNode}return null}function ai(n){if(n=n[vt]||n[Ni]){var s=n.tag;if(s===5||s===6||s===13||s===26||s===27||s===3)return n}return null}function _r(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(i(33))}function vr(n){var s=n[Gn];return s||(s=n[Gn]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Et(n){n[yr]=!0}var Nc=new Set,bs={};function oi(n,s){li(n,s),li(n+"Capture",s)}function li(n,s){for(bs[n]=s,n=0;n<s.length;n++)Nc.add(s[n])}var ws=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ui={},ka={};function Rd(n){return Na.call(ka,n)?!0:Na.call(ui,n)?!1:ws.test(n)?ka[n]=!0:(ui[n]=!0,!1)}function Is(n,s,o){if(Rd(s))if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var u=s.toLowerCase().slice(0,5);if(u!=="data-"&&u!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+o)}}function Rs(n,s,o){if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+o)}}function Nn(n,s,o,u){if(u===null)n.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(s,o,""+u)}}var Cs,La;function Vi(n){if(Cs===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Cs=s&&s[1]||"",La=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Cs+n+La}var Ua=!1;function Ba(n,s){if(!n||Ua)return"";Ua=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var u={DetermineComponentFrameRoot:function(){try{if(s){var ne=function(){throw Error()};if(Object.defineProperty(ne.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ne,[])}catch(Q){var K=Q}Reflect.construct(n,[],ne)}else{try{ne.call()}catch(Q){K=Q}n.call(ne.prototype)}}else{try{throw Error()}catch(Q){K=Q}(ne=n())&&typeof ne.catch=="function"&&ne.catch(function(){})}}catch(Q){if(Q&&K&&typeof Q.stack=="string")return[Q.stack,K.stack]}return[null,null]}};u.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(u.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(u.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=u.DetermineComponentFrameRoot(),E=g[0],S=g[1];if(E&&S){var C=E.split(`
`),j=S.split(`
`);for(f=u=0;u<C.length&&!C[u].includes("DetermineComponentFrameRoot");)u++;for(;f<j.length&&!j[f].includes("DetermineComponentFrameRoot");)f++;if(u===C.length||f===j.length)for(u=C.length-1,f=j.length-1;1<=u&&0<=f&&C[u]!==j[f];)f--;for(;1<=u&&0<=f;u--,f--)if(C[u]!==j[f]){if(u!==1||f!==1)do if(u--,f--,0>f||C[u]!==j[f]){var W=`
`+C[u].replace(" at new "," at ");return n.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",n.displayName)),W}while(1<=u&&0<=f);break}}}finally{Ua=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?Vi(o):""}function Cd(n){switch(n.tag){case 26:case 27:case 5:return Vi(n.type);case 16:return Vi("Lazy");case 13:return Vi("Suspense");case 19:return Vi("SuspenseList");case 0:case 15:return Ba(n.type,!1);case 11:return Ba(n.type.render,!1);case 1:return Ba(n.type,!0);case 31:return Vi("Activity");default:return""}}function Kn(n){try{var s="";do s+=Cd(n),n=n.return;while(n);return s}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function ht(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Er(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Ds(n){var s=Er(n)?"checked":"value",o=Object.getOwnPropertyDescriptor(n.constructor.prototype,s),u=""+n[s];if(!n.hasOwnProperty(s)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,g=o.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return f.call(this)},set:function(E){u=""+E,g.call(this,E)}}),Object.defineProperty(n,s,{enumerable:o.enumerable}),{getValue:function(){return u},setValue:function(E){u=""+E},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Tr(n){n._valueTracker||(n._valueTracker=Ds(n))}function Ze(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var o=s.getValue(),u="";return n&&(u=Er(n)?n.checked?"true":"false":n.value),n=u,n!==o?(s.setValue(n),!0):!1}function Oi(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var xs=/[\n"\\]/g;function Ut(n){return n.replace(xs,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Tl(n,s,o,u,f,g,E,S){n.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.type=E:n.removeAttribute("type"),s!=null?E==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+ht(s)):n.value!==""+ht(s)&&(n.value=""+ht(s)):E!=="submit"&&E!=="reset"||n.removeAttribute("value"),s!=null?Al(n,E,ht(s)):o!=null?Al(n,E,ht(o)):u!=null&&n.removeAttribute("value"),f==null&&g!=null&&(n.defaultChecked=!!g),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?n.name=""+ht(S):n.removeAttribute("name")}function Sl(n,s,o,u,f,g,E,S){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(n.type=g),s!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||s!=null))return;o=o!=null?""+ht(o):"",s=s!=null?""+ht(s):o,S||s===n.value||(n.value=s),n.defaultValue=s}u=u??f,u=typeof u!="function"&&typeof u!="symbol"&&!!u,n.checked=S?n.checked:!!u,n.defaultChecked=!!u,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(n.name=E)}function Al(n,s,o){s==="number"&&Oi(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Sr(n,s,o,u){if(n=n.options,s){s={};for(var f=0;f<o.length;f++)s["$"+o[f]]=!0;for(o=0;o<n.length;o++)f=s.hasOwnProperty("$"+n[o].value),n[o].selected!==f&&(n[o].selected=f),f&&u&&(n[o].defaultSelected=!0)}else{for(o=""+ht(o),s=null,f=0;f<n.length;f++){if(n[f].value===o){n[f].selected=!0,u&&(n[f].defaultSelected=!0);return}s!==null||n[f].disabled||(s=n[f])}s!==null&&(s.selected=!0)}}function Vc(n,s,o){if(s!=null&&(s=""+ht(s),s!==n.value&&(n.value=s),o==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=o!=null?""+ht(o):""}function Oc(n,s,o,u){if(s==null){if(u!=null){if(o!=null)throw Error(i(92));if(qe(u)){if(1<u.length)throw Error(i(93));u=u[0]}o=u}o==null&&(o=""),s=o}o=ht(s),n.defaultValue=o,u=n.textContent,u===o&&u!==""&&u!==null&&(n.value=u)}function Vn(n,s){if(s){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=s;return}}n.textContent=s}var Mi=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function bl(n,s,o){var u=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?u?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":u?n.setProperty(s,o):typeof o!="number"||o===0||Mi.has(s)?s==="float"?n.cssFloat=o:n[s]=(""+o).trim():n[s]=o+"px"}function wl(n,s,o){if(s!=null&&typeof s!="object")throw Error(i(62));if(n=n.style,o!=null){for(var u in o)!o.hasOwnProperty(u)||s!=null&&s.hasOwnProperty(u)||(u.indexOf("--")===0?n.setProperty(u,""):u==="float"?n.cssFloat="":n[u]="");for(var f in s)u=s[f],s.hasOwnProperty(f)&&o[f]!==u&&bl(n,f,u)}else for(var g in s)s.hasOwnProperty(g)&&bl(n,g,s[g])}function za(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Pc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Qn(n){return Pc.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}var Il=null;function Rl(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Ar=null,rn=null;function kc(n){var s=ai(n);if(s&&(n=s.stateNode)){var o=n[Ft]||null;e:switch(n=s.stateNode,s.type){case"input":if(Tl(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Ut(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var u=o[s];if(u!==n&&u.form===n.form){var f=u[Ft]||null;if(!f)throw Error(i(90));Tl(u,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(s=0;s<o.length;s++)u=o[s],u.form===n.form&&Ze(u)}break e;case"textarea":Vc(n,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&Sr(n,!!o.multiple,s,!1)}}}var Ns=!1;function Vs(n,s,o){if(Ns)return n(s,o);Ns=!0;try{var u=n(s);return u}finally{if(Ns=!1,(Ar!==null||rn!==null)&&(wh(),Ar&&(s=Ar,n=rn,rn=Ar=null,kc(s),n)))for(s=0;s<n.length;s++)kc(n[s])}}function br(n,s){var o=n.stateNode;if(o===null)return null;var u=o[Ft]||null;if(u===null)return null;o=u[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(n=n.type,u=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!u;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(i(231,s,typeof o));return o}var sn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pi=!1;if(sn)try{var wr={};Object.defineProperty(wr,"passive",{get:function(){Pi=!0}}),window.addEventListener("test",wr,wr),window.removeEventListener("test",wr,wr)}catch{Pi=!1}var On=null,rt=null,ja=null;function Lc(){if(ja)return ja;var n,s=rt,o=s.length,u,f="value"in On?On.value:On.textContent,g=f.length;for(n=0;n<o&&s[n]===f[n];n++);var E=o-n;for(u=1;u<=E&&s[o-u]===f[g-u];u++);return ja=f.slice(n,1<u?1-u:void 0)}function Os(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function Ms(){return!0}function Cl(){return!1}function Nt(n){function s(o,u,f,g,E){this._reactName=o,this._targetInst=f,this.type=u,this.nativeEvent=g,this.target=E,this.currentTarget=null;for(var S in n)n.hasOwnProperty(S)&&(o=n[S],this[S]=o?o(g):g[S]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Ms:Cl,this.isPropagationStopped=Cl,this}return _(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Ms)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Ms)},persist:function(){},isPersistent:Ms}),s}var $t={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ps=Nt($t),ks=_({},$t,{view:0,detail:0}),Ls=Nt(ks),qa,Us,ci,Bs=_({},ks,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ga,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==ci&&(ci&&n.type==="mousemove"?(qa=n.screenX-ci.screenX,Us=n.screenY-ci.screenY):Us=qa=0,ci=n),qa)},movementY:function(n){return"movementY"in n?n.movementY:Us}}),zs=Nt(Bs),Dd=_({},Bs,{dataTransfer:0}),Uc=Nt(Dd),js=_({},ks,{relatedTarget:0}),Fa=Nt(js),Bc=_({},$t,{animationName:0,elapsedTime:0,pseudoElement:0}),Dl=Nt(Bc),xl=_({},$t,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),zc=Nt(xl),Ha=_({},$t,{data:0}),Nl=Nt(Ha),jc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ki={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fc(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=qc[n])?!!s[n]:!1}function Ga(){return Fc}var Hc=_({},ks,{key:function(n){if(n.key){var s=jc[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Os(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?ki[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ga,charCode:function(n){return n.type==="keypress"?Os(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Os(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Ka=Nt(Hc),an=_({},Bs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vl=Nt(an),Gc=_({},ks,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ga}),Ir=Nt(Gc),h=_({},$t,{propertyName:0,elapsedTime:0,pseudoElement:0}),y=Nt(h),v=_({},Bs,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),A=Nt(v),B=_({},$t,{newState:0,oldState:0}),Y=Nt(B),oe=[9,13,27,32],Ce=sn&&"CompositionEvent"in window,lt=null;sn&&"documentMode"in document&&(lt=document.documentMode);var Ke=sn&&"TextEvent"in window&&!lt,Tt=sn&&(!Ce||lt&&8<lt&&11>=lt),gn=" ",hi=!1;function Yn(n,s){switch(n){case"keyup":return oe.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $n(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Xn=!1;function Ol(n,s){switch(n){case"compositionend":return $n(s);case"keypress":return s.which!==32?null:(hi=!0,gn);case"textInput":return n=s.data,n===gn&&hi?null:n;default:return null}}function fI(n,s){if(Xn)return n==="compositionend"||!Ce&&Yn(n,s)?(n=Lc(),ja=rt=On=null,Xn=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Tt&&s.locale!=="ko"?null:s.data;default:return null}}var dI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xy(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!dI[n.type]:s==="textarea"}function Jy(n,s,o,u){Ar?rn?rn.push(u):rn=[u]:Ar=u,s=Nh(s,"onChange"),0<s.length&&(o=new Ps("onChange","change",null,o,u),n.push({event:o,listeners:s}))}var Ml=null,Pl=null;function mI(n){NE(n,0)}function Kc(n){var s=_r(n);if(Ze(s))return n}function Wy(n,s){if(n==="change")return s}var Zy=!1;if(sn){var xd;if(sn){var Nd="oninput"in document;if(!Nd){var e_=document.createElement("div");e_.setAttribute("oninput","return;"),Nd=typeof e_.oninput=="function"}xd=Nd}else xd=!1;Zy=xd&&(!document.documentMode||9<document.documentMode)}function t_(){Ml&&(Ml.detachEvent("onpropertychange",n_),Pl=Ml=null)}function n_(n){if(n.propertyName==="value"&&Kc(Pl)){var s=[];Jy(s,Pl,n,Rl(n)),Vs(mI,s)}}function gI(n,s,o){n==="focusin"?(t_(),Ml=s,Pl=o,Ml.attachEvent("onpropertychange",n_)):n==="focusout"&&t_()}function pI(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Kc(Pl)}function yI(n,s){if(n==="click")return Kc(s)}function _I(n,s){if(n==="input"||n==="change")return Kc(s)}function vI(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var pn=typeof Object.is=="function"?Object.is:vI;function kl(n,s){if(pn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var o=Object.keys(n),u=Object.keys(s);if(o.length!==u.length)return!1;for(u=0;u<o.length;u++){var f=o[u];if(!Na.call(s,f)||!pn(n[f],s[f]))return!1}return!0}function i_(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function r_(n,s){var o=i_(n);n=0;for(var u;o;){if(o.nodeType===3){if(u=n+o.textContent.length,n<=s&&u>=s)return{node:o,offset:s-n};n=u}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=i_(o)}}function s_(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?s_(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function a_(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=Oi(n.document);s instanceof n.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)n=s.contentWindow;else break;s=Oi(n.document)}return s}function Vd(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var EI=sn&&"documentMode"in document&&11>=document.documentMode,Qa=null,Od=null,Ll=null,Md=!1;function o_(n,s,o){var u=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;Md||Qa==null||Qa!==Oi(u)||(u=Qa,"selectionStart"in u&&Vd(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Ll&&kl(Ll,u)||(Ll=u,u=Nh(Od,"onSelect"),0<u.length&&(s=new Ps("onSelect","select",null,s,o),n.push({event:s,listeners:u}),s.target=Qa)))}function qs(n,s){var o={};return o[n.toLowerCase()]=s.toLowerCase(),o["Webkit"+n]="webkit"+s,o["Moz"+n]="moz"+s,o}var Ya={animationend:qs("Animation","AnimationEnd"),animationiteration:qs("Animation","AnimationIteration"),animationstart:qs("Animation","AnimationStart"),transitionrun:qs("Transition","TransitionRun"),transitionstart:qs("Transition","TransitionStart"),transitioncancel:qs("Transition","TransitionCancel"),transitionend:qs("Transition","TransitionEnd")},Pd={},l_={};sn&&(l_=document.createElement("div").style,"AnimationEvent"in window||(delete Ya.animationend.animation,delete Ya.animationiteration.animation,delete Ya.animationstart.animation),"TransitionEvent"in window||delete Ya.transitionend.transition);function Fs(n){if(Pd[n])return Pd[n];if(!Ya[n])return n;var s=Ya[n],o;for(o in s)if(s.hasOwnProperty(o)&&o in l_)return Pd[n]=s[o];return n}var u_=Fs("animationend"),c_=Fs("animationiteration"),h_=Fs("animationstart"),TI=Fs("transitionrun"),SI=Fs("transitionstart"),AI=Fs("transitioncancel"),f_=Fs("transitionend"),d_=new Map,kd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");kd.push("scrollEnd");function Jn(n,s){d_.set(n,s),oi(s,[n])}var m_=new WeakMap;function Mn(n,s){if(typeof n=="object"&&n!==null){var o=m_.get(n);return o!==void 0?o:(s={value:n,source:s,stack:Kn(s)},m_.set(n,s),s)}return{value:n,source:s,stack:Kn(s)}}var Pn=[],$a=0,Ld=0;function Qc(){for(var n=$a,s=Ld=$a=0;s<n;){var o=Pn[s];Pn[s++]=null;var u=Pn[s];Pn[s++]=null;var f=Pn[s];Pn[s++]=null;var g=Pn[s];if(Pn[s++]=null,u!==null&&f!==null){var E=u.pending;E===null?f.next=f:(f.next=E.next,E.next=f),u.pending=f}g!==0&&g_(o,f,g)}}function Yc(n,s,o,u){Pn[$a++]=n,Pn[$a++]=s,Pn[$a++]=o,Pn[$a++]=u,Ld|=u,n.lanes|=u,n=n.alternate,n!==null&&(n.lanes|=u)}function Ud(n,s,o,u){return Yc(n,s,o,u),$c(n)}function Xa(n,s){return Yc(n,null,null,s),$c(n)}function g_(n,s,o){n.lanes|=o;var u=n.alternate;u!==null&&(u.lanes|=o);for(var f=!1,g=n.return;g!==null;)g.childLanes|=o,u=g.alternate,u!==null&&(u.childLanes|=o),g.tag===22&&(n=g.stateNode,n===null||n._visibility&1||(f=!0)),n=g,g=g.return;return n.tag===3?(g=n.stateNode,f&&s!==null&&(f=31-nn(o),n=g.hiddenUpdates,u=n[f],u===null?n[f]=[s]:u.push(s),s.lane=o|536870912),g):null}function $c(n){if(50<lu)throw lu=0,Hm=null,Error(i(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var Ja={};function bI(n,s,o,u){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yn(n,s,o,u){return new bI(n,s,o,u)}function Bd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Li(n,s){var o=n.alternate;return o===null?(o=yn(n.tag,s,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=s,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,s=n.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function p_(n,s){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,s=o.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function Xc(n,s,o,u,f,g){var E=0;if(u=n,typeof n=="function")Bd(n)&&(E=1);else if(typeof n=="string")E=I1(n,o,ye.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case I:return n=yn(31,o,s,f),n.elementType=I,n.lanes=g,n;case q:return Hs(o.children,f,g,s);case G:E=8,f|=24;break;case F:return n=yn(12,o,s,f|2),n.elementType=F,n.lanes=g,n;case se:return n=yn(13,o,s,f),n.elementType=se,n.lanes=g,n;case de:return n=yn(19,o,s,f),n.elementType=de,n.lanes=g,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ie:case $:E=10;break e;case Z:E=9;break e;case fe:E=11;break e;case D:E=14;break e;case w:E=16,u=null;break e}E=29,o=Error(i(130,n===null?"null":typeof n,"")),u=null}return s=yn(E,o,s,f),s.elementType=n,s.type=u,s.lanes=g,s}function Hs(n,s,o,u){return n=yn(7,n,u,s),n.lanes=o,n}function zd(n,s,o){return n=yn(6,n,null,s),n.lanes=o,n}function jd(n,s,o){return s=yn(4,n.children!==null?n.children:[],n.key,s),s.lanes=o,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var Wa=[],Za=0,Jc=null,Wc=0,kn=[],Ln=0,Gs=null,Ui=1,Bi="";function Ks(n,s){Wa[Za++]=Wc,Wa[Za++]=Jc,Jc=n,Wc=s}function y_(n,s,o){kn[Ln++]=Ui,kn[Ln++]=Bi,kn[Ln++]=Gs,Gs=n;var u=Ui;n=Bi;var f=32-nn(u)-1;u&=~(1<<f),o+=1;var g=32-nn(s)+f;if(30<g){var E=f-f%5;g=(u&(1<<E)-1).toString(32),u>>=E,f-=E,Ui=1<<32-nn(s)+f|o<<f|u,Bi=g+n}else Ui=1<<g|o<<f|u,Bi=n}function qd(n){n.return!==null&&(Ks(n,1),y_(n,1,0))}function Fd(n){for(;n===Jc;)Jc=Wa[--Za],Wa[Za]=null,Wc=Wa[--Za],Wa[Za]=null;for(;n===Gs;)Gs=kn[--Ln],kn[Ln]=null,Bi=kn[--Ln],kn[Ln]=null,Ui=kn[--Ln],kn[Ln]=null}var on=null,gt=null,He=!1,Qs=null,fi=!1,Hd=Error(i(519));function Ys(n){var s=Error(i(418,""));throw zl(Mn(s,n)),Hd}function __(n){var s=n.stateNode,o=n.type,u=n.memoizedProps;switch(s[vt]=n,s[Ft]=u,o){case"dialog":ke("cancel",s),ke("close",s);break;case"iframe":case"object":case"embed":ke("load",s);break;case"video":case"audio":for(o=0;o<cu.length;o++)ke(cu[o],s);break;case"source":ke("error",s);break;case"img":case"image":case"link":ke("error",s),ke("load",s);break;case"details":ke("toggle",s);break;case"input":ke("invalid",s),Sl(s,u.value,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name,!0),Tr(s);break;case"select":ke("invalid",s);break;case"textarea":ke("invalid",s),Oc(s,u.value,u.defaultValue,u.children),Tr(s)}o=u.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||u.suppressHydrationWarning===!0||PE(s.textContent,o)?(u.popover!=null&&(ke("beforetoggle",s),ke("toggle",s)),u.onScroll!=null&&ke("scroll",s),u.onScrollEnd!=null&&ke("scrollend",s),u.onClick!=null&&(s.onclick=Vh),s=!0):s=!1,s||Ys(n)}function v_(n){for(on=n.return;on;)switch(on.tag){case 5:case 13:fi=!1;return;case 27:case 3:fi=!0;return;default:on=on.return}}function Ul(n){if(n!==on)return!1;if(!He)return v_(n),He=!0,!1;var s=n.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||ag(n.type,n.memoizedProps)),o=!o),o&&gt&&Ys(n),v_(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));e:{for(n=n.nextSibling,s=0;n;){if(n.nodeType===8)if(o=n.data,o==="/$"){if(s===0){gt=Zn(n.nextSibling);break e}s--}else o!=="$"&&o!=="$!"&&o!=="$?"||s++;n=n.nextSibling}gt=null}}else s===27?(s=gt,qr(n.type)?(n=cg,cg=null,gt=n):gt=s):gt=on?Zn(n.stateNode.nextSibling):null;return!0}function Bl(){gt=on=null,He=!1}function E_(){var n=Qs;return n!==null&&(fn===null?fn=n:fn.push.apply(fn,n),Qs=null),n}function zl(n){Qs===null?Qs=[n]:Qs.push(n)}var Gd=te(null),$s=null,zi=null;function Rr(n,s,o){le(Gd,s._currentValue),s._currentValue=o}function ji(n){n._currentValue=Gd.current,ue(Gd)}function Kd(n,s,o){for(;n!==null;){var u=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,u!==null&&(u.childLanes|=s)):u!==null&&(u.childLanes&s)!==s&&(u.childLanes|=s),n===o)break;n=n.return}}function Qd(n,s,o,u){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var g=f.dependencies;if(g!==null){var E=f.child;g=g.firstContext;e:for(;g!==null;){var S=g;g=f;for(var C=0;C<s.length;C++)if(S.context===s[C]){g.lanes|=o,S=g.alternate,S!==null&&(S.lanes|=o),Kd(g.return,o,n),u||(E=null);break e}g=S.next}}else if(f.tag===18){if(E=f.return,E===null)throw Error(i(341));E.lanes|=o,g=E.alternate,g!==null&&(g.lanes|=o),Kd(E,o,n),E=null}else E=f.child;if(E!==null)E.return=f;else for(E=f;E!==null;){if(E===n){E=null;break}if(f=E.sibling,f!==null){f.return=E.return,E=f;break}E=E.return}f=E}}function jl(n,s,o,u){n=null;for(var f=s,g=!1;f!==null;){if(!g){if((f.flags&524288)!==0)g=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var E=f.alternate;if(E===null)throw Error(i(387));if(E=E.memoizedProps,E!==null){var S=f.type;pn(f.pendingProps.value,E.value)||(n!==null?n.push(S):n=[S])}}else if(f===ot.current){if(E=f.alternate,E===null)throw Error(i(387));E.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(pu):n=[pu])}f=f.return}n!==null&&Qd(s,n,o,u),s.flags|=262144}function Zc(n){for(n=n.firstContext;n!==null;){if(!pn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Xs(n){$s=n,zi=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function Xt(n){return T_($s,n)}function eh(n,s){return $s===null&&Xs(n),T_(n,s)}function T_(n,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},zi===null){if(n===null)throw Error(i(308));zi=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else zi=zi.next=s;return o}var wI=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(o,u){n.push(u)}};this.abort=function(){s.aborted=!0,n.forEach(function(o){return o()})}},II=r.unstable_scheduleCallback,RI=r.unstable_NormalPriority,Vt={$$typeof:$,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yd(){return{controller:new wI,data:new Map,refCount:0}}function ql(n){n.refCount--,n.refCount===0&&II(RI,function(){n.controller.abort()})}var Fl=null,$d=0,eo=0,to=null;function CI(n,s){if(Fl===null){var o=Fl=[];$d=0,eo=Jm(),to={status:"pending",value:void 0,then:function(u){o.push(u)}}}return $d++,s.then(S_,S_),s}function S_(){if(--$d===0&&Fl!==null){to!==null&&(to.status="fulfilled");var n=Fl;Fl=null,eo=0,to=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function DI(n,s){var o=[],u={status:"pending",value:null,reason:null,then:function(f){o.push(f)}};return n.then(function(){u.status="fulfilled",u.value=s;for(var f=0;f<o.length;f++)(0,o[f])(s)},function(f){for(u.status="rejected",u.reason=f,f=0;f<o.length;f++)(0,o[f])(void 0)}),u}var A_=X.S;X.S=function(n,s){typeof s=="object"&&s!==null&&typeof s.then=="function"&&CI(n,s),A_!==null&&A_(n,s)};var Js=te(null);function Xd(){var n=Js.current;return n!==null?n:st.pooledCache}function th(n,s){s===null?le(Js,Js.current):le(Js,s.pool)}function b_(){var n=Xd();return n===null?null:{parent:Vt._currentValue,pool:n}}var Hl=Error(i(460)),w_=Error(i(474)),nh=Error(i(542)),Jd={then:function(){}};function I_(n){return n=n.status,n==="fulfilled"||n==="rejected"}function ih(){}function R_(n,s,o){switch(o=n[o],o===void 0?n.push(s):o!==s&&(s.then(ih,ih),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,D_(n),n;default:if(typeof s.status=="string")s.then(ih,ih);else{if(n=st,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=s,n.status="pending",n.then(function(u){if(s.status==="pending"){var f=s;f.status="fulfilled",f.value=u}},function(u){if(s.status==="pending"){var f=s;f.status="rejected",f.reason=u}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,D_(n),n}throw Gl=s,Hl}}var Gl=null;function C_(){if(Gl===null)throw Error(i(459));var n=Gl;return Gl=null,n}function D_(n){if(n===Hl||n===nh)throw Error(i(483))}var Cr=!1;function Wd(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Zd(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Dr(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function xr(n,s,o){var u=n.updateQueue;if(u===null)return null;if(u=u.shared,(Qe&2)!==0){var f=u.pending;return f===null?s.next=s:(s.next=f.next,f.next=s),u.pending=s,s=$c(n),g_(n,null,o),s}return Yc(n,u,s,o),$c(n)}function Kl(n,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,pr(n,o)}}function em(n,s){var o=n.updateQueue,u=n.alternate;if(u!==null&&(u=u.updateQueue,o===u)){var f=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var E={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?f=g=E:g=g.next=E,o=o.next}while(o!==null);g===null?f=g=s:g=g.next=s}else f=g=s;o={baseState:u.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:u.shared,callbacks:u.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=s:n.next=s,o.lastBaseUpdate=s}var tm=!1;function Ql(){if(tm){var n=to;if(n!==null)throw n}}function Yl(n,s,o,u){tm=!1;var f=n.updateQueue;Cr=!1;var g=f.firstBaseUpdate,E=f.lastBaseUpdate,S=f.shared.pending;if(S!==null){f.shared.pending=null;var C=S,j=C.next;C.next=null,E===null?g=j:E.next=j,E=C;var W=n.alternate;W!==null&&(W=W.updateQueue,S=W.lastBaseUpdate,S!==E&&(S===null?W.firstBaseUpdate=j:S.next=j,W.lastBaseUpdate=C))}if(g!==null){var ne=f.baseState;E=0,W=j=C=null,S=g;do{var K=S.lane&-536870913,Q=K!==S.lane;if(Q?(Be&K)===K:(u&K)===K){K!==0&&K===eo&&(tm=!0),W!==null&&(W=W.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var we=n,Ae=S;K=s;var nt=o;switch(Ae.tag){case 1:if(we=Ae.payload,typeof we=="function"){ne=we.call(nt,ne,K);break e}ne=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=Ae.payload,K=typeof we=="function"?we.call(nt,ne,K):we,K==null)break e;ne=_({},ne,K);break e;case 2:Cr=!0}}K=S.callback,K!==null&&(n.flags|=64,Q&&(n.flags|=8192),Q=f.callbacks,Q===null?f.callbacks=[K]:Q.push(K))}else Q={lane:K,tag:S.tag,payload:S.payload,callback:S.callback,next:null},W===null?(j=W=Q,C=ne):W=W.next=Q,E|=K;if(S=S.next,S===null){if(S=f.shared.pending,S===null)break;Q=S,S=Q.next,Q.next=null,f.lastBaseUpdate=Q,f.shared.pending=null}}while(!0);W===null&&(C=ne),f.baseState=C,f.firstBaseUpdate=j,f.lastBaseUpdate=W,g===null&&(f.shared.lanes=0),Ur|=E,n.lanes=E,n.memoizedState=ne}}function x_(n,s){if(typeof n!="function")throw Error(i(191,n));n.call(s)}function N_(n,s){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)x_(o[n],s)}var no=te(null),rh=te(0);function V_(n,s){n=Yi,le(rh,n),le(no,s),Yi=n|s.baseLanes}function nm(){le(rh,Yi),le(no,no.current)}function im(){Yi=rh.current,ue(no),ue(rh)}var Nr=0,Ve=null,et=null,It=null,sh=!1,io=!1,Ws=!1,ah=0,$l=0,ro=null,xI=0;function St(){throw Error(i(321))}function rm(n,s){if(s===null)return!1;for(var o=0;o<s.length&&o<n.length;o++)if(!pn(n[o],s[o]))return!1;return!0}function sm(n,s,o,u,f,g){return Nr=g,Ve=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,X.H=n===null||n.memoizedState===null?gv:pv,Ws=!1,g=o(u,f),Ws=!1,io&&(g=M_(s,o,u,f)),O_(n),g}function O_(n){X.H=fh;var s=et!==null&&et.next!==null;if(Nr=0,It=et=Ve=null,sh=!1,$l=0,ro=null,s)throw Error(i(300));n===null||Bt||(n=n.dependencies,n!==null&&Zc(n)&&(Bt=!0))}function M_(n,s,o,u){Ve=n;var f=0;do{if(io&&(ro=null),$l=0,io=!1,25<=f)throw Error(i(301));if(f+=1,It=et=null,n.updateQueue!=null){var g=n.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}X.H=LI,g=s(o,u)}while(io);return g}function NI(){var n=X.H,s=n.useState()[0];return s=typeof s.then=="function"?Xl(s):s,n=n.useState()[0],(et!==null?et.memoizedState:null)!==n&&(Ve.flags|=1024),s}function am(){var n=ah!==0;return ah=0,n}function om(n,s,o){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~o}function lm(n){if(sh){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}sh=!1}Nr=0,It=et=Ve=null,io=!1,$l=ah=0,ro=null}function cn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?Ve.memoizedState=It=n:It=It.next=n,It}function Rt(){if(et===null){var n=Ve.alternate;n=n!==null?n.memoizedState:null}else n=et.next;var s=It===null?Ve.memoizedState:It.next;if(s!==null)It=s,et=n;else{if(n===null)throw Ve.alternate===null?Error(i(467)):Error(i(310));et=n,n={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},It===null?Ve.memoizedState=It=n:It=It.next=n}return It}function um(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Xl(n){var s=$l;return $l+=1,ro===null&&(ro=[]),n=R_(ro,n,s),s=Ve,(It===null?s.memoizedState:It.next)===null&&(s=s.alternate,X.H=s===null||s.memoizedState===null?gv:pv),n}function oh(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Xl(n);if(n.$$typeof===$)return Xt(n)}throw Error(i(438,String(n)))}function cm(n){var s=null,o=Ve.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var u=Ve.alternate;u!==null&&(u=u.updateQueue,u!==null&&(u=u.memoCache,u!=null&&(s={data:u.data.map(function(f){return f.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=um(),Ve.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(n),u=0;u<n;u++)o[u]=M;return s.index++,o}function qi(n,s){return typeof s=="function"?s(n):s}function lh(n){var s=Rt();return hm(s,et,n)}function hm(n,s,o){var u=n.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=o;var f=n.baseQueue,g=u.pending;if(g!==null){if(f!==null){var E=f.next;f.next=g.next,g.next=E}s.baseQueue=f=g,u.pending=null}if(g=n.baseState,f===null)n.memoizedState=g;else{s=f.next;var S=E=null,C=null,j=s,W=!1;do{var ne=j.lane&-536870913;if(ne!==j.lane?(Be&ne)===ne:(Nr&ne)===ne){var K=j.revertLane;if(K===0)C!==null&&(C=C.next={lane:0,revertLane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),ne===eo&&(W=!0);else if((Nr&K)===K){j=j.next,K===eo&&(W=!0);continue}else ne={lane:0,revertLane:j.revertLane,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},C===null?(S=C=ne,E=g):C=C.next=ne,Ve.lanes|=K,Ur|=K;ne=j.action,Ws&&o(g,ne),g=j.hasEagerState?j.eagerState:o(g,ne)}else K={lane:ne,revertLane:j.revertLane,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},C===null?(S=C=K,E=g):C=C.next=K,Ve.lanes|=ne,Ur|=ne;j=j.next}while(j!==null&&j!==s);if(C===null?E=g:C.next=S,!pn(g,n.memoizedState)&&(Bt=!0,W&&(o=to,o!==null)))throw o;n.memoizedState=g,n.baseState=E,n.baseQueue=C,u.lastRenderedState=g}return f===null&&(u.lanes=0),[n.memoizedState,u.dispatch]}function fm(n){var s=Rt(),o=s.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=n;var u=o.dispatch,f=o.pending,g=s.memoizedState;if(f!==null){o.pending=null;var E=f=f.next;do g=n(g,E.action),E=E.next;while(E!==f);pn(g,s.memoizedState)||(Bt=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),o.lastRenderedState=g}return[g,u]}function P_(n,s,o){var u=Ve,f=Rt(),g=He;if(g){if(o===void 0)throw Error(i(407));o=o()}else o=s();var E=!pn((et||f).memoizedState,o);E&&(f.memoizedState=o,Bt=!0),f=f.queue;var S=U_.bind(null,u,f,n);if(Jl(2048,8,S,[n]),f.getSnapshot!==s||E||It!==null&&It.memoizedState.tag&1){if(u.flags|=2048,so(9,uh(),L_.bind(null,u,f,o,s),null),st===null)throw Error(i(349));g||(Nr&124)!==0||k_(u,s,o)}return o}function k_(n,s,o){n.flags|=16384,n={getSnapshot:s,value:o},s=Ve.updateQueue,s===null?(s=um(),Ve.updateQueue=s,s.stores=[n]):(o=s.stores,o===null?s.stores=[n]:o.push(n))}function L_(n,s,o,u){s.value=o,s.getSnapshot=u,B_(s)&&z_(n)}function U_(n,s,o){return o(function(){B_(s)&&z_(n)})}function B_(n){var s=n.getSnapshot;n=n.value;try{var o=s();return!pn(n,o)}catch{return!0}}function z_(n){var s=Xa(n,2);s!==null&&Sn(s,n,2)}function dm(n){var s=cn();if(typeof n=="function"){var o=n;if(n=o(),Ws){Dn(!0);try{o()}finally{Dn(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:n},s}function j_(n,s,o,u){return n.baseState=o,hm(n,et,typeof u=="function"?u:qi)}function VI(n,s,o,u,f){if(hh(n))throw Error(i(485));if(n=s.action,n!==null){var g={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){g.listeners.push(E)}};X.T!==null?o(!0):g.isTransition=!1,u(g),o=s.pending,o===null?(g.next=s.pending=g,q_(s,g)):(g.next=o.next,s.pending=o.next=g)}}function q_(n,s){var o=s.action,u=s.payload,f=n.state;if(s.isTransition){var g=X.T,E={};X.T=E;try{var S=o(f,u),C=X.S;C!==null&&C(E,S),F_(n,s,S)}catch(j){mm(n,s,j)}finally{X.T=g}}else try{g=o(f,u),F_(n,s,g)}catch(j){mm(n,s,j)}}function F_(n,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(u){H_(n,s,u)},function(u){return mm(n,s,u)}):H_(n,s,o)}function H_(n,s,o){s.status="fulfilled",s.value=o,G_(s),n.state=o,s=n.pending,s!==null&&(o=s.next,o===s?n.pending=null:(o=o.next,s.next=o,q_(n,o)))}function mm(n,s,o){var u=n.pending;if(n.pending=null,u!==null){u=u.next;do s.status="rejected",s.reason=o,G_(s),s=s.next;while(s!==u)}n.action=null}function G_(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function K_(n,s){return s}function Q_(n,s){if(He){var o=st.formState;if(o!==null){e:{var u=Ve;if(He){if(gt){t:{for(var f=gt,g=fi;f.nodeType!==8;){if(!g){f=null;break t}if(f=Zn(f.nextSibling),f===null){f=null;break t}}g=f.data,f=g==="F!"||g==="F"?f:null}if(f){gt=Zn(f.nextSibling),u=f.data==="F!";break e}}Ys(u)}u=!1}u&&(s=o[0])}}return o=cn(),o.memoizedState=o.baseState=s,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:K_,lastRenderedState:s},o.queue=u,o=fv.bind(null,Ve,u),u.dispatch=o,u=dm(!1),g=vm.bind(null,Ve,!1,u.queue),u=cn(),f={state:s,dispatch:null,action:n,pending:null},u.queue=f,o=VI.bind(null,Ve,f,g,o),f.dispatch=o,u.memoizedState=n,[s,o,!1]}function Y_(n){var s=Rt();return $_(s,et,n)}function $_(n,s,o){if(s=hm(n,s,K_)[0],n=lh(qi)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var u=Xl(s)}catch(E){throw E===Hl?nh:E}else u=s;s=Rt();var f=s.queue,g=f.dispatch;return o!==s.memoizedState&&(Ve.flags|=2048,so(9,uh(),OI.bind(null,f,o),null)),[u,g,n]}function OI(n,s){n.action=s}function X_(n){var s=Rt(),o=et;if(o!==null)return $_(s,o,n);Rt(),s=s.memoizedState,o=Rt();var u=o.queue.dispatch;return o.memoizedState=n,[s,u,!1]}function so(n,s,o,u){return n={tag:n,create:o,deps:u,inst:s,next:null},s=Ve.updateQueue,s===null&&(s=um(),Ve.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=n.next=n:(u=o.next,o.next=n,n.next=u,s.lastEffect=n),n}function uh(){return{destroy:void 0,resource:void 0}}function J_(){return Rt().memoizedState}function ch(n,s,o,u){var f=cn();u=u===void 0?null:u,Ve.flags|=n,f.memoizedState=so(1|s,uh(),o,u)}function Jl(n,s,o,u){var f=Rt();u=u===void 0?null:u;var g=f.memoizedState.inst;et!==null&&u!==null&&rm(u,et.memoizedState.deps)?f.memoizedState=so(s,g,o,u):(Ve.flags|=n,f.memoizedState=so(1|s,g,o,u))}function W_(n,s){ch(8390656,8,n,s)}function Z_(n,s){Jl(2048,8,n,s)}function ev(n,s){return Jl(4,2,n,s)}function tv(n,s){return Jl(4,4,n,s)}function nv(n,s){if(typeof s=="function"){n=n();var o=s(n);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function iv(n,s,o){o=o!=null?o.concat([n]):null,Jl(4,4,nv.bind(null,s,n),o)}function gm(){}function rv(n,s){var o=Rt();s=s===void 0?null:s;var u=o.memoizedState;return s!==null&&rm(s,u[1])?u[0]:(o.memoizedState=[n,s],n)}function sv(n,s){var o=Rt();s=s===void 0?null:s;var u=o.memoizedState;if(s!==null&&rm(s,u[1]))return u[0];if(u=n(),Ws){Dn(!0);try{n()}finally{Dn(!1)}}return o.memoizedState=[u,s],u}function pm(n,s,o){return o===void 0||(Nr&1073741824)!==0?n.memoizedState=s:(n.memoizedState=o,n=lE(),Ve.lanes|=n,Ur|=n,o)}function av(n,s,o,u){return pn(o,s)?o:no.current!==null?(n=pm(n,o,u),pn(n,s)||(Bt=!0),n):(Nr&42)===0?(Bt=!0,n.memoizedState=o):(n=lE(),Ve.lanes|=n,Ur|=n,s)}function ov(n,s,o,u,f){var g=he.p;he.p=g!==0&&8>g?g:8;var E=X.T,S={};X.T=S,vm(n,!1,s,o);try{var C=f(),j=X.S;if(j!==null&&j(S,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var W=DI(C,u);Wl(n,s,W,Tn(n))}else Wl(n,s,u,Tn(n))}catch(ne){Wl(n,s,{then:function(){},status:"rejected",reason:ne},Tn())}finally{he.p=g,X.T=E}}function MI(){}function ym(n,s,o,u){if(n.tag!==5)throw Error(i(476));var f=lv(n).queue;ov(n,f,s,_e,o===null?MI:function(){return uv(n),o(u)})}function lv(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:_e,baseState:_e,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:_e},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:o},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function uv(n){var s=lv(n).next.queue;Wl(n,s,{},Tn())}function _m(){return Xt(pu)}function cv(){return Rt().memoizedState}function hv(){return Rt().memoizedState}function PI(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var o=Tn();n=Dr(o);var u=xr(s,n,o);u!==null&&(Sn(u,s,o),Kl(u,s,o)),s={cache:Yd()},n.payload=s;return}s=s.return}}function kI(n,s,o){var u=Tn();o={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},hh(n)?dv(s,o):(o=Ud(n,s,o,u),o!==null&&(Sn(o,n,u),mv(o,s,u)))}function fv(n,s,o){var u=Tn();Wl(n,s,o,u)}function Wl(n,s,o,u){var f={lane:u,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(hh(n))dv(s,f);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var E=s.lastRenderedState,S=g(E,o);if(f.hasEagerState=!0,f.eagerState=S,pn(S,E))return Yc(n,s,f,0),st===null&&Qc(),!1}catch{}finally{}if(o=Ud(n,s,f,u),o!==null)return Sn(o,n,u),mv(o,s,u),!0}return!1}function vm(n,s,o,u){if(u={lane:2,revertLane:Jm(),action:u,hasEagerState:!1,eagerState:null,next:null},hh(n)){if(s)throw Error(i(479))}else s=Ud(n,o,u,2),s!==null&&Sn(s,n,2)}function hh(n){var s=n.alternate;return n===Ve||s!==null&&s===Ve}function dv(n,s){io=sh=!0;var o=n.pending;o===null?s.next=s:(s.next=o.next,o.next=s),n.pending=s}function mv(n,s,o){if((o&4194048)!==0){var u=s.lanes;u&=n.pendingLanes,o|=u,s.lanes=o,pr(n,o)}}var fh={readContext:Xt,use:oh,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useLayoutEffect:St,useInsertionEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useSyncExternalStore:St,useId:St,useHostTransitionStatus:St,useFormState:St,useActionState:St,useOptimistic:St,useMemoCache:St,useCacheRefresh:St},gv={readContext:Xt,use:oh,useCallback:function(n,s){return cn().memoizedState=[n,s===void 0?null:s],n},useContext:Xt,useEffect:W_,useImperativeHandle:function(n,s,o){o=o!=null?o.concat([n]):null,ch(4194308,4,nv.bind(null,s,n),o)},useLayoutEffect:function(n,s){return ch(4194308,4,n,s)},useInsertionEffect:function(n,s){ch(4,2,n,s)},useMemo:function(n,s){var o=cn();s=s===void 0?null:s;var u=n();if(Ws){Dn(!0);try{n()}finally{Dn(!1)}}return o.memoizedState=[u,s],u},useReducer:function(n,s,o){var u=cn();if(o!==void 0){var f=o(s);if(Ws){Dn(!0);try{o(s)}finally{Dn(!1)}}}else f=s;return u.memoizedState=u.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},u.queue=n,n=n.dispatch=kI.bind(null,Ve,n),[u.memoizedState,n]},useRef:function(n){var s=cn();return n={current:n},s.memoizedState=n},useState:function(n){n=dm(n);var s=n.queue,o=fv.bind(null,Ve,s);return s.dispatch=o,[n.memoizedState,o]},useDebugValue:gm,useDeferredValue:function(n,s){var o=cn();return pm(o,n,s)},useTransition:function(){var n=dm(!1);return n=ov.bind(null,Ve,n.queue,!0,!1),cn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,o){var u=Ve,f=cn();if(He){if(o===void 0)throw Error(i(407));o=o()}else{if(o=s(),st===null)throw Error(i(349));(Be&124)!==0||k_(u,s,o)}f.memoizedState=o;var g={value:o,getSnapshot:s};return f.queue=g,W_(U_.bind(null,u,g,n),[n]),u.flags|=2048,so(9,uh(),L_.bind(null,u,g,o,s),null),o},useId:function(){var n=cn(),s=st.identifierPrefix;if(He){var o=Bi,u=Ui;o=(u&~(1<<32-nn(u)-1)).toString(32)+o,s=""+s+"R"+o,o=ah++,0<o&&(s+="H"+o.toString(32)),s+=""}else o=xI++,s=""+s+"r"+o.toString(32)+"";return n.memoizedState=s},useHostTransitionStatus:_m,useFormState:Q_,useActionState:Q_,useOptimistic:function(n){var s=cn();s.memoizedState=s.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=vm.bind(null,Ve,!0,o),o.dispatch=s,[n,s]},useMemoCache:cm,useCacheRefresh:function(){return cn().memoizedState=PI.bind(null,Ve)}},pv={readContext:Xt,use:oh,useCallback:rv,useContext:Xt,useEffect:Z_,useImperativeHandle:iv,useInsertionEffect:ev,useLayoutEffect:tv,useMemo:sv,useReducer:lh,useRef:J_,useState:function(){return lh(qi)},useDebugValue:gm,useDeferredValue:function(n,s){var o=Rt();return av(o,et.memoizedState,n,s)},useTransition:function(){var n=lh(qi)[0],s=Rt().memoizedState;return[typeof n=="boolean"?n:Xl(n),s]},useSyncExternalStore:P_,useId:cv,useHostTransitionStatus:_m,useFormState:Y_,useActionState:Y_,useOptimistic:function(n,s){var o=Rt();return j_(o,et,n,s)},useMemoCache:cm,useCacheRefresh:hv},LI={readContext:Xt,use:oh,useCallback:rv,useContext:Xt,useEffect:Z_,useImperativeHandle:iv,useInsertionEffect:ev,useLayoutEffect:tv,useMemo:sv,useReducer:fm,useRef:J_,useState:function(){return fm(qi)},useDebugValue:gm,useDeferredValue:function(n,s){var o=Rt();return et===null?pm(o,n,s):av(o,et.memoizedState,n,s)},useTransition:function(){var n=fm(qi)[0],s=Rt().memoizedState;return[typeof n=="boolean"?n:Xl(n),s]},useSyncExternalStore:P_,useId:cv,useHostTransitionStatus:_m,useFormState:X_,useActionState:X_,useOptimistic:function(n,s){var o=Rt();return et!==null?j_(o,et,n,s):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:cm,useCacheRefresh:hv},ao=null,Zl=0;function dh(n){var s=Zl;return Zl+=1,ao===null&&(ao=[]),R_(ao,n,s)}function eu(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function mh(n,s){throw s.$$typeof===T?Error(i(525)):(n=Object.prototype.toString.call(s),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function yv(n){var s=n._init;return s(n._payload)}function _v(n){function s(k,O){if(n){var U=k.deletions;U===null?(k.deletions=[O],k.flags|=16):U.push(O)}}function o(k,O){if(!n)return null;for(;O!==null;)s(k,O),O=O.sibling;return null}function u(k){for(var O=new Map;k!==null;)k.key!==null?O.set(k.key,k):O.set(k.index,k),k=k.sibling;return O}function f(k,O){return k=Li(k,O),k.index=0,k.sibling=null,k}function g(k,O,U){return k.index=U,n?(U=k.alternate,U!==null?(U=U.index,U<O?(k.flags|=67108866,O):U):(k.flags|=67108866,O)):(k.flags|=1048576,O)}function E(k){return n&&k.alternate===null&&(k.flags|=67108866),k}function S(k,O,U,ee){return O===null||O.tag!==6?(O=zd(U,k.mode,ee),O.return=k,O):(O=f(O,U),O.return=k,O)}function C(k,O,U,ee){var ge=U.type;return ge===q?W(k,O,U.props.children,ee,U.key):O!==null&&(O.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===w&&yv(ge)===O.type)?(O=f(O,U.props),eu(O,U),O.return=k,O):(O=Xc(U.type,U.key,U.props,null,k.mode,ee),eu(O,U),O.return=k,O)}function j(k,O,U,ee){return O===null||O.tag!==4||O.stateNode.containerInfo!==U.containerInfo||O.stateNode.implementation!==U.implementation?(O=jd(U,k.mode,ee),O.return=k,O):(O=f(O,U.children||[]),O.return=k,O)}function W(k,O,U,ee,ge){return O===null||O.tag!==7?(O=Hs(U,k.mode,ee,ge),O.return=k,O):(O=f(O,U),O.return=k,O)}function ne(k,O,U){if(typeof O=="string"&&O!==""||typeof O=="number"||typeof O=="bigint")return O=zd(""+O,k.mode,U),O.return=k,O;if(typeof O=="object"&&O!==null){switch(O.$$typeof){case b:return U=Xc(O.type,O.key,O.props,null,k.mode,U),eu(U,O),U.return=k,U;case N:return O=jd(O,k.mode,U),O.return=k,O;case w:var ee=O._init;return O=ee(O._payload),ne(k,O,U)}if(qe(O)||P(O))return O=Hs(O,k.mode,U,null),O.return=k,O;if(typeof O.then=="function")return ne(k,dh(O),U);if(O.$$typeof===$)return ne(k,eh(k,O),U);mh(k,O)}return null}function K(k,O,U,ee){var ge=O!==null?O.key:null;if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return ge!==null?null:S(k,O,""+U,ee);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case b:return U.key===ge?C(k,O,U,ee):null;case N:return U.key===ge?j(k,O,U,ee):null;case w:return ge=U._init,U=ge(U._payload),K(k,O,U,ee)}if(qe(U)||P(U))return ge!==null?null:W(k,O,U,ee,null);if(typeof U.then=="function")return K(k,O,dh(U),ee);if(U.$$typeof===$)return K(k,O,eh(k,U),ee);mh(k,U)}return null}function Q(k,O,U,ee,ge){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return k=k.get(U)||null,S(O,k,""+ee,ge);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case b:return k=k.get(ee.key===null?U:ee.key)||null,C(O,k,ee,ge);case N:return k=k.get(ee.key===null?U:ee.key)||null,j(O,k,ee,ge);case w:var Me=ee._init;return ee=Me(ee._payload),Q(k,O,U,ee,ge)}if(qe(ee)||P(ee))return k=k.get(U)||null,W(O,k,ee,ge,null);if(typeof ee.then=="function")return Q(k,O,U,dh(ee),ge);if(ee.$$typeof===$)return Q(k,O,U,eh(O,ee),ge);mh(O,ee)}return null}function we(k,O,U,ee){for(var ge=null,Me=null,Ee=O,be=O=0,jt=null;Ee!==null&&be<U.length;be++){Ee.index>be?(jt=Ee,Ee=null):jt=Ee.sibling;var Fe=K(k,Ee,U[be],ee);if(Fe===null){Ee===null&&(Ee=jt);break}n&&Ee&&Fe.alternate===null&&s(k,Ee),O=g(Fe,O,be),Me===null?ge=Fe:Me.sibling=Fe,Me=Fe,Ee=jt}if(be===U.length)return o(k,Ee),He&&Ks(k,be),ge;if(Ee===null){for(;be<U.length;be++)Ee=ne(k,U[be],ee),Ee!==null&&(O=g(Ee,O,be),Me===null?ge=Ee:Me.sibling=Ee,Me=Ee);return He&&Ks(k,be),ge}for(Ee=u(Ee);be<U.length;be++)jt=Q(Ee,k,be,U[be],ee),jt!==null&&(n&&jt.alternate!==null&&Ee.delete(jt.key===null?be:jt.key),O=g(jt,O,be),Me===null?ge=jt:Me.sibling=jt,Me=jt);return n&&Ee.forEach(function(Qr){return s(k,Qr)}),He&&Ks(k,be),ge}function Ae(k,O,U,ee){if(U==null)throw Error(i(151));for(var ge=null,Me=null,Ee=O,be=O=0,jt=null,Fe=U.next();Ee!==null&&!Fe.done;be++,Fe=U.next()){Ee.index>be?(jt=Ee,Ee=null):jt=Ee.sibling;var Qr=K(k,Ee,Fe.value,ee);if(Qr===null){Ee===null&&(Ee=jt);break}n&&Ee&&Qr.alternate===null&&s(k,Ee),O=g(Qr,O,be),Me===null?ge=Qr:Me.sibling=Qr,Me=Qr,Ee=jt}if(Fe.done)return o(k,Ee),He&&Ks(k,be),ge;if(Ee===null){for(;!Fe.done;be++,Fe=U.next())Fe=ne(k,Fe.value,ee),Fe!==null&&(O=g(Fe,O,be),Me===null?ge=Fe:Me.sibling=Fe,Me=Fe);return He&&Ks(k,be),ge}for(Ee=u(Ee);!Fe.done;be++,Fe=U.next())Fe=Q(Ee,k,be,Fe.value,ee),Fe!==null&&(n&&Fe.alternate!==null&&Ee.delete(Fe.key===null?be:Fe.key),O=g(Fe,O,be),Me===null?ge=Fe:Me.sibling=Fe,Me=Fe);return n&&Ee.forEach(function(U1){return s(k,U1)}),He&&Ks(k,be),ge}function nt(k,O,U,ee){if(typeof U=="object"&&U!==null&&U.type===q&&U.key===null&&(U=U.props.children),typeof U=="object"&&U!==null){switch(U.$$typeof){case b:e:{for(var ge=U.key;O!==null;){if(O.key===ge){if(ge=U.type,ge===q){if(O.tag===7){o(k,O.sibling),ee=f(O,U.props.children),ee.return=k,k=ee;break e}}else if(O.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===w&&yv(ge)===O.type){o(k,O.sibling),ee=f(O,U.props),eu(ee,U),ee.return=k,k=ee;break e}o(k,O);break}else s(k,O);O=O.sibling}U.type===q?(ee=Hs(U.props.children,k.mode,ee,U.key),ee.return=k,k=ee):(ee=Xc(U.type,U.key,U.props,null,k.mode,ee),eu(ee,U),ee.return=k,k=ee)}return E(k);case N:e:{for(ge=U.key;O!==null;){if(O.key===ge)if(O.tag===4&&O.stateNode.containerInfo===U.containerInfo&&O.stateNode.implementation===U.implementation){o(k,O.sibling),ee=f(O,U.children||[]),ee.return=k,k=ee;break e}else{o(k,O);break}else s(k,O);O=O.sibling}ee=jd(U,k.mode,ee),ee.return=k,k=ee}return E(k);case w:return ge=U._init,U=ge(U._payload),nt(k,O,U,ee)}if(qe(U))return we(k,O,U,ee);if(P(U)){if(ge=P(U),typeof ge!="function")throw Error(i(150));return U=ge.call(U),Ae(k,O,U,ee)}if(typeof U.then=="function")return nt(k,O,dh(U),ee);if(U.$$typeof===$)return nt(k,O,eh(k,U),ee);mh(k,U)}return typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint"?(U=""+U,O!==null&&O.tag===6?(o(k,O.sibling),ee=f(O,U),ee.return=k,k=ee):(o(k,O),ee=zd(U,k.mode,ee),ee.return=k,k=ee),E(k)):o(k,O)}return function(k,O,U,ee){try{Zl=0;var ge=nt(k,O,U,ee);return ao=null,ge}catch(Ee){if(Ee===Hl||Ee===nh)throw Ee;var Me=yn(29,Ee,null,k.mode);return Me.lanes=ee,Me.return=k,Me}finally{}}}var oo=_v(!0),vv=_v(!1),Un=te(null),di=null;function Vr(n){var s=n.alternate;le(Ot,Ot.current&1),le(Un,n),di===null&&(s===null||no.current!==null||s.memoizedState!==null)&&(di=n)}function Ev(n){if(n.tag===22){if(le(Ot,Ot.current),le(Un,n),di===null){var s=n.alternate;s!==null&&s.memoizedState!==null&&(di=n)}}else Or()}function Or(){le(Ot,Ot.current),le(Un,Un.current)}function Fi(n){ue(Un),di===n&&(di=null),ue(Ot)}var Ot=te(0);function gh(n){for(var s=n;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||ug(o)))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}function Em(n,s,o,u){s=n.memoizedState,o=o(u,s),o=o==null?s:_({},s,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Tm={enqueueSetState:function(n,s,o){n=n._reactInternals;var u=Tn(),f=Dr(u);f.payload=s,o!=null&&(f.callback=o),s=xr(n,f,u),s!==null&&(Sn(s,n,u),Kl(s,n,u))},enqueueReplaceState:function(n,s,o){n=n._reactInternals;var u=Tn(),f=Dr(u);f.tag=1,f.payload=s,o!=null&&(f.callback=o),s=xr(n,f,u),s!==null&&(Sn(s,n,u),Kl(s,n,u))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var o=Tn(),u=Dr(o);u.tag=2,s!=null&&(u.callback=s),s=xr(n,u,o),s!==null&&(Sn(s,n,o),Kl(s,n,o))}};function Tv(n,s,o,u,f,g,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(u,g,E):s.prototype&&s.prototype.isPureReactComponent?!kl(o,u)||!kl(f,g):!0}function Sv(n,s,o,u){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,u),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,u),s.state!==n&&Tm.enqueueReplaceState(s,s.state,null)}function Zs(n,s){var o=s;if("ref"in s){o={};for(var u in s)u!=="ref"&&(o[u]=s[u])}if(n=n.defaultProps){o===s&&(o=_({},o));for(var f in n)o[f]===void 0&&(o[f]=n[f])}return o}var ph=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)};function Av(n){ph(n)}function bv(n){console.error(n)}function wv(n){ph(n)}function yh(n,s){try{var o=n.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(u){setTimeout(function(){throw u})}}function Iv(n,s,o){try{var u=n.onCaughtError;u(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Sm(n,s,o){return o=Dr(o),o.tag=3,o.payload={element:null},o.callback=function(){yh(n,s)},o}function Rv(n){return n=Dr(n),n.tag=3,n}function Cv(n,s,o,u){var f=o.type.getDerivedStateFromError;if(typeof f=="function"){var g=u.value;n.payload=function(){return f(g)},n.callback=function(){Iv(s,o,u)}}var E=o.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(n.callback=function(){Iv(s,o,u),typeof f!="function"&&(Br===null?Br=new Set([this]):Br.add(this));var S=u.stack;this.componentDidCatch(u.value,{componentStack:S!==null?S:""})})}function UI(n,s,o,u,f){if(o.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){if(s=o.alternate,s!==null&&jl(s,o,f,!0),o=Un.current,o!==null){switch(o.tag){case 13:return di===null?Km():o.alternate===null&&pt===0&&(pt=3),o.flags&=-257,o.flags|=65536,o.lanes=f,u===Jd?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([u]):s.add(u),Ym(n,u,f)),!1;case 22:return o.flags|=65536,u===Jd?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([u])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([u]):o.add(u)),Ym(n,u,f)),!1}throw Error(i(435,o.tag))}return Ym(n,u,f),Km(),!1}if(He)return s=Un.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=f,u!==Hd&&(n=Error(i(422),{cause:u}),zl(Mn(n,o)))):(u!==Hd&&(s=Error(i(423),{cause:u}),zl(Mn(s,o))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,u=Mn(u,o),f=Sm(n.stateNode,u,f),em(n,f),pt!==4&&(pt=2)),!1;var g=Error(i(520),{cause:u});if(g=Mn(g,o),ou===null?ou=[g]:ou.push(g),pt!==4&&(pt=2),s===null)return!0;u=Mn(u,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,n=f&-f,o.lanes|=n,n=Sm(o.stateNode,u,n),em(o,n),!1;case 1:if(s=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Br===null||!Br.has(g))))return o.flags|=65536,f&=-f,o.lanes|=f,f=Rv(f),Cv(f,n,o,u),em(o,f),!1}o=o.return}while(o!==null);return!1}var Dv=Error(i(461)),Bt=!1;function Ht(n,s,o,u){s.child=n===null?vv(s,null,o,u):oo(s,n.child,o,u)}function xv(n,s,o,u,f){o=o.render;var g=s.ref;if("ref"in u){var E={};for(var S in u)S!=="ref"&&(E[S]=u[S])}else E=u;return Xs(s),u=sm(n,s,o,E,g,f),S=am(),n!==null&&!Bt?(om(n,s,f),Hi(n,s,f)):(He&&S&&qd(s),s.flags|=1,Ht(n,s,u,f),s.child)}function Nv(n,s,o,u,f){if(n===null){var g=o.type;return typeof g=="function"&&!Bd(g)&&g.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=g,Vv(n,s,g,u,f)):(n=Xc(o.type,null,u,s,s.mode,f),n.ref=s.ref,n.return=s,s.child=n)}if(g=n.child,!xm(n,f)){var E=g.memoizedProps;if(o=o.compare,o=o!==null?o:kl,o(E,u)&&n.ref===s.ref)return Hi(n,s,f)}return s.flags|=1,n=Li(g,u),n.ref=s.ref,n.return=s,s.child=n}function Vv(n,s,o,u,f){if(n!==null){var g=n.memoizedProps;if(kl(g,u)&&n.ref===s.ref)if(Bt=!1,s.pendingProps=u=g,xm(n,f))(n.flags&131072)!==0&&(Bt=!0);else return s.lanes=n.lanes,Hi(n,s,f)}return Am(n,s,o,u,f)}function Ov(n,s,o){var u=s.pendingProps,f=u.children,g=n!==null?n.memoizedState:null;if(u.mode==="hidden"){if((s.flags&128)!==0){if(u=g!==null?g.baseLanes|o:o,n!==null){for(f=s.child=n.child,g=0;f!==null;)g=g|f.lanes|f.childLanes,f=f.sibling;s.childLanes=g&~u}else s.childLanes=0,s.child=null;return Mv(n,s,u,o)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&th(s,g!==null?g.cachePool:null),g!==null?V_(s,g):nm(),Ev(s);else return s.lanes=s.childLanes=536870912,Mv(n,s,g!==null?g.baseLanes|o:o,o)}else g!==null?(th(s,g.cachePool),V_(s,g),Or(),s.memoizedState=null):(n!==null&&th(s,null),nm(),Or());return Ht(n,s,f,o),s.child}function Mv(n,s,o,u){var f=Xd();return f=f===null?null:{parent:Vt._currentValue,pool:f},s.memoizedState={baseLanes:o,cachePool:f},n!==null&&th(s,null),nm(),Ev(s),n!==null&&jl(n,s,u,!0),null}function _h(n,s){var o=s.ref;if(o===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(i(284));(n===null||n.ref!==o)&&(s.flags|=4194816)}}function Am(n,s,o,u,f){return Xs(s),o=sm(n,s,o,u,void 0,f),u=am(),n!==null&&!Bt?(om(n,s,f),Hi(n,s,f)):(He&&u&&qd(s),s.flags|=1,Ht(n,s,o,f),s.child)}function Pv(n,s,o,u,f,g){return Xs(s),s.updateQueue=null,o=M_(s,u,o,f),O_(n),u=am(),n!==null&&!Bt?(om(n,s,g),Hi(n,s,g)):(He&&u&&qd(s),s.flags|=1,Ht(n,s,o,g),s.child)}function kv(n,s,o,u,f){if(Xs(s),s.stateNode===null){var g=Ja,E=o.contextType;typeof E=="object"&&E!==null&&(g=Xt(E)),g=new o(u,g),s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Tm,s.stateNode=g,g._reactInternals=s,g=s.stateNode,g.props=u,g.state=s.memoizedState,g.refs={},Wd(s),E=o.contextType,g.context=typeof E=="object"&&E!==null?Xt(E):Ja,g.state=s.memoizedState,E=o.getDerivedStateFromProps,typeof E=="function"&&(Em(s,o,E,u),g.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(E=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),E!==g.state&&Tm.enqueueReplaceState(g,g.state,null),Yl(s,u,g,f),Ql(),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308),u=!0}else if(n===null){g=s.stateNode;var S=s.memoizedProps,C=Zs(o,S);g.props=C;var j=g.context,W=o.contextType;E=Ja,typeof W=="object"&&W!==null&&(E=Xt(W));var ne=o.getDerivedStateFromProps;W=typeof ne=="function"||typeof g.getSnapshotBeforeUpdate=="function",S=s.pendingProps!==S,W||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(S||j!==E)&&Sv(s,g,u,E),Cr=!1;var K=s.memoizedState;g.state=K,Yl(s,u,g,f),Ql(),j=s.memoizedState,S||K!==j||Cr?(typeof ne=="function"&&(Em(s,o,ne,u),j=s.memoizedState),(C=Cr||Tv(s,o,C,u,K,j,E))?(W||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(s.flags|=4194308)):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=u,s.memoizedState=j),g.props=u,g.state=j,g.context=E,u=C):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),u=!1)}else{g=s.stateNode,Zd(n,s),E=s.memoizedProps,W=Zs(o,E),g.props=W,ne=s.pendingProps,K=g.context,j=o.contextType,C=Ja,typeof j=="object"&&j!==null&&(C=Xt(j)),S=o.getDerivedStateFromProps,(j=typeof S=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(E!==ne||K!==C)&&Sv(s,g,u,C),Cr=!1,K=s.memoizedState,g.state=K,Yl(s,u,g,f),Ql();var Q=s.memoizedState;E!==ne||K!==Q||Cr||n!==null&&n.dependencies!==null&&Zc(n.dependencies)?(typeof S=="function"&&(Em(s,o,S,u),Q=s.memoizedState),(W=Cr||Tv(s,o,W,u,K,Q,C)||n!==null&&n.dependencies!==null&&Zc(n.dependencies))?(j||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(u,Q,C),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(u,Q,C)),typeof g.componentDidUpdate=="function"&&(s.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof g.componentDidUpdate!="function"||E===n.memoizedProps&&K===n.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&K===n.memoizedState||(s.flags|=1024),s.memoizedProps=u,s.memoizedState=Q),g.props=u,g.state=Q,g.context=C,u=W):(typeof g.componentDidUpdate!="function"||E===n.memoizedProps&&K===n.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&K===n.memoizedState||(s.flags|=1024),u=!1)}return g=u,_h(n,s),u=(s.flags&128)!==0,g||u?(g=s.stateNode,o=u&&typeof o.getDerivedStateFromError!="function"?null:g.render(),s.flags|=1,n!==null&&u?(s.child=oo(s,n.child,null,f),s.child=oo(s,null,o,f)):Ht(n,s,o,f),s.memoizedState=g.state,n=s.child):n=Hi(n,s,f),n}function Lv(n,s,o,u){return Bl(),s.flags|=256,Ht(n,s,o,u),s.child}var bm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function wm(n){return{baseLanes:n,cachePool:b_()}}function Im(n,s,o){return n=n!==null?n.childLanes&~o:0,s&&(n|=Bn),n}function Uv(n,s,o){var u=s.pendingProps,f=!1,g=(s.flags&128)!==0,E;if((E=g)||(E=n!==null&&n.memoizedState===null?!1:(Ot.current&2)!==0),E&&(f=!0,s.flags&=-129),E=(s.flags&32)!==0,s.flags&=-33,n===null){if(He){if(f?Vr(s):Or(),He){var S=gt,C;if(C=S){e:{for(C=S,S=fi;C.nodeType!==8;){if(!S){S=null;break e}if(C=Zn(C.nextSibling),C===null){S=null;break e}}S=C}S!==null?(s.memoizedState={dehydrated:S,treeContext:Gs!==null?{id:Ui,overflow:Bi}:null,retryLane:536870912,hydrationErrors:null},C=yn(18,null,null,0),C.stateNode=S,C.return=s,s.child=C,on=s,gt=null,C=!0):C=!1}C||Ys(s)}if(S=s.memoizedState,S!==null&&(S=S.dehydrated,S!==null))return ug(S)?s.lanes=32:s.lanes=536870912,null;Fi(s)}return S=u.children,u=u.fallback,f?(Or(),f=s.mode,S=vh({mode:"hidden",children:S},f),u=Hs(u,f,o,null),S.return=s,u.return=s,S.sibling=u,s.child=S,f=s.child,f.memoizedState=wm(o),f.childLanes=Im(n,E,o),s.memoizedState=bm,u):(Vr(s),Rm(s,S))}if(C=n.memoizedState,C!==null&&(S=C.dehydrated,S!==null)){if(g)s.flags&256?(Vr(s),s.flags&=-257,s=Cm(n,s,o)):s.memoizedState!==null?(Or(),s.child=n.child,s.flags|=128,s=null):(Or(),f=u.fallback,S=s.mode,u=vh({mode:"visible",children:u.children},S),f=Hs(f,S,o,null),f.flags|=2,u.return=s,f.return=s,u.sibling=f,s.child=u,oo(s,n.child,null,o),u=s.child,u.memoizedState=wm(o),u.childLanes=Im(n,E,o),s.memoizedState=bm,s=f);else if(Vr(s),ug(S)){if(E=S.nextSibling&&S.nextSibling.dataset,E)var j=E.dgst;E=j,u=Error(i(419)),u.stack="",u.digest=E,zl({value:u,source:null,stack:null}),s=Cm(n,s,o)}else if(Bt||jl(n,s,o,!1),E=(o&n.childLanes)!==0,Bt||E){if(E=st,E!==null&&(u=o&-o,u=(u&42)!==0?1:vl(u),u=(u&(E.suspendedLanes|o))!==0?0:u,u!==0&&u!==C.retryLane))throw C.retryLane=u,Xa(n,u),Sn(E,n,u),Dv;S.data==="$?"||Km(),s=Cm(n,s,o)}else S.data==="$?"?(s.flags|=192,s.child=n.child,s=null):(n=C.treeContext,gt=Zn(S.nextSibling),on=s,He=!0,Qs=null,fi=!1,n!==null&&(kn[Ln++]=Ui,kn[Ln++]=Bi,kn[Ln++]=Gs,Ui=n.id,Bi=n.overflow,Gs=s),s=Rm(s,u.children),s.flags|=4096);return s}return f?(Or(),f=u.fallback,S=s.mode,C=n.child,j=C.sibling,u=Li(C,{mode:"hidden",children:u.children}),u.subtreeFlags=C.subtreeFlags&65011712,j!==null?f=Li(j,f):(f=Hs(f,S,o,null),f.flags|=2),f.return=s,u.return=s,u.sibling=f,s.child=u,u=f,f=s.child,S=n.child.memoizedState,S===null?S=wm(o):(C=S.cachePool,C!==null?(j=Vt._currentValue,C=C.parent!==j?{parent:j,pool:j}:C):C=b_(),S={baseLanes:S.baseLanes|o,cachePool:C}),f.memoizedState=S,f.childLanes=Im(n,E,o),s.memoizedState=bm,u):(Vr(s),o=n.child,n=o.sibling,o=Li(o,{mode:"visible",children:u.children}),o.return=s,o.sibling=null,n!==null&&(E=s.deletions,E===null?(s.deletions=[n],s.flags|=16):E.push(n)),s.child=o,s.memoizedState=null,o)}function Rm(n,s){return s=vh({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function vh(n,s){return n=yn(22,n,null,s),n.lanes=0,n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},n}function Cm(n,s,o){return oo(s,n.child,null,o),n=Rm(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function Bv(n,s,o){n.lanes|=s;var u=n.alternate;u!==null&&(u.lanes|=s),Kd(n.return,s,o)}function Dm(n,s,o,u,f){var g=n.memoizedState;g===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:u,tail:o,tailMode:f}:(g.isBackwards=s,g.rendering=null,g.renderingStartTime=0,g.last=u,g.tail=o,g.tailMode=f)}function zv(n,s,o){var u=s.pendingProps,f=u.revealOrder,g=u.tail;if(Ht(n,s,u.children,o),u=Ot.current,(u&2)!==0)u=u&1|2,s.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Bv(n,o,s);else if(n.tag===19)Bv(n,o,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}u&=1}switch(le(Ot,u),f){case"forwards":for(o=s.child,f=null;o!==null;)n=o.alternate,n!==null&&gh(n)===null&&(f=o),o=o.sibling;o=f,o===null?(f=s.child,s.child=null):(f=o.sibling,o.sibling=null),Dm(s,!1,f,o,g);break;case"backwards":for(o=null,f=s.child,s.child=null;f!==null;){if(n=f.alternate,n!==null&&gh(n)===null){s.child=f;break}n=f.sibling,f.sibling=o,o=f,f=n}Dm(s,!0,o,null,g);break;case"together":Dm(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function Hi(n,s,o){if(n!==null&&(s.dependencies=n.dependencies),Ur|=s.lanes,(o&s.childLanes)===0)if(n!==null){if(jl(n,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(i(153));if(s.child!==null){for(n=s.child,o=Li(n,n.pendingProps),s.child=o,o.return=s;n.sibling!==null;)n=n.sibling,o=o.sibling=Li(n,n.pendingProps),o.return=s;o.sibling=null}return s.child}function xm(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&Zc(n)))}function BI(n,s,o){switch(s.tag){case 3:We(s,s.stateNode.containerInfo),Rr(s,Vt,n.memoizedState.cache),Bl();break;case 27:case 5:gl(s);break;case 4:We(s,s.stateNode.containerInfo);break;case 10:Rr(s,s.type,s.memoizedProps.value);break;case 13:var u=s.memoizedState;if(u!==null)return u.dehydrated!==null?(Vr(s),s.flags|=128,null):(o&s.child.childLanes)!==0?Uv(n,s,o):(Vr(s),n=Hi(n,s,o),n!==null?n.sibling:null);Vr(s);break;case 19:var f=(n.flags&128)!==0;if(u=(o&s.childLanes)!==0,u||(jl(n,s,o,!1),u=(o&s.childLanes)!==0),f){if(u)return zv(n,s,o);s.flags|=128}if(f=s.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),le(Ot,Ot.current),u)break;return null;case 22:case 23:return s.lanes=0,Ov(n,s,o);case 24:Rr(s,Vt,n.memoizedState.cache)}return Hi(n,s,o)}function jv(n,s,o){if(n!==null)if(n.memoizedProps!==s.pendingProps)Bt=!0;else{if(!xm(n,o)&&(s.flags&128)===0)return Bt=!1,BI(n,s,o);Bt=(n.flags&131072)!==0}else Bt=!1,He&&(s.flags&1048576)!==0&&y_(s,Wc,s.index);switch(s.lanes=0,s.tag){case 16:e:{n=s.pendingProps;var u=s.elementType,f=u._init;if(u=f(u._payload),s.type=u,typeof u=="function")Bd(u)?(n=Zs(u,n),s.tag=1,s=kv(null,s,u,n,o)):(s.tag=0,s=Am(null,s,u,n,o));else{if(u!=null){if(f=u.$$typeof,f===fe){s.tag=11,s=xv(null,s,u,n,o);break e}else if(f===D){s.tag=14,s=Nv(null,s,u,n,o);break e}}throw s=je(u)||u,Error(i(306,s,""))}}return s;case 0:return Am(n,s,s.type,s.pendingProps,o);case 1:return u=s.type,f=Zs(u,s.pendingProps),kv(n,s,u,f,o);case 3:e:{if(We(s,s.stateNode.containerInfo),n===null)throw Error(i(387));u=s.pendingProps;var g=s.memoizedState;f=g.element,Zd(n,s),Yl(s,u,null,o);var E=s.memoizedState;if(u=E.cache,Rr(s,Vt,u),u!==g.cache&&Qd(s,[Vt],o,!0),Ql(),u=E.element,g.isDehydrated)if(g={element:u,isDehydrated:!1,cache:E.cache},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){s=Lv(n,s,u,o);break e}else if(u!==f){f=Mn(Error(i(424)),s),zl(f),s=Lv(n,s,u,o);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(gt=Zn(n.firstChild),on=s,He=!0,Qs=null,fi=!0,o=vv(s,null,u,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Bl(),u===f){s=Hi(n,s,o);break e}Ht(n,s,u,o)}s=s.child}return s;case 26:return _h(n,s),n===null?(o=GE(s.type,null,s.pendingProps,null))?s.memoizedState=o:He||(o=s.type,n=s.pendingProps,u=Oh(Se.current).createElement(o),u[vt]=s,u[Ft]=n,Kt(u,o,n),Et(u),s.stateNode=u):s.memoizedState=GE(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return gl(s),n===null&&He&&(u=s.stateNode=qE(s.type,s.pendingProps,Se.current),on=s,fi=!0,f=gt,qr(s.type)?(cg=f,gt=Zn(u.firstChild)):gt=f),Ht(n,s,s.pendingProps.children,o),_h(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&He&&((f=u=gt)&&(u=d1(u,s.type,s.pendingProps,fi),u!==null?(s.stateNode=u,on=s,gt=Zn(u.firstChild),fi=!1,f=!0):f=!1),f||Ys(s)),gl(s),f=s.type,g=s.pendingProps,E=n!==null?n.memoizedProps:null,u=g.children,ag(f,g)?u=null:E!==null&&ag(f,E)&&(s.flags|=32),s.memoizedState!==null&&(f=sm(n,s,NI,null,null,o),pu._currentValue=f),_h(n,s),Ht(n,s,u,o),s.child;case 6:return n===null&&He&&((n=o=gt)&&(o=m1(o,s.pendingProps,fi),o!==null?(s.stateNode=o,on=s,gt=null,n=!0):n=!1),n||Ys(s)),null;case 13:return Uv(n,s,o);case 4:return We(s,s.stateNode.containerInfo),u=s.pendingProps,n===null?s.child=oo(s,null,u,o):Ht(n,s,u,o),s.child;case 11:return xv(n,s,s.type,s.pendingProps,o);case 7:return Ht(n,s,s.pendingProps,o),s.child;case 8:return Ht(n,s,s.pendingProps.children,o),s.child;case 12:return Ht(n,s,s.pendingProps.children,o),s.child;case 10:return u=s.pendingProps,Rr(s,s.type,u.value),Ht(n,s,u.children,o),s.child;case 9:return f=s.type._context,u=s.pendingProps.children,Xs(s),f=Xt(f),u=u(f),s.flags|=1,Ht(n,s,u,o),s.child;case 14:return Nv(n,s,s.type,s.pendingProps,o);case 15:return Vv(n,s,s.type,s.pendingProps,o);case 19:return zv(n,s,o);case 31:return u=s.pendingProps,o=s.mode,u={mode:u.mode,children:u.children},n===null?(o=vh(u,o),o.ref=s.ref,s.child=o,o.return=s,s=o):(o=Li(n.child,u),o.ref=s.ref,s.child=o,o.return=s,s=o),s;case 22:return Ov(n,s,o);case 24:return Xs(s),u=Xt(Vt),n===null?(f=Xd(),f===null&&(f=st,g=Yd(),f.pooledCache=g,g.refCount++,g!==null&&(f.pooledCacheLanes|=o),f=g),s.memoizedState={parent:u,cache:f},Wd(s),Rr(s,Vt,f)):((n.lanes&o)!==0&&(Zd(n,s),Yl(s,null,null,o),Ql()),f=n.memoizedState,g=s.memoizedState,f.parent!==u?(f={parent:u,cache:u},s.memoizedState=f,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=f),Rr(s,Vt,u)):(u=g.cache,Rr(s,Vt,u),u!==f.cache&&Qd(s,[Vt],o,!0))),Ht(n,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function Gi(n){n.flags|=4}function qv(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!XE(s)){if(s=Un.current,s!==null&&((Be&4194048)===Be?di!==null:(Be&62914560)!==Be&&(Be&536870912)===0||s!==di))throw Gl=Jd,w_;n.flags|=8192}}function Eh(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?mr():536870912,n.lanes|=s,ho|=s)}function tu(n,s){if(!He)switch(n.tailMode){case"hidden":s=n.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:u.sibling=null}}function ft(n){var s=n.alternate!==null&&n.alternate.child===n.child,o=0,u=0;if(s)for(var f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags&65011712,u|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)o|=f.lanes|f.childLanes,u|=f.subtreeFlags,u|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=u,n.childLanes=o,s}function zI(n,s,o){var u=s.pendingProps;switch(Fd(s),s.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(s),null;case 1:return ft(s),null;case 3:return o=s.stateNode,u=null,n!==null&&(u=n.memoizedState.cache),s.memoizedState.cache!==u&&(s.flags|=2048),ji(Vt),Fn(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(Ul(s)?Gi(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,E_())),ft(s),null;case 26:return o=s.memoizedState,n===null?(Gi(s),o!==null?(ft(s),qv(s,o)):(ft(s),s.flags&=-16777217)):o?o!==n.memoizedState?(Gi(s),ft(s),qv(s,o)):(ft(s),s.flags&=-16777217):(n.memoizedProps!==u&&Gi(s),ft(s),s.flags&=-16777217),null;case 27:xa(s),o=Se.current;var f=s.type;if(n!==null&&s.stateNode!=null)n.memoizedProps!==u&&Gi(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return ft(s),null}n=ye.current,Ul(s)?__(s):(n=qE(f,u,o),s.stateNode=n,Gi(s))}return ft(s),null;case 5:if(xa(s),o=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==u&&Gi(s);else{if(!u){if(s.stateNode===null)throw Error(i(166));return ft(s),null}if(n=ye.current,Ul(s))__(s);else{switch(f=Oh(Se.current),n){case 1:n=f.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:n=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":n=f.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":n=f.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":n=f.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild);break;case"select":n=typeof u.is=="string"?f.createElement("select",{is:u.is}):f.createElement("select"),u.multiple?n.multiple=!0:u.size&&(n.size=u.size);break;default:n=typeof u.is=="string"?f.createElement(o,{is:u.is}):f.createElement(o)}}n[vt]=s,n[Ft]=u;e:for(f=s.child;f!==null;){if(f.tag===5||f.tag===6)n.appendChild(f.stateNode);else if(f.tag!==4&&f.tag!==27&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break e;for(;f.sibling===null;){if(f.return===null||f.return===s)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}s.stateNode=n;e:switch(Kt(n,o,u),o){case"button":case"input":case"select":case"textarea":n=!!u.autoFocus;break e;case"img":n=!0;break e;default:n=!1}n&&Gi(s)}}return ft(s),s.flags&=-16777217,null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==u&&Gi(s);else{if(typeof u!="string"&&s.stateNode===null)throw Error(i(166));if(n=Se.current,Ul(s)){if(n=s.stateNode,o=s.memoizedProps,u=null,f=on,f!==null)switch(f.tag){case 27:case 5:u=f.memoizedProps}n[vt]=s,n=!!(n.nodeValue===o||u!==null&&u.suppressHydrationWarning===!0||PE(n.nodeValue,o)),n||Ys(s)}else n=Oh(n).createTextNode(u),n[vt]=s,s.stateNode=n}return ft(s),null;case 13:if(u=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=Ul(s),u!==null&&u.dehydrated!==null){if(n===null){if(!f)throw Error(i(318));if(f=s.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[vt]=s}else Bl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;ft(s),f=!1}else f=E_(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return s.flags&256?(Fi(s),s):(Fi(s),null)}if(Fi(s),(s.flags&128)!==0)return s.lanes=o,s;if(o=u!==null,n=n!==null&&n.memoizedState!==null,o){u=s.child,f=null,u.alternate!==null&&u.alternate.memoizedState!==null&&u.alternate.memoizedState.cachePool!==null&&(f=u.alternate.memoizedState.cachePool.pool);var g=null;u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),g!==f&&(u.flags|=2048)}return o!==n&&o&&(s.child.flags|=8192),Eh(s,s.updateQueue),ft(s),null;case 4:return Fn(),n===null&&tg(s.stateNode.containerInfo),ft(s),null;case 10:return ji(s.type),ft(s),null;case 19:if(ue(Ot),f=s.memoizedState,f===null)return ft(s),null;if(u=(s.flags&128)!==0,g=f.rendering,g===null)if(u)tu(f,!1);else{if(pt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(g=gh(n),g!==null){for(s.flags|=128,tu(f,!1),n=g.updateQueue,s.updateQueue=n,Eh(s,n),s.subtreeFlags=0,n=o,o=s.child;o!==null;)p_(o,n),o=o.sibling;return le(Ot,Ot.current&1|2),s.child}n=n.sibling}f.tail!==null&&un()>Ah&&(s.flags|=128,u=!0,tu(f,!1),s.lanes=4194304)}else{if(!u)if(n=gh(g),n!==null){if(s.flags|=128,u=!0,n=n.updateQueue,s.updateQueue=n,Eh(s,n),tu(f,!0),f.tail===null&&f.tailMode==="hidden"&&!g.alternate&&!He)return ft(s),null}else 2*un()-f.renderingStartTime>Ah&&o!==536870912&&(s.flags|=128,u=!0,tu(f,!1),s.lanes=4194304);f.isBackwards?(g.sibling=s.child,s.child=g):(n=f.last,n!==null?n.sibling=g:s.child=g,f.last=g)}return f.tail!==null?(s=f.tail,f.rendering=s,f.tail=s.sibling,f.renderingStartTime=un(),s.sibling=null,n=Ot.current,le(Ot,u?n&1|2:n&1),s):(ft(s),null);case 22:case 23:return Fi(s),im(),u=s.memoizedState!==null,n!==null?n.memoizedState!==null!==u&&(s.flags|=8192):u&&(s.flags|=8192),u?(o&536870912)!==0&&(s.flags&128)===0&&(ft(s),s.subtreeFlags&6&&(s.flags|=8192)):ft(s),o=s.updateQueue,o!==null&&Eh(s,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),u=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),u!==o&&(s.flags|=2048),n!==null&&ue(Js),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),ji(Vt),ft(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function jI(n,s){switch(Fd(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return ji(Vt),Fn(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return xa(s),null;case 13:if(Fi(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(i(340));Bl()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return ue(Ot),null;case 4:return Fn(),null;case 10:return ji(s.type),null;case 22:case 23:return Fi(s),im(),n!==null&&ue(Js),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return ji(Vt),null;case 25:return null;default:return null}}function Fv(n,s){switch(Fd(s),s.tag){case 3:ji(Vt),Fn();break;case 26:case 27:case 5:xa(s);break;case 4:Fn();break;case 13:Fi(s);break;case 19:ue(Ot);break;case 10:ji(s.type);break;case 22:case 23:Fi(s),im(),n!==null&&ue(Js);break;case 24:ji(Vt)}}function nu(n,s){try{var o=s.updateQueue,u=o!==null?o.lastEffect:null;if(u!==null){var f=u.next;o=f;do{if((o.tag&n)===n){u=void 0;var g=o.create,E=o.inst;u=g(),E.destroy=u}o=o.next}while(o!==f)}}catch(S){it(s,s.return,S)}}function Mr(n,s,o){try{var u=s.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var g=f.next;u=g;do{if((u.tag&n)===n){var E=u.inst,S=E.destroy;if(S!==void 0){E.destroy=void 0,f=s;var C=o,j=S;try{j()}catch(W){it(f,C,W)}}}u=u.next}while(u!==g)}}catch(W){it(s,s.return,W)}}function Hv(n){var s=n.updateQueue;if(s!==null){var o=n.stateNode;try{N_(s,o)}catch(u){it(n,n.return,u)}}}function Gv(n,s,o){o.props=Zs(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(u){it(n,s,u)}}function iu(n,s){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var u=n.stateNode;break;case 30:u=n.stateNode;break;default:u=n.stateNode}typeof o=="function"?n.refCleanup=o(u):o.current=u}}catch(f){it(n,s,f)}}function mi(n,s){var o=n.ref,u=n.refCleanup;if(o!==null)if(typeof u=="function")try{u()}catch(f){it(n,s,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(f){it(n,s,f)}else o.current=null}function Kv(n){var s=n.type,o=n.memoizedProps,u=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&u.focus();break e;case"img":o.src?u.src=o.src:o.srcSet&&(u.srcset=o.srcSet)}}catch(f){it(n,n.return,f)}}function Nm(n,s,o){try{var u=n.stateNode;l1(u,n.type,o,s),u[Ft]=s}catch(f){it(n,n.return,f)}}function Qv(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&qr(n.type)||n.tag===4}function Vm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Qv(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&qr(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Om(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(n),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Vh));else if(u!==4&&(u===27&&qr(n.type)&&(o=n.stateNode,s=null),n=n.child,n!==null))for(Om(n,s,o),n=n.sibling;n!==null;)Om(n,s,o),n=n.sibling}function Th(n,s,o){var u=n.tag;if(u===5||u===6)n=n.stateNode,s?o.insertBefore(n,s):o.appendChild(n);else if(u!==4&&(u===27&&qr(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Th(n,s,o),n=n.sibling;n!==null;)Th(n,s,o),n=n.sibling}function Yv(n){var s=n.stateNode,o=n.memoizedProps;try{for(var u=n.type,f=s.attributes;f.length;)s.removeAttributeNode(f[0]);Kt(s,u,o),s[vt]=n,s[Ft]=o}catch(g){it(n,n.return,g)}}var Ki=!1,At=!1,Mm=!1,$v=typeof WeakSet=="function"?WeakSet:Set,zt=null;function qI(n,s){if(n=n.containerInfo,rg=Bh,n=a_(n),Vd(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var u=o.getSelection&&o.getSelection();if(u&&u.rangeCount!==0){o=u.anchorNode;var f=u.anchorOffset,g=u.focusNode;u=u.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break e}var E=0,S=-1,C=-1,j=0,W=0,ne=n,K=null;t:for(;;){for(var Q;ne!==o||f!==0&&ne.nodeType!==3||(S=E+f),ne!==g||u!==0&&ne.nodeType!==3||(C=E+u),ne.nodeType===3&&(E+=ne.nodeValue.length),(Q=ne.firstChild)!==null;)K=ne,ne=Q;for(;;){if(ne===n)break t;if(K===o&&++j===f&&(S=E),K===g&&++W===u&&(C=E),(Q=ne.nextSibling)!==null)break;ne=K,K=ne.parentNode}ne=Q}o=S===-1||C===-1?null:{start:S,end:C}}else o=null}o=o||{start:0,end:0}}else o=null;for(sg={focusedElem:n,selectionRange:o},Bh=!1,zt=s;zt!==null;)if(s=zt,n=s.child,(s.subtreeFlags&1024)!==0&&n!==null)n.return=s,zt=n;else for(;zt!==null;){switch(s=zt,g=s.alternate,n=s.flags,s.tag){case 0:break;case 11:case 15:break;case 1:if((n&1024)!==0&&g!==null){n=void 0,o=s,f=g.memoizedProps,g=g.memoizedState,u=o.stateNode;try{var we=Zs(o.type,f,o.elementType===o.type);n=u.getSnapshotBeforeUpdate(we,g),u.__reactInternalSnapshotBeforeUpdate=n}catch(Ae){it(o,o.return,Ae)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,o=n.nodeType,o===9)lg(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":lg(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=s.sibling,n!==null){n.return=s.return,zt=n;break}zt=s.return}}function Xv(n,s,o){var u=o.flags;switch(o.tag){case 0:case 11:case 15:Pr(n,o),u&4&&nu(5,o);break;case 1:if(Pr(n,o),u&4)if(n=o.stateNode,s===null)try{n.componentDidMount()}catch(E){it(o,o.return,E)}else{var f=Zs(o.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(f,s,n.__reactInternalSnapshotBeforeUpdate)}catch(E){it(o,o.return,E)}}u&64&&Hv(o),u&512&&iu(o,o.return);break;case 3:if(Pr(n,o),u&64&&(n=o.updateQueue,n!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{N_(n,s)}catch(E){it(o,o.return,E)}}break;case 27:s===null&&u&4&&Yv(o);case 26:case 5:Pr(n,o),s===null&&u&4&&Kv(o),u&512&&iu(o,o.return);break;case 12:Pr(n,o);break;case 13:Pr(n,o),u&4&&Zv(n,o),u&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=JI.bind(null,o),g1(n,o))));break;case 22:if(u=o.memoizedState!==null||Ki,!u){s=s!==null&&s.memoizedState!==null||At,f=Ki;var g=At;Ki=u,(At=s)&&!g?kr(n,o,(o.subtreeFlags&8772)!==0):Pr(n,o),Ki=f,At=g}break;case 30:break;default:Pr(n,o)}}function Jv(n){var s=n.alternate;s!==null&&(n.alternate=null,Jv(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&Pa(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var ut=null,hn=!1;function Qi(n,s,o){for(o=o.child;o!==null;)Wv(n,s,o),o=o.sibling}function Wv(n,s,o){if(Yt&&typeof Yt.onCommitFiberUnmount=="function")try{Yt.onCommitFiberUnmount(hr,o)}catch{}switch(o.tag){case 26:At||mi(o,s),Qi(n,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:At||mi(o,s);var u=ut,f=hn;qr(o.type)&&(ut=o.stateNode,hn=!1),Qi(n,s,o),fu(o.stateNode),ut=u,hn=f;break;case 5:At||mi(o,s);case 6:if(u=ut,f=hn,ut=null,Qi(n,s,o),ut=u,hn=f,ut!==null)if(hn)try{(ut.nodeType===9?ut.body:ut.nodeName==="HTML"?ut.ownerDocument.body:ut).removeChild(o.stateNode)}catch(g){it(o,s,g)}else try{ut.removeChild(o.stateNode)}catch(g){it(o,s,g)}break;case 18:ut!==null&&(hn?(n=ut,zE(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),Eu(n)):zE(ut,o.stateNode));break;case 4:u=ut,f=hn,ut=o.stateNode.containerInfo,hn=!0,Qi(n,s,o),ut=u,hn=f;break;case 0:case 11:case 14:case 15:At||Mr(2,o,s),At||Mr(4,o,s),Qi(n,s,o);break;case 1:At||(mi(o,s),u=o.stateNode,typeof u.componentWillUnmount=="function"&&Gv(o,s,u)),Qi(n,s,o);break;case 21:Qi(n,s,o);break;case 22:At=(u=At)||o.memoizedState!==null,Qi(n,s,o),At=u;break;default:Qi(n,s,o)}}function Zv(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{Eu(n)}catch(o){it(s,s.return,o)}}function FI(n){switch(n.tag){case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new $v),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new $v),s;default:throw Error(i(435,n.tag))}}function Pm(n,s){var o=FI(n);s.forEach(function(u){var f=WI.bind(null,n,u);o.has(u)||(o.add(u),u.then(f,f))})}function _n(n,s){var o=s.deletions;if(o!==null)for(var u=0;u<o.length;u++){var f=o[u],g=n,E=s,S=E;e:for(;S!==null;){switch(S.tag){case 27:if(qr(S.type)){ut=S.stateNode,hn=!1;break e}break;case 5:ut=S.stateNode,hn=!1;break e;case 3:case 4:ut=S.stateNode.containerInfo,hn=!0;break e}S=S.return}if(ut===null)throw Error(i(160));Wv(g,E,f),ut=null,hn=!1,g=f.alternate,g!==null&&(g.return=null),f.return=null}if(s.subtreeFlags&13878)for(s=s.child;s!==null;)eE(s,n),s=s.sibling}var Wn=null;function eE(n,s){var o=n.alternate,u=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:_n(s,n),vn(n),u&4&&(Mr(3,n,n.return),nu(3,n),Mr(5,n,n.return));break;case 1:_n(s,n),vn(n),u&512&&(At||o===null||mi(o,o.return)),u&64&&Ki&&(n=n.updateQueue,n!==null&&(u=n.callbacks,u!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?u:o.concat(u))));break;case 26:var f=Wn;if(_n(s,n),vn(n),u&512&&(At||o===null||mi(o,o.return)),u&4){var g=o!==null?o.memoizedState:null;if(u=n.memoizedState,o===null)if(u===null)if(n.stateNode===null){e:{u=n.type,o=n.memoizedProps,f=f.ownerDocument||f;t:switch(u){case"title":g=f.getElementsByTagName("title")[0],(!g||g[yr]||g[vt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=f.createElement(u),f.head.insertBefore(g,f.querySelector("head > title"))),Kt(g,u,o),g[vt]=n,Et(g),u=g;break e;case"link":var E=YE("link","href",f).get(u+(o.href||""));if(E){for(var S=0;S<E.length;S++)if(g=E[S],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){E.splice(S,1);break t}}g=f.createElement(u),Kt(g,u,o),f.head.appendChild(g);break;case"meta":if(E=YE("meta","content",f).get(u+(o.content||""))){for(S=0;S<E.length;S++)if(g=E[S],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){E.splice(S,1);break t}}g=f.createElement(u),Kt(g,u,o),f.head.appendChild(g);break;default:throw Error(i(468,u))}g[vt]=n,Et(g),u=g}n.stateNode=u}else $E(f,n.type,n.stateNode);else n.stateNode=QE(f,u,n.memoizedProps);else g!==u?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,u===null?$E(f,n.type,n.stateNode):QE(f,u,n.memoizedProps)):u===null&&n.stateNode!==null&&Nm(n,n.memoizedProps,o.memoizedProps)}break;case 27:_n(s,n),vn(n),u&512&&(At||o===null||mi(o,o.return)),o!==null&&u&4&&Nm(n,n.memoizedProps,o.memoizedProps);break;case 5:if(_n(s,n),vn(n),u&512&&(At||o===null||mi(o,o.return)),n.flags&32){f=n.stateNode;try{Vn(f,"")}catch(Q){it(n,n.return,Q)}}u&4&&n.stateNode!=null&&(f=n.memoizedProps,Nm(n,f,o!==null?o.memoizedProps:f)),u&1024&&(Mm=!0);break;case 6:if(_n(s,n),vn(n),u&4){if(n.stateNode===null)throw Error(i(162));u=n.memoizedProps,o=n.stateNode;try{o.nodeValue=u}catch(Q){it(n,n.return,Q)}}break;case 3:if(kh=null,f=Wn,Wn=Mh(s.containerInfo),_n(s,n),Wn=f,vn(n),u&4&&o!==null&&o.memoizedState.isDehydrated)try{Eu(s.containerInfo)}catch(Q){it(n,n.return,Q)}Mm&&(Mm=!1,tE(n));break;case 4:u=Wn,Wn=Mh(n.stateNode.containerInfo),_n(s,n),vn(n),Wn=u;break;case 12:_n(s,n),vn(n);break;case 13:_n(s,n),vn(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(jm=un()),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Pm(n,u)));break;case 22:f=n.memoizedState!==null;var C=o!==null&&o.memoizedState!==null,j=Ki,W=At;if(Ki=j||f,At=W||C,_n(s,n),At=W,Ki=j,vn(n),u&8192)e:for(s=n.stateNode,s._visibility=f?s._visibility&-2:s._visibility|1,f&&(o===null||C||Ki||At||ea(n)),o=null,s=n;;){if(s.tag===5||s.tag===26){if(o===null){C=o=s;try{if(g=C.stateNode,f)E=g.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{S=C.stateNode;var ne=C.memoizedProps.style,K=ne!=null&&ne.hasOwnProperty("display")?ne.display:null;S.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(Q){it(C,C.return,Q)}}}else if(s.tag===6){if(o===null){C=s;try{C.stateNode.nodeValue=f?"":C.memoizedProps}catch(Q){it(C,C.return,Q)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}u&4&&(u=n.updateQueue,u!==null&&(o=u.retryQueue,o!==null&&(u.retryQueue=null,Pm(n,o))));break;case 19:_n(s,n),vn(n),u&4&&(u=n.updateQueue,u!==null&&(n.updateQueue=null,Pm(n,u)));break;case 30:break;case 21:break;default:_n(s,n),vn(n)}}function vn(n){var s=n.flags;if(s&2){try{for(var o,u=n.return;u!==null;){if(Qv(u)){o=u;break}u=u.return}if(o==null)throw Error(i(160));switch(o.tag){case 27:var f=o.stateNode,g=Vm(n);Th(n,g,f);break;case 5:var E=o.stateNode;o.flags&32&&(Vn(E,""),o.flags&=-33);var S=Vm(n);Th(n,S,E);break;case 3:case 4:var C=o.stateNode.containerInfo,j=Vm(n);Om(n,j,C);break;default:throw Error(i(161))}}catch(W){it(n,n.return,W)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function tE(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;tE(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function Pr(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Xv(n,s.alternate,s),s=s.sibling}function ea(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:Mr(4,s,s.return),ea(s);break;case 1:mi(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&Gv(s,s.return,o),ea(s);break;case 27:fu(s.stateNode);case 26:case 5:mi(s,s.return),ea(s);break;case 22:s.memoizedState===null&&ea(s);break;case 30:ea(s);break;default:ea(s)}n=n.sibling}}function kr(n,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var u=s.alternate,f=n,g=s,E=g.flags;switch(g.tag){case 0:case 11:case 15:kr(f,g,o),nu(4,g);break;case 1:if(kr(f,g,o),u=g,f=u.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(j){it(u,u.return,j)}if(u=g,f=u.updateQueue,f!==null){var S=u.stateNode;try{var C=f.shared.hiddenCallbacks;if(C!==null)for(f.shared.hiddenCallbacks=null,f=0;f<C.length;f++)x_(C[f],S)}catch(j){it(u,u.return,j)}}o&&E&64&&Hv(g),iu(g,g.return);break;case 27:Yv(g);case 26:case 5:kr(f,g,o),o&&u===null&&E&4&&Kv(g),iu(g,g.return);break;case 12:kr(f,g,o);break;case 13:kr(f,g,o),o&&E&4&&Zv(f,g);break;case 22:g.memoizedState===null&&kr(f,g,o),iu(g,g.return);break;case 30:break;default:kr(f,g,o)}s=s.sibling}}function km(n,s){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&ql(o))}function Lm(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&ql(n))}function gi(n,s,o,u){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)nE(n,s,o,u),s=s.sibling}function nE(n,s,o,u){var f=s.flags;switch(s.tag){case 0:case 11:case 15:gi(n,s,o,u),f&2048&&nu(9,s);break;case 1:gi(n,s,o,u);break;case 3:gi(n,s,o,u),f&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&ql(n)));break;case 12:if(f&2048){gi(n,s,o,u),n=s.stateNode;try{var g=s.memoizedProps,E=g.id,S=g.onPostCommit;typeof S=="function"&&S(E,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(C){it(s,s.return,C)}}else gi(n,s,o,u);break;case 13:gi(n,s,o,u);break;case 23:break;case 22:g=s.stateNode,E=s.alternate,s.memoizedState!==null?g._visibility&2?gi(n,s,o,u):ru(n,s):g._visibility&2?gi(n,s,o,u):(g._visibility|=2,lo(n,s,o,u,(s.subtreeFlags&10256)!==0)),f&2048&&km(E,s);break;case 24:gi(n,s,o,u),f&2048&&Lm(s.alternate,s);break;default:gi(n,s,o,u)}}function lo(n,s,o,u,f){for(f=f&&(s.subtreeFlags&10256)!==0,s=s.child;s!==null;){var g=n,E=s,S=o,C=u,j=E.flags;switch(E.tag){case 0:case 11:case 15:lo(g,E,S,C,f),nu(8,E);break;case 23:break;case 22:var W=E.stateNode;E.memoizedState!==null?W._visibility&2?lo(g,E,S,C,f):ru(g,E):(W._visibility|=2,lo(g,E,S,C,f)),f&&j&2048&&km(E.alternate,E);break;case 24:lo(g,E,S,C,f),f&&j&2048&&Lm(E.alternate,E);break;default:lo(g,E,S,C,f)}s=s.sibling}}function ru(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=n,u=s,f=u.flags;switch(u.tag){case 22:ru(o,u),f&2048&&km(u.alternate,u);break;case 24:ru(o,u),f&2048&&Lm(u.alternate,u);break;default:ru(o,u)}s=s.sibling}}var su=8192;function uo(n){if(n.subtreeFlags&su)for(n=n.child;n!==null;)iE(n),n=n.sibling}function iE(n){switch(n.tag){case 26:uo(n),n.flags&su&&n.memoizedState!==null&&C1(Wn,n.memoizedState,n.memoizedProps);break;case 5:uo(n);break;case 3:case 4:var s=Wn;Wn=Mh(n.stateNode.containerInfo),uo(n),Wn=s;break;case 22:n.memoizedState===null&&(s=n.alternate,s!==null&&s.memoizedState!==null?(s=su,su=16777216,uo(n),su=s):uo(n));break;default:uo(n)}}function rE(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function au(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];zt=u,aE(u,n)}rE(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)sE(n),n=n.sibling}function sE(n){switch(n.tag){case 0:case 11:case 15:au(n),n.flags&2048&&Mr(9,n,n.return);break;case 3:au(n);break;case 12:au(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,Sh(n)):au(n);break;default:au(n)}}function Sh(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var u=s[o];zt=u,aE(u,n)}rE(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:Mr(8,s,s.return),Sh(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,Sh(s));break;default:Sh(s)}n=n.sibling}}function aE(n,s){for(;zt!==null;){var o=zt;switch(o.tag){case 0:case 11:case 15:Mr(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var u=o.memoizedState.cachePool.pool;u!=null&&u.refCount++}break;case 24:ql(o.memoizedState.cache)}if(u=o.child,u!==null)u.return=o,zt=u;else e:for(o=n;zt!==null;){u=zt;var f=u.sibling,g=u.return;if(Jv(u),u===o){zt=null;break e}if(f!==null){f.return=g,zt=f;break e}zt=g}}}var HI={getCacheForType:function(n){var s=Xt(Vt),o=s.data.get(n);return o===void 0&&(o=n(),s.data.set(n,o)),o}},GI=typeof WeakMap=="function"?WeakMap:Map,Qe=0,st=null,Pe=null,Be=0,Ye=0,En=null,Lr=!1,co=!1,Um=!1,Yi=0,pt=0,Ur=0,ta=0,Bm=0,Bn=0,ho=0,ou=null,fn=null,zm=!1,jm=0,Ah=1/0,bh=null,Br=null,Gt=0,zr=null,fo=null,mo=0,qm=0,Fm=null,oE=null,lu=0,Hm=null;function Tn(){if((Qe&2)!==0&&Be!==0)return Be&-Be;if(X.T!==null){var n=eo;return n!==0?n:Jm()}return xi()}function lE(){Bn===0&&(Bn=(Be&536870912)===0||He?_l():536870912);var n=Un.current;return n!==null&&(n.flags|=32),Bn}function Sn(n,s,o){(n===st&&(Ye===2||Ye===9)||n.cancelPendingCommit!==null)&&(go(n,0),jr(n,Be,Bn,!1)),_t(n,o),((Qe&2)===0||n!==st)&&(n===st&&((Qe&2)===0&&(ta|=o),pt===4&&jr(n,Be,Bn,!1)),pi(n))}function uE(n,s,o){if((Qe&6)!==0)throw Error(i(327));var u=!o&&(s&124)===0&&(s&n.expiredLanes)===0||dr(n,s),f=u?YI(n,s):Qm(n,s,!0),g=u;do{if(f===0){co&&!u&&jr(n,s,0,!1);break}else{if(o=n.current.alternate,g&&!KI(o)){f=Qm(n,s,!1),g=!1;continue}if(f===2){if(g=s,n.errorRecoveryDisabledLanes&g)var E=0;else E=n.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){s=E;e:{var S=n;f=ou;var C=S.current.memoizedState.isDehydrated;if(C&&(go(S,E).flags|=256),E=Qm(S,E,!1),E!==2){if(Um&&!C){S.errorRecoveryDisabledLanes|=g,ta|=g,f=4;break e}g=fn,fn=f,g!==null&&(fn===null?fn=g:fn.push.apply(fn,g))}f=E}if(g=!1,f!==2)continue}}if(f===1){go(n,0),jr(n,s,0,!0);break}e:{switch(u=n,g=f,g){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:jr(u,s,Bn,!Lr);break e;case 2:fn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(f=jm+300-un(),10<f)){if(jr(u,s,Bn,!Lr),xn(u,0,!0)!==0)break e;u.timeoutHandle=UE(cE.bind(null,u,o,fn,bh,zm,s,Bn,ta,ho,Lr,g,2,-0,0),f);break e}cE(u,o,fn,bh,zm,s,Bn,ta,ho,Lr,g,0,-0,0)}}break}while(!0);pi(n)}function cE(n,s,o,u,f,g,E,S,C,j,W,ne,K,Q){if(n.timeoutHandle=-1,ne=s.subtreeFlags,(ne&8192||(ne&16785408)===16785408)&&(gu={stylesheets:null,count:0,unsuspend:R1},iE(s),ne=D1(),ne!==null)){n.cancelPendingCommit=ne(yE.bind(null,n,s,g,o,u,f,E,S,C,W,1,K,Q)),jr(n,g,E,!j);return}yE(n,s,g,o,u,f,E,S,C)}function KI(n){for(var s=n;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var u=0;u<o.length;u++){var f=o[u],g=f.getSnapshot;f=f.value;try{if(!pn(g(),f))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function jr(n,s,o,u){s&=~Bm,s&=~ta,n.suspendedLanes|=s,n.pingedLanes&=~s,u&&(n.warmLanes|=s),u=n.expirationTimes;for(var f=s;0<f;){var g=31-nn(f),E=1<<g;u[g]=-1,f&=~E}o!==0&&gr(n,o,s)}function wh(){return(Qe&6)===0?(uu(0),!1):!0}function Gm(){if(Pe!==null){if(Ye===0)var n=Pe.return;else n=Pe,zi=$s=null,lm(n),ao=null,Zl=0,n=Pe;for(;n!==null;)Fv(n.alternate,n),n=n.return;Pe=null}}function go(n,s){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,c1(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),Gm(),st=n,Pe=o=Li(n.current,null),Be=s,Ye=0,En=null,Lr=!1,co=dr(n,s),Um=!1,ho=Bn=Bm=ta=Ur=pt=0,fn=ou=null,zm=!1,(s&8)!==0&&(s|=s&32);var u=n.entangledLanes;if(u!==0)for(n=n.entanglements,u&=s;0<u;){var f=31-nn(u),g=1<<f;s|=n[f],u&=~g}return Yi=s,Qc(),o}function hE(n,s){Ve=null,X.H=fh,s===Hl||s===nh?(s=C_(),Ye=3):s===w_?(s=C_(),Ye=4):Ye=s===Dv?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,En=s,Pe===null&&(pt=1,yh(n,Mn(s,n.current)))}function fE(){var n=X.H;return X.H=fh,n===null?fh:n}function dE(){var n=X.A;return X.A=HI,n}function Km(){pt=4,Lr||(Be&4194048)!==Be&&Un.current!==null||(co=!0),(Ur&134217727)===0&&(ta&134217727)===0||st===null||jr(st,Be,Bn,!1)}function Qm(n,s,o){var u=Qe;Qe|=2;var f=fE(),g=dE();(st!==n||Be!==s)&&(bh=null,go(n,s)),s=!1;var E=pt;e:do try{if(Ye!==0&&Pe!==null){var S=Pe,C=En;switch(Ye){case 8:Gm(),E=6;break e;case 3:case 2:case 9:case 6:Un.current===null&&(s=!0);var j=Ye;if(Ye=0,En=null,po(n,S,C,j),o&&co){E=0;break e}break;default:j=Ye,Ye=0,En=null,po(n,S,C,j)}}QI(),E=pt;break}catch(W){hE(n,W)}while(!0);return s&&n.shellSuspendCounter++,zi=$s=null,Qe=u,X.H=f,X.A=g,Pe===null&&(st=null,Be=0,Qc()),E}function QI(){for(;Pe!==null;)mE(Pe)}function YI(n,s){var o=Qe;Qe|=2;var u=fE(),f=dE();st!==n||Be!==s?(bh=null,Ah=un()+500,go(n,s)):co=dr(n,s);e:do try{if(Ye!==0&&Pe!==null){s=Pe;var g=En;t:switch(Ye){case 1:Ye=0,En=null,po(n,s,g,1);break;case 2:case 9:if(I_(g)){Ye=0,En=null,gE(s);break}s=function(){Ye!==2&&Ye!==9||st!==n||(Ye=7),pi(n)},g.then(s,s);break e;case 3:Ye=7;break e;case 4:Ye=5;break e;case 7:I_(g)?(Ye=0,En=null,gE(s)):(Ye=0,En=null,po(n,s,g,7));break;case 5:var E=null;switch(Pe.tag){case 26:E=Pe.memoizedState;case 5:case 27:var S=Pe;if(!E||XE(E)){Ye=0,En=null;var C=S.sibling;if(C!==null)Pe=C;else{var j=S.return;j!==null?(Pe=j,Ih(j)):Pe=null}break t}}Ye=0,En=null,po(n,s,g,5);break;case 6:Ye=0,En=null,po(n,s,g,6);break;case 8:Gm(),pt=6;break e;default:throw Error(i(462))}}$I();break}catch(W){hE(n,W)}while(!0);return zi=$s=null,X.H=u,X.A=f,Qe=o,Pe!==null?0:(st=null,Be=0,Qc(),pt)}function $I(){for(;Pe!==null&&!Td();)mE(Pe)}function mE(n){var s=jv(n.alternate,n,Yi);n.memoizedProps=n.pendingProps,s===null?Ih(n):Pe=s}function gE(n){var s=n,o=s.alternate;switch(s.tag){case 15:case 0:s=Pv(o,s,s.pendingProps,s.type,void 0,Be);break;case 11:s=Pv(o,s,s.pendingProps,s.type.render,s.ref,Be);break;case 5:lm(s);default:Fv(o,s),s=Pe=p_(s,Yi),s=jv(o,s,Yi)}n.memoizedProps=n.pendingProps,s===null?Ih(n):Pe=s}function po(n,s,o,u){zi=$s=null,lm(s),ao=null,Zl=0;var f=s.return;try{if(UI(n,f,s,o,Be)){pt=1,yh(n,Mn(o,n.current)),Pe=null;return}}catch(g){if(f!==null)throw Pe=f,g;pt=1,yh(n,Mn(o,n.current)),Pe=null;return}s.flags&32768?(He||u===1?n=!0:co||(Be&536870912)!==0?n=!1:(Lr=n=!0,(u===2||u===9||u===3||u===6)&&(u=Un.current,u!==null&&u.tag===13&&(u.flags|=16384))),pE(s,n)):Ih(s)}function Ih(n){var s=n;do{if((s.flags&32768)!==0){pE(s,Lr);return}n=s.return;var o=zI(s.alternate,s,Yi);if(o!==null){Pe=o;return}if(s=s.sibling,s!==null){Pe=s;return}Pe=s=n}while(s!==null);pt===0&&(pt=5)}function pE(n,s){do{var o=jI(n.alternate,n);if(o!==null){o.flags&=32767,Pe=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(n=n.sibling,n!==null)){Pe=n;return}Pe=n=o}while(n!==null);pt=6,Pe=null}function yE(n,s,o,u,f,g,E,S,C){n.cancelPendingCommit=null;do Rh();while(Gt!==0);if((Qe&6)!==0)throw Error(i(327));if(s!==null){if(s===n.current)throw Error(i(177));if(g=s.lanes|s.childLanes,g|=Ld,xc(n,o,g,E,S,C),n===st&&(Pe=st=null,Be=0),fo=s,zr=n,mo=o,qm=g,Fm=f,oE=u,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,ZI(Di,function(){return SE(),null})):(n.callbackNode=null,n.callbackPriority=0),u=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||u){u=X.T,X.T=null,f=he.p,he.p=2,E=Qe,Qe|=4;try{qI(n,s,o)}finally{Qe=E,he.p=f,X.T=u}}Gt=1,_E(),vE(),EE()}}function _E(){if(Gt===1){Gt=0;var n=zr,s=fo,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=X.T,X.T=null;var u=he.p;he.p=2;var f=Qe;Qe|=4;try{eE(s,n);var g=sg,E=a_(n.containerInfo),S=g.focusedElem,C=g.selectionRange;if(E!==S&&S&&S.ownerDocument&&s_(S.ownerDocument.documentElement,S)){if(C!==null&&Vd(S)){var j=C.start,W=C.end;if(W===void 0&&(W=j),"selectionStart"in S)S.selectionStart=j,S.selectionEnd=Math.min(W,S.value.length);else{var ne=S.ownerDocument||document,K=ne&&ne.defaultView||window;if(K.getSelection){var Q=K.getSelection(),we=S.textContent.length,Ae=Math.min(C.start,we),nt=C.end===void 0?Ae:Math.min(C.end,we);!Q.extend&&Ae>nt&&(E=nt,nt=Ae,Ae=E);var k=r_(S,Ae),O=r_(S,nt);if(k&&O&&(Q.rangeCount!==1||Q.anchorNode!==k.node||Q.anchorOffset!==k.offset||Q.focusNode!==O.node||Q.focusOffset!==O.offset)){var U=ne.createRange();U.setStart(k.node,k.offset),Q.removeAllRanges(),Ae>nt?(Q.addRange(U),Q.extend(O.node,O.offset)):(U.setEnd(O.node,O.offset),Q.addRange(U))}}}}for(ne=[],Q=S;Q=Q.parentNode;)Q.nodeType===1&&ne.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<ne.length;S++){var ee=ne[S];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}Bh=!!rg,sg=rg=null}finally{Qe=f,he.p=u,X.T=o}}n.current=s,Gt=2}}function vE(){if(Gt===2){Gt=0;var n=zr,s=fo,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=X.T,X.T=null;var u=he.p;he.p=2;var f=Qe;Qe|=4;try{Xv(n,s.alternate,s)}finally{Qe=f,he.p=u,X.T=o}}Gt=3}}function EE(){if(Gt===4||Gt===3){Gt=0,pl();var n=zr,s=fo,o=mo,u=oE;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Gt=5:(Gt=0,fo=zr=null,TE(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Br=null),El(o),s=s.stateNode,Yt&&typeof Yt.onCommitFiberRoot=="function")try{Yt.onCommitFiberRoot(hr,s,void 0,(s.current.flags&128)===128)}catch{}if(u!==null){s=X.T,f=he.p,he.p=2,X.T=null;try{for(var g=n.onRecoverableError,E=0;E<u.length;E++){var S=u[E];g(S.value,{componentStack:S.stack})}}finally{X.T=s,he.p=f}}(mo&3)!==0&&Rh(),pi(n),f=n.pendingLanes,(o&4194090)!==0&&(f&42)!==0?n===Hm?lu++:(lu=0,Hm=n):lu=0,uu(0)}}function TE(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,ql(s)))}function Rh(n){return _E(),vE(),EE(),SE()}function SE(){if(Gt!==5)return!1;var n=zr,s=qm;qm=0;var o=El(mo),u=X.T,f=he.p;try{he.p=32>o?32:o,X.T=null,o=Fm,Fm=null;var g=zr,E=mo;if(Gt=0,fo=zr=null,mo=0,(Qe&6)!==0)throw Error(i(331));var S=Qe;if(Qe|=4,sE(g.current),nE(g,g.current,E,o),Qe=S,uu(0,!1),Yt&&typeof Yt.onPostCommitFiberRoot=="function")try{Yt.onPostCommitFiberRoot(hr,g)}catch{}return!0}finally{he.p=f,X.T=u,TE(n,s)}}function AE(n,s,o){s=Mn(o,s),s=Sm(n.stateNode,s,2),n=xr(n,s,2),n!==null&&(_t(n,2),pi(n))}function it(n,s,o){if(n.tag===3)AE(n,n,o);else for(;s!==null;){if(s.tag===3){AE(s,n,o);break}else if(s.tag===1){var u=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Br===null||!Br.has(u))){n=Mn(o,n),o=Rv(2),u=xr(s,o,2),u!==null&&(Cv(o,u,s,n),_t(u,2),pi(u));break}}s=s.return}}function Ym(n,s,o){var u=n.pingCache;if(u===null){u=n.pingCache=new GI;var f=new Set;u.set(s,f)}else f=u.get(s),f===void 0&&(f=new Set,u.set(s,f));f.has(o)||(Um=!0,f.add(o),n=XI.bind(null,n,s,o),s.then(n,n))}function XI(n,s,o){var u=n.pingCache;u!==null&&u.delete(s),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,st===n&&(Be&o)===o&&(pt===4||pt===3&&(Be&62914560)===Be&&300>un()-jm?(Qe&2)===0&&go(n,0):Bm|=o,ho===Be&&(ho=0)),pi(n)}function bE(n,s){s===0&&(s=mr()),n=Xa(n,s),n!==null&&(_t(n,s),pi(n))}function JI(n){var s=n.memoizedState,o=0;s!==null&&(o=s.retryLane),bE(n,o)}function WI(n,s){var o=0;switch(n.tag){case 13:var u=n.stateNode,f=n.memoizedState;f!==null&&(o=f.retryLane);break;case 19:u=n.stateNode;break;case 22:u=n.stateNode._retryCache;break;default:throw Error(i(314))}u!==null&&u.delete(s),bE(n,o)}function ZI(n,s){return Es(n,s)}var Ch=null,yo=null,$m=!1,Dh=!1,Xm=!1,na=0;function pi(n){n!==yo&&n.next===null&&(yo===null?Ch=yo=n:yo=yo.next=n),Dh=!0,$m||($m=!0,t1())}function uu(n,s){if(!Xm&&Dh){Xm=!0;do for(var o=!1,u=Ch;u!==null;){if(n!==0){var f=u.pendingLanes;if(f===0)var g=0;else{var E=u.suspendedLanes,S=u.pingedLanes;g=(1<<31-nn(42|n)+1)-1,g&=f&~(E&~S),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,CE(u,g))}else g=Be,g=xn(u,u===st?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),(g&3)===0||dr(u,g)||(o=!0,CE(u,g));u=u.next}while(o);Xm=!1}}function e1(){wE()}function wE(){Dh=$m=!1;var n=0;na!==0&&(u1()&&(n=na),na=0);for(var s=un(),o=null,u=Ch;u!==null;){var f=u.next,g=IE(u,s);g===0?(u.next=null,o===null?Ch=f:o.next=f,f===null&&(yo=o)):(o=u,(n!==0||(g&3)!==0)&&(Dh=!0)),u=f}uu(n)}function IE(n,s){for(var o=n.suspendedLanes,u=n.pingedLanes,f=n.expirationTimes,g=n.pendingLanes&-62914561;0<g;){var E=31-nn(g),S=1<<E,C=f[E];C===-1?((S&o)===0||(S&u)!==0)&&(f[E]=Oa(S,s)):C<=s&&(n.expiredLanes|=S),g&=~S}if(s=st,o=Be,o=xn(n,n===s?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u=n.callbackNode,o===0||n===s&&(Ye===2||Ye===9)||n.cancelPendingCommit!==null)return u!==null&&u!==null&&Va(u),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||dr(n,o)){if(s=o&-o,s===n.callbackPriority)return s;switch(u!==null&&Va(u),El(o)){case 2:case 8:o=Lt;break;case 32:o=Di;break;case 268435456:o=yl;break;default:o=Di}return u=RE.bind(null,n),o=Es(o,u),n.callbackPriority=s,n.callbackNode=o,s}return u!==null&&u!==null&&Va(u),n.callbackPriority=2,n.callbackNode=null,2}function RE(n,s){if(Gt!==0&&Gt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Rh()&&n.callbackNode!==o)return null;var u=Be;return u=xn(n,n===st?u:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),u===0?null:(uE(n,u,s),IE(n,un()),n.callbackNode!=null&&n.callbackNode===o?RE.bind(null,n):null)}function CE(n,s){if(Rh())return null;uE(n,s,!0)}function t1(){h1(function(){(Qe&6)!==0?Es(xt,e1):wE()})}function Jm(){return na===0&&(na=_l()),na}function DE(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:Qn(""+n)}function xE(n,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,n.id&&o.setAttribute("form",n.id),s.parentNode.insertBefore(o,s),n=new FormData(n),o.parentNode.removeChild(o),n}function n1(n,s,o,u,f){if(s==="submit"&&o&&o.stateNode===f){var g=DE((f[Ft]||null).action),E=u.submitter;E&&(s=(s=E[Ft]||null)?DE(s.formAction):E.getAttribute("formAction"),s!==null&&(g=s,E=null));var S=new Ps("action","action",null,u,f);n.push({event:S,listeners:[{instance:null,listener:function(){if(u.defaultPrevented){if(na!==0){var C=E?xE(f,E):new FormData(f);ym(o,{pending:!0,data:C,method:f.method,action:g},null,C)}}else typeof g=="function"&&(S.preventDefault(),C=E?xE(f,E):new FormData(f),ym(o,{pending:!0,data:C,method:f.method,action:g},g,C))},currentTarget:f}]})}}for(var Wm=0;Wm<kd.length;Wm++){var Zm=kd[Wm],i1=Zm.toLowerCase(),r1=Zm[0].toUpperCase()+Zm.slice(1);Jn(i1,"on"+r1)}Jn(u_,"onAnimationEnd"),Jn(c_,"onAnimationIteration"),Jn(h_,"onAnimationStart"),Jn("dblclick","onDoubleClick"),Jn("focusin","onFocus"),Jn("focusout","onBlur"),Jn(TI,"onTransitionRun"),Jn(SI,"onTransitionStart"),Jn(AI,"onTransitionCancel"),Jn(f_,"onTransitionEnd"),li("onMouseEnter",["mouseout","mouseover"]),li("onMouseLeave",["mouseout","mouseover"]),li("onPointerEnter",["pointerout","pointerover"]),li("onPointerLeave",["pointerout","pointerover"]),oi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),oi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),oi("onBeforeInput",["compositionend","keypress","textInput","paste"]),oi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),oi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),oi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),s1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(cu));function NE(n,s){s=(s&4)!==0;for(var o=0;o<n.length;o++){var u=n[o],f=u.event;u=u.listeners;e:{var g=void 0;if(s)for(var E=u.length-1;0<=E;E--){var S=u[E],C=S.instance,j=S.currentTarget;if(S=S.listener,C!==g&&f.isPropagationStopped())break e;g=S,f.currentTarget=j;try{g(f)}catch(W){ph(W)}f.currentTarget=null,g=C}else for(E=0;E<u.length;E++){if(S=u[E],C=S.instance,j=S.currentTarget,S=S.listener,C!==g&&f.isPropagationStopped())break e;g=S,f.currentTarget=j;try{g(f)}catch(W){ph(W)}f.currentTarget=null,g=C}}}}function ke(n,s){var o=s[Ss];o===void 0&&(o=s[Ss]=new Set);var u=n+"__bubble";o.has(u)||(VE(s,n,2,!1),o.add(u))}function eg(n,s,o){var u=0;s&&(u|=4),VE(o,n,u,s)}var xh="_reactListening"+Math.random().toString(36).slice(2);function tg(n){if(!n[xh]){n[xh]=!0,Nc.forEach(function(o){o!=="selectionchange"&&(s1.has(o)||eg(o,!1,n),eg(o,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[xh]||(s[xh]=!0,eg("selectionchange",!1,s))}}function VE(n,s,o,u){switch(nT(s)){case 2:var f=V1;break;case 8:f=O1;break;default:f=gg}o=f.bind(null,s,o,n),f=void 0,!Pi||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(f=!0),u?f!==void 0?n.addEventListener(s,o,{capture:!0,passive:f}):n.addEventListener(s,o,!0):f!==void 0?n.addEventListener(s,o,{passive:f}):n.addEventListener(s,o,!1)}function ng(n,s,o,u,f){var g=u;if((s&1)===0&&(s&2)===0&&u!==null)e:for(;;){if(u===null)return;var E=u.tag;if(E===3||E===4){var S=u.stateNode.containerInfo;if(S===f)break;if(E===4)for(E=u.return;E!==null;){var C=E.tag;if((C===3||C===4)&&E.stateNode.containerInfo===f)return;E=E.return}for(;S!==null;){if(E=si(S),E===null)return;if(C=E.tag,C===5||C===6||C===26||C===27){u=g=E;continue e}S=S.parentNode}}u=u.return}Vs(function(){var j=g,W=Rl(o),ne=[];e:{var K=d_.get(n);if(K!==void 0){var Q=Ps,we=n;switch(n){case"keypress":if(Os(o)===0)break e;case"keydown":case"keyup":Q=Ka;break;case"focusin":we="focus",Q=Fa;break;case"focusout":we="blur",Q=Fa;break;case"beforeblur":case"afterblur":Q=Fa;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=zs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=Uc;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=Ir;break;case u_:case c_:case h_:Q=Dl;break;case f_:Q=y;break;case"scroll":case"scrollend":Q=Ls;break;case"wheel":Q=A;break;case"copy":case"cut":case"paste":Q=zc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=Vl;break;case"toggle":case"beforetoggle":Q=Y}var Ae=(s&4)!==0,nt=!Ae&&(n==="scroll"||n==="scrollend"),k=Ae?K!==null?K+"Capture":null:K;Ae=[];for(var O=j,U;O!==null;){var ee=O;if(U=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||U===null||k===null||(ee=br(O,k),ee!=null&&Ae.push(hu(O,ee,U))),nt)break;O=O.return}0<Ae.length&&(K=new Q(K,we,null,o,W),ne.push({event:K,listeners:Ae}))}}if((s&7)===0){e:{if(K=n==="mouseover"||n==="pointerover",Q=n==="mouseout"||n==="pointerout",K&&o!==Il&&(we=o.relatedTarget||o.fromElement)&&(si(we)||we[Ni]))break e;if((Q||K)&&(K=W.window===W?W:(K=W.ownerDocument)?K.defaultView||K.parentWindow:window,Q?(we=o.relatedTarget||o.toElement,Q=j,we=we?si(we):null,we!==null&&(nt=l(we),Ae=we.tag,we!==nt||Ae!==5&&Ae!==27&&Ae!==6)&&(we=null)):(Q=null,we=j),Q!==we)){if(Ae=zs,ee="onMouseLeave",k="onMouseEnter",O="mouse",(n==="pointerout"||n==="pointerover")&&(Ae=Vl,ee="onPointerLeave",k="onPointerEnter",O="pointer"),nt=Q==null?K:_r(Q),U=we==null?K:_r(we),K=new Ae(ee,O+"leave",Q,o,W),K.target=nt,K.relatedTarget=U,ee=null,si(W)===j&&(Ae=new Ae(k,O+"enter",we,o,W),Ae.target=U,Ae.relatedTarget=nt,ee=Ae),nt=ee,Q&&we)t:{for(Ae=Q,k=we,O=0,U=Ae;U;U=_o(U))O++;for(U=0,ee=k;ee;ee=_o(ee))U++;for(;0<O-U;)Ae=_o(Ae),O--;for(;0<U-O;)k=_o(k),U--;for(;O--;){if(Ae===k||k!==null&&Ae===k.alternate)break t;Ae=_o(Ae),k=_o(k)}Ae=null}else Ae=null;Q!==null&&OE(ne,K,Q,Ae,!1),we!==null&&nt!==null&&OE(ne,nt,we,Ae,!0)}}e:{if(K=j?_r(j):window,Q=K.nodeName&&K.nodeName.toLowerCase(),Q==="select"||Q==="input"&&K.type==="file")var ge=Wy;else if(Xy(K))if(Zy)ge=_I;else{ge=pI;var Me=gI}else Q=K.nodeName,!Q||Q.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?j&&za(j.elementType)&&(ge=Wy):ge=yI;if(ge&&(ge=ge(n,j))){Jy(ne,ge,o,W);break e}Me&&Me(n,K,j),n==="focusout"&&j&&K.type==="number"&&j.memoizedProps.value!=null&&Al(K,"number",K.value)}switch(Me=j?_r(j):window,n){case"focusin":(Xy(Me)||Me.contentEditable==="true")&&(Qa=Me,Od=j,Ll=null);break;case"focusout":Ll=Od=Qa=null;break;case"mousedown":Md=!0;break;case"contextmenu":case"mouseup":case"dragend":Md=!1,o_(ne,o,W);break;case"selectionchange":if(EI)break;case"keydown":case"keyup":o_(ne,o,W)}var Ee;if(Ce)e:{switch(n){case"compositionstart":var be="onCompositionStart";break e;case"compositionend":be="onCompositionEnd";break e;case"compositionupdate":be="onCompositionUpdate";break e}be=void 0}else Xn?Yn(n,o)&&(be="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(be="onCompositionStart");be&&(Tt&&o.locale!=="ko"&&(Xn||be!=="onCompositionStart"?be==="onCompositionEnd"&&Xn&&(Ee=Lc()):(On=W,rt="value"in On?On.value:On.textContent,Xn=!0)),Me=Nh(j,be),0<Me.length&&(be=new Nl(be,n,null,o,W),ne.push({event:be,listeners:Me}),Ee?be.data=Ee:(Ee=$n(o),Ee!==null&&(be.data=Ee)))),(Ee=Ke?Ol(n,o):fI(n,o))&&(be=Nh(j,"onBeforeInput"),0<be.length&&(Me=new Nl("onBeforeInput","beforeinput",null,o,W),ne.push({event:Me,listeners:be}),Me.data=Ee)),n1(ne,n,j,o,W)}NE(ne,s)})}function hu(n,s,o){return{instance:n,listener:s,currentTarget:o}}function Nh(n,s){for(var o=s+"Capture",u=[];n!==null;){var f=n,g=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||g===null||(f=br(n,o),f!=null&&u.unshift(hu(n,f,g)),f=br(n,s),f!=null&&u.push(hu(n,f,g))),n.tag===3)return u;n=n.return}return[]}function _o(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function OE(n,s,o,u,f){for(var g=s._reactName,E=[];o!==null&&o!==u;){var S=o,C=S.alternate,j=S.stateNode;if(S=S.tag,C!==null&&C===u)break;S!==5&&S!==26&&S!==27||j===null||(C=j,f?(j=br(o,g),j!=null&&E.unshift(hu(o,j,C))):f||(j=br(o,g),j!=null&&E.push(hu(o,j,C)))),o=o.return}E.length!==0&&n.push({event:s,listeners:E})}var a1=/\r\n?/g,o1=/\u0000|\uFFFD/g;function ME(n){return(typeof n=="string"?n:""+n).replace(a1,`
`).replace(o1,"")}function PE(n,s){return s=ME(s),ME(n)===s}function Vh(){}function tt(n,s,o,u,f,g){switch(o){case"children":typeof u=="string"?s==="body"||s==="textarea"&&u===""||Vn(n,u):(typeof u=="number"||typeof u=="bigint")&&s!=="body"&&Vn(n,""+u);break;case"className":Rs(n,"class",u);break;case"tabIndex":Rs(n,"tabindex",u);break;case"dir":case"role":case"viewBox":case"width":case"height":Rs(n,o,u);break;case"style":wl(n,u,g);break;case"data":if(s!=="object"){Rs(n,"data",u);break}case"src":case"href":if(u===""&&(s!=="a"||o!=="href")){n.removeAttribute(o);break}if(u==null||typeof u=="function"||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Qn(""+u),n.setAttribute(o,u);break;case"action":case"formAction":if(typeof u=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(s!=="input"&&tt(n,s,"name",f.name,f,null),tt(n,s,"formEncType",f.formEncType,f,null),tt(n,s,"formMethod",f.formMethod,f,null),tt(n,s,"formTarget",f.formTarget,f,null)):(tt(n,s,"encType",f.encType,f,null),tt(n,s,"method",f.method,f,null),tt(n,s,"target",f.target,f,null)));if(u==null||typeof u=="symbol"||typeof u=="boolean"){n.removeAttribute(o);break}u=Qn(""+u),n.setAttribute(o,u);break;case"onClick":u!=null&&(n.onclick=Vh);break;case"onScroll":u!=null&&ke("scroll",n);break;case"onScrollEnd":u!=null&&ke("scrollend",n);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"multiple":n.multiple=u&&typeof u!="function"&&typeof u!="symbol";break;case"muted":n.muted=u&&typeof u!="function"&&typeof u!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(u==null||typeof u=="function"||typeof u=="boolean"||typeof u=="symbol"){n.removeAttribute("xlink:href");break}o=Qn(""+u),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""+u):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":u&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":u===!0?n.setAttribute(o,""):u!==!1&&u!=null&&typeof u!="function"&&typeof u!="symbol"?n.setAttribute(o,u):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":u!=null&&typeof u!="function"&&typeof u!="symbol"&&!isNaN(u)&&1<=u?n.setAttribute(o,u):n.removeAttribute(o);break;case"rowSpan":case"start":u==null||typeof u=="function"||typeof u=="symbol"||isNaN(u)?n.removeAttribute(o):n.setAttribute(o,u);break;case"popover":ke("beforetoggle",n),ke("toggle",n),Is(n,"popover",u);break;case"xlinkActuate":Nn(n,"http://www.w3.org/1999/xlink","xlink:actuate",u);break;case"xlinkArcrole":Nn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",u);break;case"xlinkRole":Nn(n,"http://www.w3.org/1999/xlink","xlink:role",u);break;case"xlinkShow":Nn(n,"http://www.w3.org/1999/xlink","xlink:show",u);break;case"xlinkTitle":Nn(n,"http://www.w3.org/1999/xlink","xlink:title",u);break;case"xlinkType":Nn(n,"http://www.w3.org/1999/xlink","xlink:type",u);break;case"xmlBase":Nn(n,"http://www.w3.org/XML/1998/namespace","xml:base",u);break;case"xmlLang":Nn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",u);break;case"xmlSpace":Nn(n,"http://www.w3.org/XML/1998/namespace","xml:space",u);break;case"is":Is(n,"is",u);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Mc.get(o)||o,Is(n,o,u))}}function ig(n,s,o,u,f,g){switch(o){case"style":wl(n,u,g);break;case"dangerouslySetInnerHTML":if(u!=null){if(typeof u!="object"||!("__html"in u))throw Error(i(61));if(o=u.__html,o!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=o}}break;case"children":typeof u=="string"?Vn(n,u):(typeof u=="number"||typeof u=="bigint")&&Vn(n,""+u);break;case"onScroll":u!=null&&ke("scroll",n);break;case"onScrollEnd":u!=null&&ke("scrollend",n);break;case"onClick":u!=null&&(n.onclick=Vh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!bs.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(f=o.endsWith("Capture"),s=o.slice(2,f?o.length-7:void 0),g=n[Ft]||null,g=g!=null?g[o]:null,typeof g=="function"&&n.removeEventListener(s,g,f),typeof u=="function")){typeof g!="function"&&g!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(s,u,f);break e}o in n?n[o]=u:u===!0?n.setAttribute(o,""):Is(n,o,u)}}}function Kt(n,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ke("error",n),ke("load",n);var u=!1,f=!1,g;for(g in o)if(o.hasOwnProperty(g)){var E=o[g];if(E!=null)switch(g){case"src":u=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:tt(n,s,g,E,o,null)}}f&&tt(n,s,"srcSet",o.srcSet,o,null),u&&tt(n,s,"src",o.src,o,null);return;case"input":ke("invalid",n);var S=g=E=f=null,C=null,j=null;for(u in o)if(o.hasOwnProperty(u)){var W=o[u];if(W!=null)switch(u){case"name":f=W;break;case"type":E=W;break;case"checked":C=W;break;case"defaultChecked":j=W;break;case"value":g=W;break;case"defaultValue":S=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,s));break;default:tt(n,s,u,W,o,null)}}Sl(n,g,S,C,j,E,f,!1),Tr(n);return;case"select":ke("invalid",n),u=E=g=null;for(f in o)if(o.hasOwnProperty(f)&&(S=o[f],S!=null))switch(f){case"value":g=S;break;case"defaultValue":E=S;break;case"multiple":u=S;default:tt(n,s,f,S,o,null)}s=g,o=E,n.multiple=!!u,s!=null?Sr(n,!!u,s,!1):o!=null&&Sr(n,!!u,o,!0);return;case"textarea":ke("invalid",n),g=f=u=null;for(E in o)if(o.hasOwnProperty(E)&&(S=o[E],S!=null))switch(E){case"value":u=S;break;case"defaultValue":f=S;break;case"children":g=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(i(91));break;default:tt(n,s,E,S,o,null)}Oc(n,u,f,g),Tr(n);return;case"option":for(C in o)if(o.hasOwnProperty(C)&&(u=o[C],u!=null))switch(C){case"selected":n.selected=u&&typeof u!="function"&&typeof u!="symbol";break;default:tt(n,s,C,u,o,null)}return;case"dialog":ke("beforetoggle",n),ke("toggle",n),ke("cancel",n),ke("close",n);break;case"iframe":case"object":ke("load",n);break;case"video":case"audio":for(u=0;u<cu.length;u++)ke(cu[u],n);break;case"image":ke("error",n),ke("load",n);break;case"details":ke("toggle",n);break;case"embed":case"source":case"link":ke("error",n),ke("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in o)if(o.hasOwnProperty(j)&&(u=o[j],u!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:tt(n,s,j,u,o,null)}return;default:if(za(s)){for(W in o)o.hasOwnProperty(W)&&(u=o[W],u!==void 0&&ig(n,s,W,u,o,void 0));return}}for(S in o)o.hasOwnProperty(S)&&(u=o[S],u!=null&&tt(n,s,S,u,o,null))}function l1(n,s,o,u){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,g=null,E=null,S=null,C=null,j=null,W=null;for(Q in o){var ne=o[Q];if(o.hasOwnProperty(Q)&&ne!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":C=ne;default:u.hasOwnProperty(Q)||tt(n,s,Q,null,u,ne)}}for(var K in u){var Q=u[K];if(ne=o[K],u.hasOwnProperty(K)&&(Q!=null||ne!=null))switch(K){case"type":g=Q;break;case"name":f=Q;break;case"checked":j=Q;break;case"defaultChecked":W=Q;break;case"value":E=Q;break;case"defaultValue":S=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,s));break;default:Q!==ne&&tt(n,s,K,Q,u,ne)}}Tl(n,E,S,C,j,W,g,f);return;case"select":Q=E=S=K=null;for(g in o)if(C=o[g],o.hasOwnProperty(g)&&C!=null)switch(g){case"value":break;case"multiple":Q=C;default:u.hasOwnProperty(g)||tt(n,s,g,null,u,C)}for(f in u)if(g=u[f],C=o[f],u.hasOwnProperty(f)&&(g!=null||C!=null))switch(f){case"value":K=g;break;case"defaultValue":S=g;break;case"multiple":E=g;default:g!==C&&tt(n,s,f,g,u,C)}s=S,o=E,u=Q,K!=null?Sr(n,!!o,K,!1):!!u!=!!o&&(s!=null?Sr(n,!!o,s,!0):Sr(n,!!o,o?[]:"",!1));return;case"textarea":Q=K=null;for(S in o)if(f=o[S],o.hasOwnProperty(S)&&f!=null&&!u.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:tt(n,s,S,null,u,f)}for(E in u)if(f=u[E],g=o[E],u.hasOwnProperty(E)&&(f!=null||g!=null))switch(E){case"value":K=f;break;case"defaultValue":Q=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==g&&tt(n,s,E,f,u,g)}Vc(n,K,Q);return;case"option":for(var we in o)if(K=o[we],o.hasOwnProperty(we)&&K!=null&&!u.hasOwnProperty(we))switch(we){case"selected":n.selected=!1;break;default:tt(n,s,we,null,u,K)}for(C in u)if(K=u[C],Q=o[C],u.hasOwnProperty(C)&&K!==Q&&(K!=null||Q!=null))switch(C){case"selected":n.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:tt(n,s,C,K,u,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in o)K=o[Ae],o.hasOwnProperty(Ae)&&K!=null&&!u.hasOwnProperty(Ae)&&tt(n,s,Ae,null,u,K);for(j in u)if(K=u[j],Q=o[j],u.hasOwnProperty(j)&&K!==Q&&(K!=null||Q!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,s));break;default:tt(n,s,j,K,u,Q)}return;default:if(za(s)){for(var nt in o)K=o[nt],o.hasOwnProperty(nt)&&K!==void 0&&!u.hasOwnProperty(nt)&&ig(n,s,nt,void 0,u,K);for(W in u)K=u[W],Q=o[W],!u.hasOwnProperty(W)||K===Q||K===void 0&&Q===void 0||ig(n,s,W,K,u,Q);return}}for(var k in o)K=o[k],o.hasOwnProperty(k)&&K!=null&&!u.hasOwnProperty(k)&&tt(n,s,k,null,u,K);for(ne in u)K=u[ne],Q=o[ne],!u.hasOwnProperty(ne)||K===Q||K==null&&Q==null||tt(n,s,ne,K,u,Q)}var rg=null,sg=null;function Oh(n){return n.nodeType===9?n:n.ownerDocument}function kE(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function LE(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function ag(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var og=null;function u1(){var n=window.event;return n&&n.type==="popstate"?n===og?!1:(og=n,!0):(og=null,!1)}var UE=typeof setTimeout=="function"?setTimeout:void 0,c1=typeof clearTimeout=="function"?clearTimeout:void 0,BE=typeof Promise=="function"?Promise:void 0,h1=typeof queueMicrotask=="function"?queueMicrotask:typeof BE<"u"?function(n){return BE.resolve(null).then(n).catch(f1)}:UE;function f1(n){setTimeout(function(){throw n})}function qr(n){return n==="head"}function zE(n,s){var o=s,u=0,f=0;do{var g=o.nextSibling;if(n.removeChild(o),g&&g.nodeType===8)if(o=g.data,o==="/$"){if(0<u&&8>u){o=u;var E=n.ownerDocument;if(o&1&&fu(E.documentElement),o&2&&fu(E.body),o&4)for(o=E.head,fu(o),E=o.firstChild;E;){var S=E.nextSibling,C=E.nodeName;E[yr]||C==="SCRIPT"||C==="STYLE"||C==="LINK"&&E.rel.toLowerCase()==="stylesheet"||o.removeChild(E),E=S}}if(f===0){n.removeChild(g),Eu(s);return}f--}else o==="$"||o==="$?"||o==="$!"?f++:u=o.charCodeAt(0)-48;else u=0;o=g}while(o);Eu(s)}function lg(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":lg(o),Pa(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function d1(n,s,o,u){for(;n.nodeType===1;){var f=o;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!u&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(u){if(!n[yr])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(g=n.getAttribute("rel"),g==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(g!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(g=n.getAttribute("src"),(g!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&g&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var g=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===g)return n}else return n;if(n=Zn(n.nextSibling),n===null)break}return null}function m1(n,s,o){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=Zn(n.nextSibling),n===null))return null;return n}function ug(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState==="complete"}function g1(n,s){var o=n.ownerDocument;if(n.data!=="$?"||o.readyState==="complete")s();else{var u=function(){s(),o.removeEventListener("DOMContentLoaded",u)};o.addEventListener("DOMContentLoaded",u),n._reactRetry=u}}function Zn(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="F!"||s==="F")break;if(s==="/$")return null}}return n}var cg=null;function jE(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"){if(s===0)return n;s--}else o==="/$"&&s++}n=n.previousSibling}return null}function qE(n,s,o){switch(s=Oh(o),n){case"html":if(n=s.documentElement,!n)throw Error(i(452));return n;case"head":if(n=s.head,!n)throw Error(i(453));return n;case"body":if(n=s.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function fu(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);Pa(n)}var zn=new Map,FE=new Set;function Mh(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var $i=he.d;he.d={f:p1,r:y1,D:_1,C:v1,L:E1,m:T1,X:A1,S:S1,M:b1};function p1(){var n=$i.f(),s=wh();return n||s}function y1(n){var s=ai(n);s!==null&&s.tag===5&&s.type==="form"?uv(s):$i.r(n)}var vo=typeof document>"u"?null:document;function HE(n,s,o){var u=vo;if(u&&typeof s=="string"&&s){var f=Ut(s);f='link[rel="'+n+'"][href="'+f+'"]',typeof o=="string"&&(f+='[crossorigin="'+o+'"]'),FE.has(f)||(FE.add(f),n={rel:n,crossOrigin:o,href:s},u.querySelector(f)===null&&(s=u.createElement("link"),Kt(s,"link",n),Et(s),u.head.appendChild(s)))}}function _1(n){$i.D(n),HE("dns-prefetch",n,null)}function v1(n,s){$i.C(n,s),HE("preconnect",n,s)}function E1(n,s,o){$i.L(n,s,o);var u=vo;if(u&&n&&s){var f='link[rel="preload"][as="'+Ut(s)+'"]';s==="image"&&o&&o.imageSrcSet?(f+='[imagesrcset="'+Ut(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(f+='[imagesizes="'+Ut(o.imageSizes)+'"]')):f+='[href="'+Ut(n)+'"]';var g=f;switch(s){case"style":g=Eo(n);break;case"script":g=To(n)}zn.has(g)||(n=_({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:n,as:s},o),zn.set(g,n),u.querySelector(f)!==null||s==="style"&&u.querySelector(du(g))||s==="script"&&u.querySelector(mu(g))||(s=u.createElement("link"),Kt(s,"link",n),Et(s),u.head.appendChild(s)))}}function T1(n,s){$i.m(n,s);var o=vo;if(o&&n){var u=s&&typeof s.as=="string"?s.as:"script",f='link[rel="modulepreload"][as="'+Ut(u)+'"][href="'+Ut(n)+'"]',g=f;switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=To(n)}if(!zn.has(g)&&(n=_({rel:"modulepreload",href:n},s),zn.set(g,n),o.querySelector(f)===null)){switch(u){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(mu(g)))return}u=o.createElement("link"),Kt(u,"link",n),Et(u),o.head.appendChild(u)}}}function S1(n,s,o){$i.S(n,s,o);var u=vo;if(u&&n){var f=vr(u).hoistableStyles,g=Eo(n);s=s||"default";var E=f.get(g);if(!E){var S={loading:0,preload:null};if(E=u.querySelector(du(g)))S.loading=5;else{n=_({rel:"stylesheet",href:n,"data-precedence":s},o),(o=zn.get(g))&&hg(n,o);var C=E=u.createElement("link");Et(C),Kt(C,"link",n),C._p=new Promise(function(j,W){C.onload=j,C.onerror=W}),C.addEventListener("load",function(){S.loading|=1}),C.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Ph(E,s,u)}E={type:"stylesheet",instance:E,count:1,state:S},f.set(g,E)}}}function A1(n,s){$i.X(n,s);var o=vo;if(o&&n){var u=vr(o).hoistableScripts,f=To(n),g=u.get(f);g||(g=o.querySelector(mu(f)),g||(n=_({src:n,async:!0},s),(s=zn.get(f))&&fg(n,s),g=o.createElement("script"),Et(g),Kt(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(f,g))}}function b1(n,s){$i.M(n,s);var o=vo;if(o&&n){var u=vr(o).hoistableScripts,f=To(n),g=u.get(f);g||(g=o.querySelector(mu(f)),g||(n=_({src:n,async:!0,type:"module"},s),(s=zn.get(f))&&fg(n,s),g=o.createElement("script"),Et(g),Kt(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},u.set(f,g))}}function GE(n,s,o,u){var f=(f=Se.current)?Mh(f):null;if(!f)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=Eo(o.href),o=vr(f).hoistableStyles,u=o.get(s),u||(u={type:"style",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=Eo(o.href);var g=vr(f).hoistableStyles,E=g.get(n);if(E||(f=f.ownerDocument||f,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(n,E),(g=f.querySelector(du(n)))&&!g._p&&(E.instance=g,E.state.loading=5),zn.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},zn.set(n,o),g||w1(f,n,o,E.state))),s&&u===null)throw Error(i(528,""));return E}if(s&&u!==null)throw Error(i(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=To(o),o=vr(f).hoistableScripts,u=o.get(s),u||(u={type:"script",instance:null,count:0,state:null},o.set(s,u)),u):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function Eo(n){return'href="'+Ut(n)+'"'}function du(n){return'link[rel="stylesheet"]['+n+"]"}function KE(n){return _({},n,{"data-precedence":n.precedence,precedence:null})}function w1(n,s,o,u){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?u.loading=1:(s=n.createElement("link"),u.preload=s,s.addEventListener("load",function(){return u.loading|=1}),s.addEventListener("error",function(){return u.loading|=2}),Kt(s,"link",o),Et(s),n.head.appendChild(s))}function To(n){return'[src="'+Ut(n)+'"]'}function mu(n){return"script[async]"+n}function QE(n,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var u=n.querySelector('style[data-href~="'+Ut(o.href)+'"]');if(u)return s.instance=u,Et(u),u;var f=_({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return u=(n.ownerDocument||n).createElement("style"),Et(u),Kt(u,"style",f),Ph(u,o.precedence,n),s.instance=u;case"stylesheet":f=Eo(o.href);var g=n.querySelector(du(f));if(g)return s.state.loading|=4,s.instance=g,Et(g),g;u=KE(o),(f=zn.get(f))&&hg(u,f),g=(n.ownerDocument||n).createElement("link"),Et(g);var E=g;return E._p=new Promise(function(S,C){E.onload=S,E.onerror=C}),Kt(g,"link",u),s.state.loading|=4,Ph(g,o.precedence,n),s.instance=g;case"script":return g=To(o.src),(f=n.querySelector(mu(g)))?(s.instance=f,Et(f),f):(u=o,(f=zn.get(g))&&(u=_({},o),fg(u,f)),n=n.ownerDocument||n,f=n.createElement("script"),Et(f),Kt(f,"link",u),n.head.appendChild(f),s.instance=f);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(u=s.instance,s.state.loading|=4,Ph(u,o.precedence,n));return s.instance}function Ph(n,s,o){for(var u=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=u.length?u[u.length-1]:null,g=f,E=0;E<u.length;E++){var S=u[E];if(S.dataset.precedence===s)g=S;else if(g!==f)break}g?g.parentNode.insertBefore(n,g.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(n,s.firstChild))}function hg(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function fg(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var kh=null;function YE(n,s,o){if(kh===null){var u=new Map,f=kh=new Map;f.set(o,u)}else f=kh,u=f.get(o),u||(u=new Map,f.set(o,u));if(u.has(n))return u;for(u.set(n,null),o=o.getElementsByTagName(n),f=0;f<o.length;f++){var g=o[f];if(!(g[yr]||g[vt]||n==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var E=g.getAttribute(s)||"";E=n+E;var S=u.get(E);S?S.push(g):u.set(E,[g])}}return u}function $E(n,s,o){n=n.ownerDocument||n,n.head.insertBefore(o,s==="title"?n.querySelector("head > title"):null)}function I1(n,s,o){if(o===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function XE(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}var gu=null;function R1(){}function C1(n,s,o){if(gu===null)throw Error(i(475));var u=gu;if(s.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var f=Eo(o.href),g=n.querySelector(du(f));if(g){n=g._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(u.count++,u=Lh.bind(u),n.then(u,u)),s.state.loading|=4,s.instance=g,Et(g);return}g=n.ownerDocument||n,o=KE(o),(f=zn.get(f))&&hg(o,f),g=g.createElement("link"),Et(g);var E=g;E._p=new Promise(function(S,C){E.onload=S,E.onerror=C}),Kt(g,"link",o),s.instance=g}u.stylesheets===null&&(u.stylesheets=new Map),u.stylesheets.set(s,n),(n=s.state.preload)&&(s.state.loading&3)===0&&(u.count++,s=Lh.bind(u),n.addEventListener("load",s),n.addEventListener("error",s))}}function D1(){if(gu===null)throw Error(i(475));var n=gu;return n.stylesheets&&n.count===0&&dg(n,n.stylesheets),0<n.count?function(s){var o=setTimeout(function(){if(n.stylesheets&&dg(n,n.stylesheets),n.unsuspend){var u=n.unsuspend;n.unsuspend=null,u()}},6e4);return n.unsuspend=s,function(){n.unsuspend=null,clearTimeout(o)}}:null}function Lh(){if(this.count--,this.count===0){if(this.stylesheets)dg(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Uh=null;function dg(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Uh=new Map,s.forEach(x1,n),Uh=null,Lh.call(n))}function x1(n,s){if(!(s.state.loading&4)){var o=Uh.get(n);if(o)var u=o.get(null);else{o=new Map,Uh.set(n,o);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<f.length;g++){var E=f[g];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(o.set(E.dataset.precedence,E),u=E)}u&&o.set(null,u)}f=s.instance,E=f.getAttribute("data-precedence"),g=o.get(E)||u,g===u&&o.set(null,f),o.set(E,f),this.count++,u=Lh.bind(this),f.addEventListener("load",u),f.addEventListener("error",u),g?g.parentNode.insertBefore(f,g.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),s.state.loading|=4}}var pu={$$typeof:$,Provider:null,Consumer:null,_currentValue:_e,_currentValue2:_e,_threadCount:0};function N1(n,s,o,u,f,g,E,S){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ma(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ma(0),this.hiddenUpdates=Ma(null),this.identifierPrefix=u,this.onUncaughtError=f,this.onCaughtError=g,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function JE(n,s,o,u,f,g,E,S,C,j,W,ne){return n=new N1(n,s,o,E,S,C,j,ne),s=1,g===!0&&(s|=24),g=yn(3,null,null,s),n.current=g,g.stateNode=n,s=Yd(),s.refCount++,n.pooledCache=s,s.refCount++,g.memoizedState={element:u,isDehydrated:o,cache:s},Wd(g),n}function WE(n){return n?(n=Ja,n):Ja}function ZE(n,s,o,u,f,g){f=WE(f),u.context===null?u.context=f:u.pendingContext=f,u=Dr(s),u.payload={element:o},g=g===void 0?null:g,g!==null&&(u.callback=g),o=xr(n,u,s),o!==null&&(Sn(o,n,s),Kl(o,n,s))}function eT(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<s?o:s}}function mg(n,s){eT(n,s),(n=n.alternate)&&eT(n,s)}function tT(n){if(n.tag===13){var s=Xa(n,67108864);s!==null&&Sn(s,n,67108864),mg(n,67108864)}}var Bh=!0;function V1(n,s,o,u){var f=X.T;X.T=null;var g=he.p;try{he.p=2,gg(n,s,o,u)}finally{he.p=g,X.T=f}}function O1(n,s,o,u){var f=X.T;X.T=null;var g=he.p;try{he.p=8,gg(n,s,o,u)}finally{he.p=g,X.T=f}}function gg(n,s,o,u){if(Bh){var f=pg(u);if(f===null)ng(n,s,u,zh,o),iT(n,u);else if(P1(f,n,s,o,u))u.stopPropagation();else if(iT(n,u),s&4&&-1<M1.indexOf(n)){for(;f!==null;){var g=ai(f);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var E=Hn(g.pendingLanes);if(E!==0){var S=g;for(S.pendingLanes|=2,S.entangledLanes|=2;E;){var C=1<<31-nn(E);S.entanglements[1]|=C,E&=~C}pi(g),(Qe&6)===0&&(Ah=un()+500,uu(0))}}break;case 13:S=Xa(g,2),S!==null&&Sn(S,g,2),wh(),mg(g,2)}if(g=pg(u),g===null&&ng(n,s,u,zh,o),g===f)break;f=g}f!==null&&u.stopPropagation()}else ng(n,s,u,null,o)}}function pg(n){return n=Rl(n),yg(n)}var zh=null;function yg(n){if(zh=null,n=si(n),n!==null){var s=l(n);if(s===null)n=null;else{var o=s.tag;if(o===13){if(n=c(s),n!==null)return n;n=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return zh=n,null}function nT(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Rc()){case xt:return 2;case Lt:return 8;case Di:case Sd:return 32;case yl:return 268435456;default:return 32}default:return 32}}var _g=!1,Fr=null,Hr=null,Gr=null,yu=new Map,_u=new Map,Kr=[],M1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function iT(n,s){switch(n){case"focusin":case"focusout":Fr=null;break;case"dragenter":case"dragleave":Hr=null;break;case"mouseover":case"mouseout":Gr=null;break;case"pointerover":case"pointerout":yu.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":_u.delete(s.pointerId)}}function vu(n,s,o,u,f,g){return n===null||n.nativeEvent!==g?(n={blockedOn:s,domEventName:o,eventSystemFlags:u,nativeEvent:g,targetContainers:[f]},s!==null&&(s=ai(s),s!==null&&tT(s)),n):(n.eventSystemFlags|=u,s=n.targetContainers,f!==null&&s.indexOf(f)===-1&&s.push(f),n)}function P1(n,s,o,u,f){switch(s){case"focusin":return Fr=vu(Fr,n,s,o,u,f),!0;case"dragenter":return Hr=vu(Hr,n,s,o,u,f),!0;case"mouseover":return Gr=vu(Gr,n,s,o,u,f),!0;case"pointerover":var g=f.pointerId;return yu.set(g,vu(yu.get(g)||null,n,s,o,u,f)),!0;case"gotpointercapture":return g=f.pointerId,_u.set(g,vu(_u.get(g)||null,n,s,o,u,f)),!0}return!1}function rT(n){var s=si(n.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=c(o),s!==null){n.blockedOn=s,wd(n.priority,function(){if(o.tag===13){var u=Tn();u=vl(u);var f=Xa(o,u);f!==null&&Sn(f,o,u),mg(o,u)}});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function jh(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var o=pg(n.nativeEvent);if(o===null){o=n.nativeEvent;var u=new o.constructor(o.type,o);Il=u,o.target.dispatchEvent(u),Il=null}else return s=ai(o),s!==null&&tT(s),n.blockedOn=o,!1;s.shift()}return!0}function sT(n,s,o){jh(n)&&o.delete(s)}function k1(){_g=!1,Fr!==null&&jh(Fr)&&(Fr=null),Hr!==null&&jh(Hr)&&(Hr=null),Gr!==null&&jh(Gr)&&(Gr=null),yu.forEach(sT),_u.forEach(sT)}function qh(n,s){n.blockedOn===s&&(n.blockedOn=null,_g||(_g=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,k1)))}var Fh=null;function aT(n){Fh!==n&&(Fh=n,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Fh===n&&(Fh=null);for(var s=0;s<n.length;s+=3){var o=n[s],u=n[s+1],f=n[s+2];if(typeof u!="function"){if(yg(u||o)===null)continue;break}var g=ai(o);g!==null&&(n.splice(s,3),s-=3,ym(g,{pending:!0,data:f,method:o.method,action:u},u,f))}}))}function Eu(n){function s(C){return qh(C,n)}Fr!==null&&qh(Fr,n),Hr!==null&&qh(Hr,n),Gr!==null&&qh(Gr,n),yu.forEach(s),_u.forEach(s);for(var o=0;o<Kr.length;o++){var u=Kr[o];u.blockedOn===n&&(u.blockedOn=null)}for(;0<Kr.length&&(o=Kr[0],o.blockedOn===null);)rT(o),o.blockedOn===null&&Kr.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(u=0;u<o.length;u+=3){var f=o[u],g=o[u+1],E=f[Ft]||null;if(typeof g=="function")E||aT(o);else if(E){var S=null;if(g&&g.hasAttribute("formAction")){if(f=g,E=g[Ft]||null)S=E.formAction;else if(yg(f)!==null)continue}else S=E.action;typeof S=="function"?o[u+1]=S:(o.splice(u,3),u-=3),aT(o)}}}function vg(n){this._internalRoot=n}Hh.prototype.render=vg.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(i(409));var o=s.current,u=Tn();ZE(o,u,n,s,null,null)},Hh.prototype.unmount=vg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;ZE(n.current,2,null,n,null,null),wh(),s[Ni]=null}};function Hh(n){this._internalRoot=n}Hh.prototype.unstable_scheduleHydration=function(n){if(n){var s=xi();n={blockedOn:null,target:n,priority:s};for(var o=0;o<Kr.length&&s!==0&&s<Kr[o].priority;o++);Kr.splice(o,0,n),o===0&&rT(n)}};var oT=e.version;if(oT!=="19.1.1")throw Error(i(527,oT,"19.1.1"));he.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=m(s),n=n!==null?p(n):null,n=n===null?null:n.stateNode,n};var L1={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gh.isDisabled&&Gh.supportsFiber)try{hr=Gh.inject(L1),Yt=Gh}catch{}}return Su.createRoot=function(n,s){if(!a(n))throw Error(i(299));var o=!1,u="",f=Av,g=bv,E=wv,S=null;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(u=s.identifierPrefix),s.onUncaughtError!==void 0&&(f=s.onUncaughtError),s.onCaughtError!==void 0&&(g=s.onCaughtError),s.onRecoverableError!==void 0&&(E=s.onRecoverableError),s.unstable_transitionCallbacks!==void 0&&(S=s.unstable_transitionCallbacks)),s=JE(n,1,!1,null,null,o,u,f,g,E,S,null),n[Ni]=s.current,tg(n),new vg(s)},Su.hydrateRoot=function(n,s,o){if(!a(n))throw Error(i(299));var u=!1,f="",g=Av,E=bv,S=wv,C=null,j=null;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(E=o.onCaughtError),o.onRecoverableError!==void 0&&(S=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(C=o.unstable_transitionCallbacks),o.formState!==void 0&&(j=o.formState)),s=JE(n,1,!0,s,o??null,u,f,g,E,S,C,j),s.context=WE(null),o=s.current,u=Tn(),u=vl(u),f=Dr(u),f.callback=null,xr(o,f,u),o=u,s.current.lanes=o,_t(s,o),pi(s),n[Ni]=s.current,tg(n),new Hh(s)},Su.version="19.1.1",Su}var yT;function Q1(){if(yT)return Sg.exports;yT=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),Sg.exports=K1(),Sg.exports}var Y1=Q1();/**
 * react-router v7.9.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var _T="popstate";function $1(r={}){function e(i,a){let{pathname:l,search:c,hash:d}=i.location;return Qg("",{pathname:l,search:c,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(i,a){return typeof a=="string"?a:Ku(a)}return J1(e,t,null,r)}function mt(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function wi(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function X1(){return Math.random().toString(36).substring(2,10)}function vT(r,e){return{usr:r.state,key:r.key,idx:e}}function Qg(r,e,t=null,i){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?rl(e):e,state:t,key:e&&e.key||i||X1()}}function Ku({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function rl(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let i=r.indexOf("?");i>=0&&(e.search=r.substring(i),r=r.substring(0,i)),r&&(e.pathname=r)}return e}function J1(r,e,t,i={}){let{window:a=document.defaultView,v5Compat:l=!1}=i,c=a.history,d="POP",m=null,p=_();p==null&&(p=0,c.replaceState({...c.state,idx:p},""));function _(){return(c.state||{idx:null}).idx}function T(){d="POP";let F=_(),ie=F==null?null:F-p;p=F,m&&m({action:d,location:G.location,delta:ie})}function b(F,ie){d="PUSH";let Z=Qg(G.location,F,ie);p=_()+1;let $=vT(Z,p),fe=G.createHref(Z);try{c.pushState($,"",fe)}catch(se){if(se instanceof DOMException&&se.name==="DataCloneError")throw se;a.location.assign(fe)}l&&m&&m({action:d,location:G.location,delta:1})}function N(F,ie){d="REPLACE";let Z=Qg(G.location,F,ie);p=_();let $=vT(Z,p),fe=G.createHref(Z);c.replaceState($,"",fe),l&&m&&m({action:d,location:G.location,delta:0})}function q(F){return W1(F)}let G={get action(){return d},get location(){return r(a,c)},listen(F){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(_T,T),m=F,()=>{a.removeEventListener(_T,T),m=null}},createHref(F){return e(a,F)},createURL:q,encodeLocation(F){let ie=q(F);return{pathname:ie.pathname,search:ie.search,hash:ie.hash}},push:b,replace:N,go(F){return c.go(F)}};return G}function W1(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),mt(t,"No window.location.(origin|href) available to create URL");let i=typeof r=="string"?r:Ku(r);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function AS(r,e,t="/"){return Z1(r,e,t,!1)}function Z1(r,e,t,i){let a=typeof e=="string"?rl(e):e,l=tr(a.pathname||"/",t);if(l==null)return null;let c=bS(r);eR(c);let d=null;for(let m=0;d==null&&m<c.length;++m){let p=hR(l);d=uR(c[m],p,i)}return d}function bS(r,e=[],t=[],i="",a=!1){let l=(c,d,m=a,p)=>{let _={relativePath:p===void 0?c.path||"":p,caseSensitive:c.caseSensitive===!0,childrenIndex:d,route:c};if(_.relativePath.startsWith("/")){if(!_.relativePath.startsWith(i)&&m)return;mt(_.relativePath.startsWith(i),`Absolute route path "${_.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(i.length)}let T=Zi([i,_.relativePath]),b=t.concat(_);c.children&&c.children.length>0&&(mt(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${T}".`),bS(c.children,e,b,T,m)),!(c.path==null&&!c.index)&&e.push({path:T,score:oR(T,c.index),routesMeta:b})};return r.forEach((c,d)=>{if(c.path===""||!c.path?.includes("?"))l(c,d);else for(let m of wS(c.path))l(c,d,!0,m)}),e}function wS(r){let e=r.split("/");if(e.length===0)return[];let[t,...i]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(i.length===0)return a?[l,""]:[l];let c=wS(i.join("/")),d=[];return d.push(...c.map(m=>m===""?l:[l,m].join("/"))),a&&d.push(...c),d.map(m=>r.startsWith("/")&&m===""?"/":m)}function eR(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:lR(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var tR=/^:[\w-]+$/,nR=3,iR=2,rR=1,sR=10,aR=-2,ET=r=>r==="*";function oR(r,e){let t=r.split("/"),i=t.length;return t.some(ET)&&(i+=aR),e&&(i+=iR),t.filter(a=>!ET(a)).reduce((a,l)=>a+(tR.test(l)?nR:l===""?rR:sR),i)}function lR(r,e){return r.length===e.length&&r.slice(0,-1).every((i,a)=>i===e[a])?r[r.length-1]-e[e.length-1]:0}function uR(r,e,t=!1){let{routesMeta:i}=r,a={},l="/",c=[];for(let d=0;d<i.length;++d){let m=i[d],p=d===i.length-1,_=l==="/"?e:e.slice(l.length)||"/",T=Tf({path:m.relativePath,caseSensitive:m.caseSensitive,end:p},_),b=m.route;if(!T&&p&&t&&!i[i.length-1].route.index&&(T=Tf({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},_)),!T)return null;Object.assign(a,T.params),c.push({params:a,pathname:Zi([l,T.pathname]),pathnameBase:gR(Zi([l,T.pathnameBase])),route:b}),T.pathnameBase!=="/"&&(l=Zi([l,T.pathnameBase]))}return c}function Tf(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,i]=cR(r.path,r.caseSensitive,r.end),a=e.match(t);if(!a)return null;let l=a[0],c=l.replace(/(.)\/+$/,"$1"),d=a.slice(1);return{params:i.reduce((p,{paramName:_,isOptional:T},b)=>{if(_==="*"){let q=d[b]||"";c=l.slice(0,l.length-q.length).replace(/(.)\/+$/,"$1")}const N=d[b];return T&&!N?p[_]=void 0:p[_]=(N||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:c,pattern:r}}function cR(r,e=!1,t=!0){wi(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let i=[],a="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,d,m)=>(i.push({paramName:d,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(i.push({paramName:"*"}),a+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":r!==""&&r!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function hR(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return wi(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function tr(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=r.charAt(t);return i&&i!=="/"?null:r.slice(t)||"/"}function fR(r,e="/"){let{pathname:t,search:i="",hash:a=""}=typeof r=="string"?rl(r):r;return{pathname:t?t.startsWith("/")?t:dR(t,e):e,search:pR(i),hash:yR(a)}}function dR(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Ig(r,e,t,i){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function mR(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function IS(r){let e=mR(r);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function RS(r,e,t,i=!1){let a;typeof r=="string"?a=rl(r):(a={...r},mt(!a.pathname||!a.pathname.includes("?"),Ig("?","pathname","search",a)),mt(!a.pathname||!a.pathname.includes("#"),Ig("#","pathname","hash",a)),mt(!a.search||!a.search.includes("#"),Ig("#","search","hash",a)));let l=r===""||a.pathname==="",c=l?"/":a.pathname,d;if(c==null)d=t;else{let T=e.length-1;if(!i&&c.startsWith("..")){let b=c.split("/");for(;b[0]==="..";)b.shift(),T-=1;a.pathname=b.join("/")}d=T>=0?e[T]:"/"}let m=fR(a,d),p=c&&c!=="/"&&c.endsWith("/"),_=(l||c===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(p||_)&&(m.pathname+="/"),m}var Zi=r=>r.join("/").replace(/\/\/+/g,"/"),gR=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),pR=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,yR=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function _R(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}var CS=["POST","PUT","PATCH","DELETE"];new Set(CS);var vR=["GET",...CS];new Set(vR);var sl=z.createContext(null);sl.displayName="DataRouter";var $f=z.createContext(null);$f.displayName="DataRouterState";z.createContext(!1);var DS=z.createContext({isTransitioning:!1});DS.displayName="ViewTransition";var ER=z.createContext(new Map);ER.displayName="Fetchers";var TR=z.createContext(null);TR.displayName="Await";var Ri=z.createContext(null);Ri.displayName="Navigation";var fc=z.createContext(null);fc.displayName="Location";var or=z.createContext({outlet:null,matches:[],isDataRoute:!1});or.displayName="Route";var Mp=z.createContext(null);Mp.displayName="RouteError";function SR(r,{relative:e}={}){mt(dc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=z.useContext(Ri),{hash:a,pathname:l,search:c}=mc(r,{relative:e}),d=l;return t!=="/"&&(d=l==="/"?t:Zi([t,l])),i.createHref({pathname:d,search:c,hash:a})}function dc(){return z.useContext(fc)!=null}function Ci(){return mt(dc(),"useLocation() may be used only in the context of a <Router> component."),z.useContext(fc).location}var xS="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function NS(r){z.useContext(Ri).static||z.useLayoutEffect(r)}function Ra(){let{isDataRoute:r}=z.useContext(or);return r?PR():AR()}function AR(){mt(dc(),"useNavigate() may be used only in the context of a <Router> component.");let r=z.useContext(sl),{basename:e,navigator:t}=z.useContext(Ri),{matches:i}=z.useContext(or),{pathname:a}=Ci(),l=JSON.stringify(IS(i)),c=z.useRef(!1);return NS(()=>{c.current=!0}),z.useCallback((m,p={})=>{if(wi(c.current,xS),!c.current)return;if(typeof m=="number"){t.go(m);return}let _=RS(m,JSON.parse(l),a,p.relative==="path");r==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:Zi([e,_.pathname])),(p.replace?t.replace:t.push)(_,p.state,p)},[e,t,l,a,r])}z.createContext(null);function mc(r,{relative:e}={}){let{matches:t}=z.useContext(or),{pathname:i}=Ci(),a=JSON.stringify(IS(t));return z.useMemo(()=>RS(r,JSON.parse(a),i,e==="path"),[r,a,i,e])}function bR(r,e){return VS(r,e)}function VS(r,e,t,i,a){mt(dc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=z.useContext(Ri),{matches:c}=z.useContext(or),d=c[c.length-1],m=d?d.params:{},p=d?d.pathname:"/",_=d?d.pathnameBase:"/",T=d&&d.route;{let Z=T&&T.path||"";OS(p,!T||Z.endsWith("*")||Z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${Z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Z}"> to <Route path="${Z==="/"?"*":`${Z}/*`}">.`)}let b=Ci(),N;if(e){let Z=typeof e=="string"?rl(e):e;mt(_==="/"||Z.pathname?.startsWith(_),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${Z.pathname}" was given in the \`location\` prop.`),N=Z}else N=b;let q=N.pathname||"/",G=q;if(_!=="/"){let Z=_.replace(/^\//,"").split("/");G="/"+q.replace(/^\//,"").split("/").slice(Z.length).join("/")}let F=AS(r,{pathname:G});wi(T||F!=null,`No routes matched location "${N.pathname}${N.search}${N.hash}" `),wi(F==null||F[F.length-1].route.element!==void 0||F[F.length-1].route.Component!==void 0||F[F.length-1].route.lazy!==void 0,`Matched leaf route at location "${N.pathname}${N.search}${N.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let ie=DR(F&&F.map(Z=>Object.assign({},Z,{params:Object.assign({},m,Z.params),pathname:Zi([_,l.encodeLocation?l.encodeLocation(Z.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Z.pathname]),pathnameBase:Z.pathnameBase==="/"?_:Zi([_,l.encodeLocation?l.encodeLocation(Z.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Z.pathnameBase])})),c,t,i,a);return e&&ie?z.createElement(fc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...N},navigationType:"POP"}},ie):ie}function wR(){let r=MR(),e=_R(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",r),c=z.createElement(z.Fragment,null,z.createElement("p",null," Hey developer "),z.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",z.createElement("code",{style:l},"ErrorBoundary")," or"," ",z.createElement("code",{style:l},"errorElement")," prop on your route.")),z.createElement(z.Fragment,null,z.createElement("h2",null,"Unexpected Application Error!"),z.createElement("h3",{style:{fontStyle:"italic"}},e),t?z.createElement("pre",{style:a},t):null,c)}var IR=z.createElement(wR,null),RR=class extends z.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.unstable_onError?this.props.unstable_onError(r,e):console.error("React Router caught the following error during render",r)}render(){return this.state.error!==void 0?z.createElement(or.Provider,{value:this.props.routeContext},z.createElement(Mp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function CR({routeContext:r,match:e,children:t}){let i=z.useContext(sl);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),z.createElement(or.Provider,{value:r},t)}function DR(r,e=[],t=null,i=null,a=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let l=r,c=t?.errors;if(c!=null){let p=l.findIndex(_=>_.route.id&&c?.[_.route.id]!==void 0);mt(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,p+1))}let d=!1,m=-1;if(t)for(let p=0;p<l.length;p++){let _=l[p];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(m=p),_.route.id){let{loaderData:T,errors:b}=t,N=_.route.loader&&!T.hasOwnProperty(_.route.id)&&(!b||b[_.route.id]===void 0);if(_.route.lazy||N){d=!0,m>=0?l=l.slice(0,m+1):l=[l[0]];break}}}return l.reduceRight((p,_,T)=>{let b,N=!1,q=null,G=null;t&&(b=c&&_.route.id?c[_.route.id]:void 0,q=_.route.errorElement||IR,d&&(m<0&&T===0?(OS("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),N=!0,G=null):m===T&&(N=!0,G=_.route.hydrateFallbackElement||null)));let F=e.concat(l.slice(0,T+1)),ie=()=>{let Z;return b?Z=q:N?Z=G:_.route.Component?Z=z.createElement(_.route.Component,null):_.route.element?Z=_.route.element:Z=p,z.createElement(CR,{match:_,routeContext:{outlet:p,matches:F,isDataRoute:t!=null},children:Z})};return t&&(_.route.ErrorBoundary||_.route.errorElement||T===0)?z.createElement(RR,{location:t.location,revalidation:t.revalidation,component:q,error:b,children:ie(),routeContext:{outlet:null,matches:F,isDataRoute:!0},unstable_onError:i}):ie()},null)}function Pp(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function xR(r){let e=z.useContext(sl);return mt(e,Pp(r)),e}function NR(r){let e=z.useContext($f);return mt(e,Pp(r)),e}function VR(r){let e=z.useContext(or);return mt(e,Pp(r)),e}function kp(r){let e=VR(r),t=e.matches[e.matches.length-1];return mt(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function OR(){return kp("useRouteId")}function MR(){let r=z.useContext(Mp),e=NR("useRouteError"),t=kp("useRouteError");return r!==void 0?r:e.errors?.[t]}function PR(){let{router:r}=xR("useNavigate"),e=kp("useNavigate"),t=z.useRef(!1);return NS(()=>{t.current=!0}),z.useCallback(async(a,l={})=>{wi(t.current,xS),t.current&&(typeof a=="number"?r.navigate(a):await r.navigate(a,{fromRouteId:e,...l}))},[r,e])}var TT={};function OS(r,e,t){!e&&!TT[r]&&(TT[r]=!0,wi(!1,t))}z.memo(kR);function kR({routes:r,future:e,state:t,unstable_onError:i}){return VS(r,void 0,t,i,e)}function Du(r){mt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function LR({basename:r="/",children:e=null,location:t,navigationType:i="POP",navigator:a,static:l=!1}){mt(!dc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=r.replace(/^\/*/,"/"),d=z.useMemo(()=>({basename:c,navigator:a,static:l,future:{}}),[c,a,l]);typeof t=="string"&&(t=rl(t));let{pathname:m="/",search:p="",hash:_="",state:T=null,key:b="default"}=t,N=z.useMemo(()=>{let q=tr(m,c);return q==null?null:{location:{pathname:q,search:p,hash:_,state:T,key:b},navigationType:i}},[c,m,p,_,T,b,i]);return wi(N!=null,`<Router basename="${c}"> is not able to match the URL "${m}${p}${_}" because it does not start with the basename, so the <Router> won't render anything.`),N==null?null:z.createElement(Ri.Provider,{value:d},z.createElement(fc.Provider,{children:e,value:N}))}function UR({children:r,location:e}){return bR(Yg(r),e)}function Yg(r,e=[]){let t=[];return z.Children.forEach(r,(i,a)=>{if(!z.isValidElement(i))return;let l=[...e,a];if(i.type===z.Fragment){t.push.apply(t,Yg(i.props.children,l));return}mt(i.type===Du,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),mt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=Yg(i.props.children,l)),t.push(c)}),t}var nf="get",rf="application/x-www-form-urlencoded";function Xf(r){return r!=null&&typeof r.tagName=="string"}function BR(r){return Xf(r)&&r.tagName.toLowerCase()==="button"}function zR(r){return Xf(r)&&r.tagName.toLowerCase()==="form"}function jR(r){return Xf(r)&&r.tagName.toLowerCase()==="input"}function qR(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function FR(r,e){return r.button===0&&(!e||e==="_self")&&!qR(r)}var Kh=null;function HR(){if(Kh===null)try{new FormData(document.createElement("form"),0),Kh=!1}catch{Kh=!0}return Kh}var GR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Rg(r){return r!=null&&!GR.has(r)?(wi(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${rf}"`),null):r}function KR(r,e){let t,i,a,l,c;if(zR(r)){let d=r.getAttribute("action");i=d?tr(d,e):null,t=r.getAttribute("method")||nf,a=Rg(r.getAttribute("enctype"))||rf,l=new FormData(r)}else if(BR(r)||jR(r)&&(r.type==="submit"||r.type==="image")){let d=r.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=r.getAttribute("formaction")||d.getAttribute("action");if(i=m?tr(m,e):null,t=r.getAttribute("formmethod")||d.getAttribute("method")||nf,a=Rg(r.getAttribute("formenctype"))||Rg(d.getAttribute("enctype"))||rf,l=new FormData(d,r),!HR()){let{name:p,type:_,value:T}=r;if(_==="image"){let b=p?`${p}.`:"";l.append(`${b}x`,"0"),l.append(`${b}y`,"0")}else p&&l.append(p,T)}}else{if(Xf(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=nf,i=null,a=rf,c=r}return l&&a==="text/plain"&&(c=l,l=void 0),{action:i,method:t.toLowerCase(),encType:a,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Lp(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function QR(r,e,t){let i=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return i.pathname==="/"?i.pathname=`_root.${t}`:e&&tr(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${t}`,i}async function YR(r,e){if(r.id in e)return e[r.id];try{let t=await import(r.module);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function $R(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function XR(r,e,t){let i=await Promise.all(r.map(async a=>{let l=e.routes[a.route.id];if(l){let c=await YR(l,t);return c.links?c.links():[]}return[]}));return eC(i.flat(1).filter($R).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function ST(r,e,t,i,a,l){let c=(m,p)=>t[p]?m.route.id!==t[p].route.id:!0,d=(m,p)=>t[p].pathname!==m.pathname||t[p].route.path?.endsWith("*")&&t[p].params["*"]!==m.params["*"];return l==="assets"?e.filter((m,p)=>c(m,p)||d(m,p)):l==="data"?e.filter((m,p)=>{let _=i.routes[m.route.id];if(!_||!_.hasLoader)return!1;if(c(m,p)||d(m,p))return!0;if(m.route.shouldRevalidate){let T=m.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function JR(r,e,{includeHydrateFallback:t}={}){return WR(r.map(i=>{let a=e.routes[i.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function WR(r){return[...new Set(r)]}function ZR(r){let e={},t=Object.keys(r).sort();for(let i of t)e[i]=r[i];return e}function eC(r,e){let t=new Set;return new Set(e),r.reduce((i,a)=>{let l=JSON.stringify(ZR(a));return t.has(l)||(t.add(l),i.push({key:l,link:a})),i},[])}function MS(){let r=z.useContext(sl);return Lp(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function tC(){let r=z.useContext($f);return Lp(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var Up=z.createContext(void 0);Up.displayName="FrameworkContext";function PS(){let r=z.useContext(Up);return Lp(r,"You must render this element inside a <HydratedRouter> element"),r}function nC(r,e){let t=z.useContext(Up),[i,a]=z.useState(!1),[l,c]=z.useState(!1),{onFocus:d,onBlur:m,onMouseEnter:p,onMouseLeave:_,onTouchStart:T}=e,b=z.useRef(null);z.useEffect(()=>{if(r==="render"&&c(!0),r==="viewport"){let G=ie=>{ie.forEach(Z=>{c(Z.isIntersecting)})},F=new IntersectionObserver(G,{threshold:.5});return b.current&&F.observe(b.current),()=>{F.disconnect()}}},[r]),z.useEffect(()=>{if(i){let G=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(G)}}},[i]);let N=()=>{a(!0)},q=()=>{a(!1),c(!1)};return t?r!=="intent"?[l,b,{}]:[l,b,{onFocus:Au(d,N),onBlur:Au(m,q),onMouseEnter:Au(p,N),onMouseLeave:Au(_,q),onTouchStart:Au(T,N)}]:[!1,b,{}]}function Au(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function iC({page:r,...e}){let{router:t}=MS(),i=z.useMemo(()=>AS(t.routes,r,t.basename),[t.routes,r,t.basename]);return i?z.createElement(sC,{page:r,matches:i,...e}):null}function rC(r){let{manifest:e,routeModules:t}=PS(),[i,a]=z.useState([]);return z.useEffect(()=>{let l=!1;return XR(r,e,t).then(c=>{l||a(c)}),()=>{l=!0}},[r,e,t]),i}function sC({page:r,matches:e,...t}){let i=Ci(),{manifest:a,routeModules:l}=PS(),{basename:c}=MS(),{loaderData:d,matches:m}=tC(),p=z.useMemo(()=>ST(r,e,m,a,i,"data"),[r,e,m,a,i]),_=z.useMemo(()=>ST(r,e,m,a,i,"assets"),[r,e,m,a,i]),T=z.useMemo(()=>{if(r===i.pathname+i.search+i.hash)return[];let q=new Set,G=!1;if(e.forEach(ie=>{let Z=a.routes[ie.route.id];!Z||!Z.hasLoader||(!p.some($=>$.route.id===ie.route.id)&&ie.route.id in d&&l[ie.route.id]?.shouldRevalidate||Z.hasClientLoader?G=!0:q.add(ie.route.id))}),q.size===0)return[];let F=QR(r,c,"data");return G&&q.size>0&&F.searchParams.set("_routes",e.filter(ie=>q.has(ie.route.id)).map(ie=>ie.route.id).join(",")),[F.pathname+F.search]},[c,d,i,a,p,e,r,l]),b=z.useMemo(()=>JR(_,a),[_,a]),N=rC(_);return z.createElement(z.Fragment,null,T.map(q=>z.createElement("link",{key:q,rel:"prefetch",as:"fetch",href:q,...t})),b.map(q=>z.createElement("link",{key:q,rel:"modulepreload",href:q,...t})),N.map(({key:q,link:G})=>z.createElement("link",{key:q,nonce:t.nonce,...G})))}function aC(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var kS=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{kS&&(window.__reactRouterVersion="7.9.3")}catch{}function oC({basename:r,children:e,window:t}){let i=z.useRef();i.current==null&&(i.current=$1({window:t,v5Compat:!0}));let a=i.current,[l,c]=z.useState({action:a.action,location:a.location}),d=z.useCallback(m=>{z.startTransition(()=>c(m))},[c]);return z.useLayoutEffect(()=>a.listen(d),[a,d]),z.createElement(LR,{basename:r,children:e,location:l.location,navigationType:l.action,navigator:a})}var LS=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,US=z.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:a,reloadDocument:l,replace:c,state:d,target:m,to:p,preventScrollReset:_,viewTransition:T,...b},N){let{basename:q}=z.useContext(Ri),G=typeof p=="string"&&LS.test(p),F,ie=!1;if(typeof p=="string"&&G&&(F=p,kS))try{let I=new URL(window.location.href),M=p.startsWith("//")?new URL(I.protocol+p):new URL(p),V=tr(M.pathname,q);M.origin===I.origin&&V!=null?p=V+M.search+M.hash:ie=!0}catch{wi(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Z=SR(p,{relative:a}),[$,fe,se]=nC(i,b),de=hC(p,{replace:c,state:d,target:m,preventScrollReset:_,relative:a,viewTransition:T});function D(I){e&&e(I),I.defaultPrevented||de(I)}let w=z.createElement("a",{...b,...se,href:F||Z,onClick:ie||l?e:D,ref:aC(N,fe),target:m,"data-discover":!G&&t==="render"?"true":void 0});return $&&!G?z.createElement(z.Fragment,null,w,z.createElement(iC,{page:Z})):w});US.displayName="Link";var lC=z.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:a=!1,style:l,to:c,viewTransition:d,children:m,...p},_){let T=mc(c,{relative:p.relative}),b=Ci(),N=z.useContext($f),{navigator:q,basename:G}=z.useContext(Ri),F=N!=null&&pC(T)&&d===!0,ie=q.encodeLocation?q.encodeLocation(T).pathname:T.pathname,Z=b.pathname,$=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;t||(Z=Z.toLowerCase(),$=$?$.toLowerCase():null,ie=ie.toLowerCase()),$&&G&&($=tr($,G)||$);const fe=ie!=="/"&&ie.endsWith("/")?ie.length-1:ie.length;let se=Z===ie||!a&&Z.startsWith(ie)&&Z.charAt(fe)==="/",de=$!=null&&($===ie||!a&&$.startsWith(ie)&&$.charAt(ie.length)==="/"),D={isActive:se,isPending:de,isTransitioning:F},w=se?e:void 0,I;typeof i=="function"?I=i(D):I=[i,se?"active":null,de?"pending":null,F?"transitioning":null].filter(Boolean).join(" ");let M=typeof l=="function"?l(D):l;return z.createElement(US,{...p,"aria-current":w,className:I,ref:_,style:M,to:c,viewTransition:d},typeof m=="function"?m(D):m)});lC.displayName="NavLink";var uC=z.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:a,state:l,method:c=nf,action:d,onSubmit:m,relative:p,preventScrollReset:_,viewTransition:T,...b},N)=>{let q=mC(),G=gC(d,{relative:p}),F=c.toLowerCase()==="get"?"get":"post",ie=typeof d=="string"&&LS.test(d),Z=$=>{if(m&&m($),$.defaultPrevented)return;$.preventDefault();let fe=$.nativeEvent.submitter,se=fe?.getAttribute("formmethod")||c;q(fe||$.currentTarget,{fetcherKey:e,method:se,navigate:t,replace:a,state:l,relative:p,preventScrollReset:_,viewTransition:T})};return z.createElement("form",{ref:N,method:F,action:G,onSubmit:i?m:Z,...b,"data-discover":!ie&&r==="render"?"true":void 0})});uC.displayName="Form";function cC(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function BS(r){let e=z.useContext(sl);return mt(e,cC(r)),e}function hC(r,{target:e,replace:t,state:i,preventScrollReset:a,relative:l,viewTransition:c}={}){let d=Ra(),m=Ci(),p=mc(r,{relative:l});return z.useCallback(_=>{if(FR(_,e)){_.preventDefault();let T=t!==void 0?t:Ku(m)===Ku(p);d(r,{replace:T,state:i,preventScrollReset:a,relative:l,viewTransition:c})}},[m,d,p,t,i,e,r,a,l,c])}var fC=0,dC=()=>`__${String(++fC)}__`;function mC(){let{router:r}=BS("useSubmit"),{basename:e}=z.useContext(Ri),t=OR();return z.useCallback(async(i,a={})=>{let{action:l,method:c,encType:d,formData:m,body:p}=KR(i,e);if(a.navigate===!1){let _=a.fetcherKey||dC();await r.fetch(_,t,a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:p,formMethod:a.method||c,formEncType:a.encType||d,flushSync:a.flushSync})}else await r.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:m,body:p,formMethod:a.method||c,formEncType:a.encType||d,replace:a.replace,state:a.state,fromRouteId:t,flushSync:a.flushSync,viewTransition:a.viewTransition})},[r,e,t])}function gC(r,{relative:e}={}){let{basename:t}=z.useContext(Ri),i=z.useContext(or);mt(i,"useFormAction must be used inside a RouteContext");let[a]=i.matches.slice(-1),l={...mc(r||".",{relative:e})},c=Ci();if(r==null){l.search=c.search;let d=new URLSearchParams(l.search),m=d.getAll("index");if(m.some(_=>_==="")){d.delete("index"),m.filter(T=>T).forEach(T=>d.append("index",T));let _=d.toString();l.search=_?`?${_}`:""}}return(!r||r===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Zi([t,l.pathname])),Ku(l)}function pC(r,{relative:e}={}){let t=z.useContext(DS);mt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=BS("useViewTransitionState"),a=mc(r,{relative:e});if(!t.isTransitioning)return!1;let l=tr(t.currentLocation.pathname,i)||t.currentLocation.pathname,c=tr(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Tf(a.pathname,c)!=null||Tf(a.pathname,l)!=null}const zS=[{id:"entertainment",name:"Entertainment",categoryIds:[11,12,14,15,29,31,32,26],specifics:[{id:31,name:"Anime & Manga"},{id:15,name:"Video Games"},{id:11,name:"Film"},{id:14,name:"Television"},{id:12,name:"Music"}]},{id:"science",name:"Science & Tech",categoryIds:[17,18,19,27,28],specifics:[{id:17,name:"Science & Nature"},{id:18,name:"Computers"},{id:19,name:"Mathematics"},{id:27,name:"Animals"}]},{id:"history_geo",name:"History & Geography",categoryIds:[23,22,24],specifics:[{id:23,name:"History"},{id:22,name:"Geography"}]},{id:"arts_lit",name:"Arts & Literature",categoryIds:[10,25,13,29],specifics:[{id:10,name:"Books / Literature"},{id:25,name:"Art"}]},{id:"sports",name:"Sports",categoryIds:[21],specifics:[]},{id:"general",name:"General Knowledge",categoryIds:[9,16,20],specifics:[]}],$g={id:"any",name:"Any Topic",categoryIds:[],specifics:[]};function jS(){return[$g,...zS]}function Qu(r){return!r||r==="any"?$g:zS.find(e=>e.id===r)||$g}const yC=()=>{};var AT={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS=function(r){const e=[];let t=0;for(let i=0;i<r.length;i++){let a=r.charCodeAt(i);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&i+1<r.length&&(r.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(r.charCodeAt(++i)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},_C=function(r){const e=[];let t=0,i=0;for(;t<r.length;){const a=r[t++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=r[t++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=r[t++],c=r[t++],d=r[t++],m=((a&7)<<18|(l&63)<<12|(c&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const l=r[t++],c=r[t++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|c&63)}}return e.join("")},FS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<r.length;a+=3){const l=r[a],c=a+1<r.length,d=c?r[a+1]:0,m=a+2<r.length,p=m?r[a+2]:0,_=l>>2,T=(l&3)<<4|d>>4;let b=(d&15)<<2|p>>6,N=p&63;m||(N=64,c||(b=64)),i.push(t[_],t[T],t[b],t[N])}return i.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(qS(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):_C(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<r.length;){const l=t[r.charAt(a++)],d=a<r.length?t[r.charAt(a)]:0;++a;const p=a<r.length?t[r.charAt(a)]:64;++a;const T=a<r.length?t[r.charAt(a)]:64;if(++a,l==null||d==null||p==null||T==null)throw new vC;const b=l<<2|d>>4;if(i.push(b),p!==64){const N=d<<4&240|p>>2;if(i.push(N),T!==64){const q=p<<6&192|T;i.push(q)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class vC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const EC=function(r){const e=qS(r);return FS.encodeByteArray(e,!0)},HS=function(r){return EC(r).replace(/\./g,"")},GS=function(r){try{return FS.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC=()=>KS().__FIREBASE_DEFAULTS__,SC=()=>{if(typeof process>"u"||typeof AT>"u")return;const r=AT.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},AC=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&GS(r[1]);return e&&JSON.parse(e)},Jf=()=>{try{return yC()||TC()||SC()||AC()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},bC=r=>Jf()?.emulatorHosts?.[r],QS=()=>Jf()?.config,YS=r=>Jf()?.[`_${r}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function al(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function $S(r){return(await fetch(r,{credentials:"include"})).ok}const Pu={};function IC(){const r={prod:[],emulator:[]};for(const e of Object.keys(Pu))Pu[e]?r.emulator.push(e):r.prod.push(e);return r}function RC(r){let e=document.getElementById(r),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),t=!0),{created:t,element:e}}let bT=!1;function CC(r,e){if(typeof window>"u"||typeof document>"u"||!al(window.location.host)||Pu[r]===e||Pu[r]||bT)return;Pu[r]=e;function t(b){return`__firebase__banner__${b}`}const i="__firebase__banner",l=IC().prod.length>0;function c(){const b=document.getElementById(i);b&&b.remove()}function d(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function m(b,N){b.setAttribute("width","24"),b.setAttribute("id",N),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function p(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{bT=!0,c()},b}function _(b,N){b.setAttribute("id",N),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function T(){const b=RC(i),N=t("text"),q=document.getElementById(N)||document.createElement("span"),G=t("learnmore"),F=document.getElementById(G)||document.createElement("a"),ie=t("preprendIcon"),Z=document.getElementById(ie)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const $=b.element;d($),_(F,G);const fe=p();m(Z,ie),$.append(Z,q,F,fe),document.body.appendChild($)}l?(q.innerText="Preview backend disconnected.",Z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,q.innerText="Preview backend running in this workspace."),q.setAttribute("id",N)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function DC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pt())}function XS(){const r=Jf()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function xC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function NC(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function VC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function OC(){const r=Pt();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function JS(){return!XS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function WS(){return!XS()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function ZS(){try{return typeof indexedDB=="object"}catch{return!1}}function MC(){return new Promise((r,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(i),r(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC="FirebaseError";class lr extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=PC,Object.setPrototypeOf(this,lr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gc.prototype.create)}}class gc{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],c=l?kC(l,i):"Error",d=`${this.serviceName}: ${c} (${a}).`;return new lr(a,d,i)}}function kC(r,e){return r.replace(LC,(t,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const LC=/\{\$([^}]+)}/g;function UC(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function ya(r,e){if(r===e)return!0;const t=Object.keys(r),i=Object.keys(e);for(const a of t){if(!i.includes(a))return!1;const l=r[a],c=e[a];if(wT(l)&&wT(c)){if(!ya(l,c))return!1}else if(l!==c)return!1}for(const a of i)if(!t.includes(a))return!1;return!0}function wT(r){return r!==null&&typeof r=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pc(r){const e=[];for(const[t,i]of Object.entries(r))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function BC(r,e){const t=new zC(r,e);return t.subscribe.bind(t)}class zC{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let a;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");jC(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:i},a.next===void 0&&(a.next=Cg),a.error===void 0&&(a.error=Cg),a.complete===void 0&&(a.complete=Cg);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function jC(r,e){if(typeof r!="object"||r===null)return!1;for(const t of e)if(t in r&&typeof r[t]=="function")return!0;return!1}function Cg(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(r){return r&&r._delegate?r._delegate:r}class _a{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new wC;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),i=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(a){if(i)return null;throw a}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(HC(e))try{this.getOrInitializeService({instanceIdentifier:ra})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=ra){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ra){return this.instances.has(e)}getOptions(e=ra){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[l,c]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(l);i===d&&c.resolve(a)}return a}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),a=this.onInitCallbacks.get(i)??new Set;a.add(e),this.onInitCallbacks.set(i,a);const l=this.instances.get(i);return l&&e(l,i),()=>{a.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const a of i)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:FC(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ra){return this.component?this.component.multipleInstances?e:ra:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function FC(r){return r===ra?void 0:r}function HC(r){return r.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new qC(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Le||(Le={}));const KC={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},QC=Le.INFO,YC={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},$C=(r,e,...t)=>{if(e<r.logLevel)return;const i=new Date().toISOString(),a=YC[e];if(a)console[a](`[${i}]  ${r.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Bp{constructor(e){this.name=e,this._logLevel=QC,this._logHandler=$C,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?KC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const XC=(r,e)=>e.some(t=>r instanceof t);let IT,RT;function JC(){return IT||(IT=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function WC(){return RT||(RT=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const eA=new WeakMap,Xg=new WeakMap,tA=new WeakMap,Dg=new WeakMap,zp=new WeakMap;function ZC(r){const e=new Promise((t,i)=>{const a=()=>{r.removeEventListener("success",l),r.removeEventListener("error",c)},l=()=>{t(rs(r.result)),a()},c=()=>{i(r.error),a()};r.addEventListener("success",l),r.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&eA.set(t,r)}).catch(()=>{}),zp.set(e,r),e}function eD(r){if(Xg.has(r))return;const e=new Promise((t,i)=>{const a=()=>{r.removeEventListener("complete",l),r.removeEventListener("error",c),r.removeEventListener("abort",c)},l=()=>{t(),a()},c=()=>{i(r.error||new DOMException("AbortError","AbortError")),a()};r.addEventListener("complete",l),r.addEventListener("error",c),r.addEventListener("abort",c)});Xg.set(r,e)}let Jg={get(r,e,t){if(r instanceof IDBTransaction){if(e==="done")return Xg.get(r);if(e==="objectStoreNames")return r.objectStoreNames||tA.get(r);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return rs(r[e])},set(r,e,t){return r[e]=t,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function tD(r){Jg=r(Jg)}function nD(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=r.call(xg(this),e,...t);return tA.set(i,e.sort?e.sort():[e]),rs(i)}:WC().includes(r)?function(...e){return r.apply(xg(this),e),rs(eA.get(this))}:function(...e){return rs(r.apply(xg(this),e))}}function iD(r){return typeof r=="function"?nD(r):(r instanceof IDBTransaction&&eD(r),XC(r,JC())?new Proxy(r,Jg):r)}function rs(r){if(r instanceof IDBRequest)return ZC(r);if(Dg.has(r))return Dg.get(r);const e=iD(r);return e!==r&&(Dg.set(r,e),zp.set(e,r)),e}const xg=r=>zp.get(r);function rD(r,e,{blocked:t,upgrade:i,blocking:a,terminated:l}={}){const c=indexedDB.open(r,e),d=rs(c);return i&&c.addEventListener("upgradeneeded",m=>{i(rs(c.result),m.oldVersion,m.newVersion,rs(c.transaction),m)}),t&&c.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),d.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),d}const sD=["get","getKey","getAll","getAllKeys","count"],aD=["put","add","delete","clear"],Ng=new Map;function CT(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Ng.get(e))return Ng.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,a=aD.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(a||sD.includes(t)))return;const l=async function(c,...d){const m=this.transaction(c,a?"readwrite":"readonly");let p=m.store;return i&&(p=p.index(d.shift())),(await Promise.all([p[t](...d),a&&m.done]))[0]};return Ng.set(e,l),l}tD(r=>({...r,get:(e,t,i)=>CT(e,t)||r.get(e,t,i),has:(e,t)=>!!CT(e,t)||r.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(lD(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function lD(r){return r.getComponent()?.type==="VERSION"}const Wg="@firebase/app",DT="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nr=new Bp("@firebase/app"),uD="@firebase/app-compat",cD="@firebase/analytics-compat",hD="@firebase/analytics",fD="@firebase/app-check-compat",dD="@firebase/app-check",mD="@firebase/auth",gD="@firebase/auth-compat",pD="@firebase/database",yD="@firebase/data-connect",_D="@firebase/database-compat",vD="@firebase/functions",ED="@firebase/functions-compat",TD="@firebase/installations",SD="@firebase/installations-compat",AD="@firebase/messaging",bD="@firebase/messaging-compat",wD="@firebase/performance",ID="@firebase/performance-compat",RD="@firebase/remote-config",CD="@firebase/remote-config-compat",DD="@firebase/storage",xD="@firebase/storage-compat",ND="@firebase/firestore",VD="@firebase/ai",OD="@firebase/firestore-compat",MD="firebase",PD="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zg="[DEFAULT]",kD={[Wg]:"fire-core",[uD]:"fire-core-compat",[hD]:"fire-analytics",[cD]:"fire-analytics-compat",[dD]:"fire-app-check",[fD]:"fire-app-check-compat",[mD]:"fire-auth",[gD]:"fire-auth-compat",[pD]:"fire-rtdb",[yD]:"fire-data-connect",[_D]:"fire-rtdb-compat",[vD]:"fire-fn",[ED]:"fire-fn-compat",[TD]:"fire-iid",[SD]:"fire-iid-compat",[AD]:"fire-fcm",[bD]:"fire-fcm-compat",[wD]:"fire-perf",[ID]:"fire-perf-compat",[RD]:"fire-rc",[CD]:"fire-rc-compat",[DD]:"fire-gcs",[xD]:"fire-gcs-compat",[ND]:"fire-fst",[OD]:"fire-fst-compat",[VD]:"fire-vertex","fire-js":"fire-js",[MD]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sf=new Map,LD=new Map,ep=new Map;function xT(r,e){try{r.container.addComponent(e)}catch(t){nr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,t)}}function Bo(r){const e=r.name;if(ep.has(e))return nr.debug(`There were multiple attempts to register component ${e}.`),!1;ep.set(e,r);for(const t of Sf.values())xT(t,r);for(const t of LD.values())xT(t,r);return!0}function jp(r,e){const t=r.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),r.container.getProvider(e)}function ti(r){return r==null?!1:r.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UD={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ss=new gc("app","Firebase",UD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new _a("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ss.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ol=PD;function nA(r,e={}){let t=r;typeof e!="object"&&(e={name:e});const i={name:Zg,automaticDataCollectionEnabled:!0,...e},a=i.name;if(typeof a!="string"||!a)throw ss.create("bad-app-name",{appName:String(a)});if(t||(t=QS()),!t)throw ss.create("no-options");const l=Sf.get(a);if(l){if(ya(t,l.options)&&ya(i,l.config))return l;throw ss.create("duplicate-app",{appName:a})}const c=new GC(a);for(const m of ep.values())c.addComponent(m);const d=new BD(t,i,c);return Sf.set(a,d),d}function zD(r=Zg){const e=Sf.get(r);if(!e&&r===Zg&&QS())return nA();if(!e)throw ss.create("no-app",{appName:r});return e}function as(r,e,t){let i=kD[r]??r;t&&(i+=`-${t}`);const a=i.match(/\s|\//),l=e.match(/\s|\//);if(a||l){const c=[`Unable to register library "${i}" with version "${e}":`];a&&c.push(`library name "${i}" contains illegal characters (whitespace or "/")`),a&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),nr.warn(c.join(" "));return}Bo(new _a(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jD="firebase-heartbeat-database",qD=1,Yu="firebase-heartbeat-store";let Vg=null;function iA(){return Vg||(Vg=rD(jD,qD,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(Yu)}catch(t){console.warn(t)}}}}).catch(r=>{throw ss.create("idb-open",{originalErrorMessage:r.message})})),Vg}async function FD(r){try{const t=(await iA()).transaction(Yu),i=await t.objectStore(Yu).get(rA(r));return await t.done,i}catch(e){if(e instanceof lr)nr.warn(e.message);else{const t=ss.create("idb-get",{originalErrorMessage:e?.message});nr.warn(t.message)}}}async function NT(r,e){try{const i=(await iA()).transaction(Yu,"readwrite");await i.objectStore(Yu).put(e,rA(r)),await i.done}catch(t){if(t instanceof lr)nr.warn(t.message);else{const i=ss.create("idb-set",{originalErrorMessage:t?.message});nr.warn(i.message)}}}function rA(r){return`${r.name}!${r.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HD=1024,GD=30;class KD{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new YD(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=VT();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:t}),this._heartbeatsCache.heartbeats.length>GD){const a=$D(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){nr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=VT(),{heartbeatsToSend:t,unsentEntries:i}=QD(this._heartbeatsCache.heartbeats),a=HS(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return nr.warn(e),""}}}function VT(){return new Date().toISOString().substring(0,10)}function QD(r,e=HD){const t=[];let i=r.slice();for(const a of r){const l=t.find(c=>c.agent===a.agent);if(l){if(l.dates.push(a.date),OT(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),OT(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class YD{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ZS()?MC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await FD(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return NT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return NT(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function OT(r){return HS(JSON.stringify({version:2,heartbeats:r})).length}function $D(r){if(r.length===0)return-1;let e=0,t=r[0].date;for(let i=1;i<r.length;i++)r[i].date<t&&(t=r[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XD(r){Bo(new _a("platform-logger",e=>new oD(e),"PRIVATE")),Bo(new _a("heartbeat",e=>new KD(e),"PRIVATE")),as(Wg,DT,r),as(Wg,DT,"esm2020"),as("fire-js","")}XD("");var JD="firebase",WD="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */as(JD,WD,"app");function sA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ZD=sA,aA=new gc("auth","Firebase",sA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Af=new Bp("@firebase/auth");function e2(r,...e){Af.logLevel<=Le.WARN&&Af.warn(`Auth (${ol}): ${r}`,...e)}function sf(r,...e){Af.logLevel<=Le.ERROR&&Af.error(`Auth (${ol}): ${r}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ir(r,...e){throw qp(r,...e)}function Ti(r,...e){return qp(r,...e)}function oA(r,e,t){const i={...ZD(),[e]:t};return new gc("auth","Firebase",i).create(e,{appName:r.name})}function os(r){return oA(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qp(r,...e){if(typeof r!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=r.name),r._errorFactory.create(t,...i)}return aA.create(r,...e)}function Ie(r,e,...t){if(!r)throw qp(e,...t)}function Xi(r){const e="INTERNAL ASSERTION FAILED: "+r;throw sf(e),new Error(e)}function rr(r,e){r||Xi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tp(){return typeof self<"u"&&self.location?.href||""}function t2(){return MT()==="http:"||MT()==="https:"}function MT(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n2(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(t2()||NC()||"connection"in navigator)?navigator.onLine:!0}function i2(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,t){this.shortDelay=e,this.longDelay=t,rr(t>e,"Short delay should be less than long delay!"),this.isMobile=DC()||VC()}get(){return n2()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fp(r,e){rr(r.emulator,"Emulator should always be set here");const{url:t}=r.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s2=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],a2=new yc(3e4,6e4);function Wf(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function ll(r,e,t,i,a={}){return uA(r,a,async()=>{let l={},c={};i&&(e==="GET"?c=i:l={body:JSON.stringify(i)});const d=pc({key:r.config.apiKey,...c}).slice(1),m=await r._getAdditionalHeaders();m["Content-Type"]="application/json",r.languageCode&&(m["X-Firebase-Locale"]=r.languageCode);const p={method:e,headers:m,...l};return xC()||(p.referrerPolicy="no-referrer"),r.emulatorConfig&&al(r.emulatorConfig.host)&&(p.credentials="include"),lA.fetch()(await hA(r,r.config.apiHost,t,d),p)})}async function uA(r,e,t){r._canInitEmulator=!1;const i={...r2,...e};try{const a=new o2(r),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw Qh(r,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const d=l.ok?c.errorMessage:c.error.message,[m,p]=d.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw Qh(r,"credential-already-in-use",c);if(m==="EMAIL_EXISTS")throw Qh(r,"email-already-in-use",c);if(m==="USER_DISABLED")throw Qh(r,"user-disabled",c);const _=i[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw oA(r,_,p);ir(r,_)}}catch(a){if(a instanceof lr)throw a;ir(r,"network-request-failed",{message:String(a)})}}async function cA(r,e,t,i,a={}){const l=await ll(r,e,t,i,a);return"mfaPendingCredential"in l&&ir(r,"multi-factor-auth-required",{_serverResponse:l}),l}async function hA(r,e,t,i){const a=`${e}${t}?${i}`,l=r,c=l.config.emulator?Fp(r.config,a):`${r.config.apiScheme}://${a}`;return s2.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}class o2{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Ti(this.auth,"network-request-failed")),a2.get())})}}function Qh(r,e,t){const i={appName:r.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const a=Ti(r,e,i);return a.customData._tokenResponse=t,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l2(r,e){return ll(r,"POST","/v1/accounts:delete",e)}async function bf(r,e){return ll(r,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ku(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function u2(r,e=!1){const t=Rn(r),i=await t.getIdToken(e),a=Hp(i);Ie(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,c=l?.sign_in_provider;return{claims:a,token:i,authTime:ku(Og(a.auth_time)),issuedAtTime:ku(Og(a.iat)),expirationTime:ku(Og(a.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function Og(r){return Number(r)*1e3}function Hp(r){const[e,t,i]=r.split(".");if(e===void 0||t===void 0||i===void 0)return sf("JWT malformed, contained fewer than 3 sections"),null;try{const a=GS(t);return a?JSON.parse(a):(sf("Failed to decode base64 JWT payload"),null)}catch(a){return sf("Caught error parsing JWT payload as JSON",a?.toString()),null}}function PT(r){const e=Hp(r);return Ie(e,"internal-error"),Ie(typeof e.exp<"u","internal-error"),Ie(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $u(r,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof lr&&c2(i)&&r.auth.currentUser===r&&await r.auth.signOut(),i}}function c2({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ku(this.lastLoginAt),this.creationTime=ku(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wf(r){const e=r.auth,t=await r.getIdToken(),i=await $u(r,bf(e,{idToken:t}));Ie(i?.users.length,e,"internal-error");const a=i.users[0];r._notifyReloadListener(a);const l=a.providerUserInfo?.length?fA(a.providerUserInfo):[],c=d2(r.providerData,l),d=r.isAnonymous,m=!(r.email&&a.passwordHash)&&!c?.length,p=d?m:!1,_={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:c,metadata:new np(a.createdAt,a.lastLoginAt),isAnonymous:p};Object.assign(r,_)}async function f2(r){const e=Rn(r);await wf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function d2(r,e){return[...r.filter(i=>!e.some(a=>a.providerId===i.providerId)),...e]}function fA(r){return r.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m2(r,e){const t=await uA(r,{},async()=>{const i=pc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=r.config,c=await hA(r,a,"/v1/token",`key=${l}`),d=await r._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:d,body:i};return r.emulatorConfig&&al(r.emulatorConfig.host)&&(m.credentials="include"),lA.fetch()(c,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function g2(r,e){return ll(r,"POST","/v2/accounts:revokeToken",Wf(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ie(e.idToken,"internal-error"),Ie(typeof e.idToken<"u","internal-error"),Ie(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):PT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ie(e.length!==0,"internal-error");const t=PT(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ie(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:a,expiresIn:l}=await m2(e,t);this.updateTokensAndExpiration(i,a,Number(l))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:a,expirationTime:l}=t,c=new Mo;return i&&(Ie(typeof i=="string","internal-error",{appName:e}),c.refreshToken=i),a&&(Ie(typeof a=="string","internal-error",{appName:e}),c.accessToken=a),l&&(Ie(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Mo,this.toJSON())}_performRefresh(){return Xi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yr(r,e){Ie(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class ni{constructor({uid:e,auth:t,stsTokenManager:i,...a}){this.providerId="firebase",this.proactiveRefresh=new h2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new np(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const t=await $u(this,this.stsTokenManager.getToken(this.auth,e));return Ie(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return u2(this,e)}reload(){return f2(this)}_assign(e){this!==e&&(Ie(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ni({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){Ie(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await wf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ti(this.auth.app))return Promise.reject(os(this.auth));const e=await this.getIdToken();return await $u(this,l2(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,a=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,d=t.tenantId??void 0,m=t._redirectEventId??void 0,p=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:T,emailVerified:b,isAnonymous:N,providerData:q,stsTokenManager:G}=t;Ie(T&&G,e,"internal-error");const F=Mo.fromJSON(this.name,G);Ie(typeof T=="string",e,"internal-error"),Yr(i,e.name),Yr(a,e.name),Ie(typeof b=="boolean",e,"internal-error"),Ie(typeof N=="boolean",e,"internal-error"),Yr(l,e.name),Yr(c,e.name),Yr(d,e.name),Yr(m,e.name),Yr(p,e.name),Yr(_,e.name);const ie=new ni({uid:T,auth:e,email:a,emailVerified:b,displayName:i,isAnonymous:N,photoURL:c,phoneNumber:l,tenantId:d,stsTokenManager:F,createdAt:p,lastLoginAt:_});return q&&Array.isArray(q)&&(ie.providerData=q.map(Z=>({...Z}))),m&&(ie._redirectEventId=m),ie}static async _fromIdTokenResponse(e,t,i=!1){const a=new Mo;a.updateFromServerResponse(t);const l=new ni({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:i});return await wf(l),l}static async _fromGetAccountInfoResponse(e,t,i){const a=t.users[0];Ie(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?fA(a.providerUserInfo):[],c=!(a.email&&a.passwordHash)&&!l?.length,d=new Mo;d.updateFromIdToken(i);const m=new ni({uid:a.localId,auth:e,stsTokenManager:d,isAnonymous:c}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new np(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!l?.length};return Object.assign(m,p),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kT=new Map;function Ji(r){rr(r instanceof Function,"Expected a class definition");let e=kT.get(r);return e?(rr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,kT.set(r,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}dA.type="NONE";const LT=dA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function af(r,e,t){return`firebase:${r}:${e}:${t}`}class Po{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:a,name:l}=this.auth;this.fullUserKey=af(this.userKey,a.apiKey,l),this.fullPersistenceKey=af("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await bf(this.auth,{idToken:e}).catch(()=>{});return t?ni._fromGetAccountInfoResponse(this.auth,t,e):null}return ni._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Po(Ji(LT),e,i);const a=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=a[0]||Ji(LT);const c=af(i,e.config.apiKey,e.name);let d=null;for(const p of t)try{const _=await p._get(c);if(_){let T;if(typeof _=="string"){const b=await bf(e,{idToken:_}).catch(()=>{});if(!b)break;T=await ni._fromGetAccountInfoResponse(e,b,_)}else T=ni._fromJSON(e,_);p!==l&&(d=T),l=p;break}}catch{}const m=a.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new Po(l,e,i):(l=m[0],d&&await l._set(c,d.toJSON()),await Promise.all(t.map(async p=>{if(p!==l)try{await p._remove(c)}catch{}})),new Po(l,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UT(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(yA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(mA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(vA(e))return"Blackberry";if(EA(e))return"Webos";if(gA(e))return"Safari";if((e.includes("chrome/")||pA(e))&&!e.includes("edge/"))return"Chrome";if(_A(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=r.match(t);if(i?.length===2)return i[1]}return"Other"}function mA(r=Pt()){return/firefox\//i.test(r)}function gA(r=Pt()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function pA(r=Pt()){return/crios\//i.test(r)}function yA(r=Pt()){return/iemobile/i.test(r)}function _A(r=Pt()){return/android/i.test(r)}function vA(r=Pt()){return/blackberry/i.test(r)}function EA(r=Pt()){return/webos/i.test(r)}function Gp(r=Pt()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function p2(r=Pt()){return Gp(r)&&!!window.navigator?.standalone}function y2(){return OC()&&document.documentMode===10}function TA(r=Pt()){return Gp(r)||_A(r)||EA(r)||vA(r)||/windows phone/i.test(r)||yA(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SA(r,e=[]){let t;switch(r){case"Browser":t=UT(Pt());break;case"Worker":t=`${UT(Pt())}-${r}`;break;default:t=r}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ol}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=l=>new Promise((c,d)=>{try{const m=e(l);c(m)}catch(m){d(m)}});i.onAbort=t,this.queue.push(i);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v2(r,e={}){return ll(r,"GET","/v2/passwordPolicy",Wf(r,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2=6;class T2{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??E2,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let a=0;a<e.length;a++)i=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S2{constructor(e,t,i,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new BT(this),this.idTokenSubscription=new BT(this),this.beforeStateQueue=new _2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=aA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ji(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Po.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await bf(this,{idToken:e}),i=await ni._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(ti(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,c=i?._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===c)&&d?.user&&(i=d.user,a=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Ie(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await wf(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=i2()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ti(this.app))return Promise.reject(os(this));const t=e?Rn(e):null;return t&&Ie(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ie(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ti(this.app)?Promise.reject(os(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ti(this.app)?Promise.reject(os(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ji(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await v2(this),t=new T2(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new gc("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await g2(this,i)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ji(e)||this._popupRedirectResolver;Ie(t,this,"argument-error"),this.redirectPersistenceManager=await Po.create(this,[Ji(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ie(d,this,"internal-error"),d.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,i,a);return()=>{c=!0,m()}}else{const m=e.addObserver(t);return()=>{c=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ie(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=SA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){if(ti(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&e2(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Zf(r){return Rn(r)}class BT{constructor(e){this.auth=e,this.observer=null,this.addObserver=BC(t=>this.observer=t)}get next(){return Ie(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function A2(r){Kp=r}function b2(r){return Kp.loadJS(r)}function w2(){return Kp.gapiScript}function I2(r){return`__${r}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R2(r,e){const t=jp(r,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(ya(l,e??{}))return a;ir(a,"already-initialized")}return t.initialize({options:e})}function C2(r,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Ji);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(i,e?.popupRedirectResolver)}function D2(r,e,t){const i=Zf(r);Ie(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const a=!1,l=AA(e),{host:c,port:d}=x2(e),m=d===null?"":`:${d}`,p={url:`${l}//${c}${m}/`},_=Object.freeze({host:c,port:d,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!i._canInitEmulator){Ie(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ie(ya(p,i.config.emulator)&&ya(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=p,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,al(c)?($S(`${l}//${c}${m}`),CC("Auth",!0)):N2()}function AA(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function x2(r){const e=AA(r),t=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(i);if(a){const l=a[1];return{host:l,port:zT(i.substr(l.length+1))}}else{const[l,c]=i.split(":");return{host:l,port:zT(c)}}}function zT(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function N2(){function r(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Xi("not implemented")}_getIdTokenResponse(e){return Xi("not implemented")}_linkToIdToken(e,t){return Xi("not implemented")}_getReauthenticationResolver(e){return Xi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ko(r,e){return cA(r,"POST","/v1/accounts:signInWithIdp",Wf(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2="http://localhost";class va extends bA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new va(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ir("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:a,...l}=t;if(!i||!a)return null;const c=new va(i,a);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return ko(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,ko(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ko(e,t)}buildRequest(){const e={requestUri:V2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=pc(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c extends wA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr extends _c{constructor(){super("facebook.com")}static credential(e){return va._fromParams({providerId:Wr.PROVIDER_ID,signInMethod:Wr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wr.credentialFromTaggedObject(e)}static credentialFromError(e){return Wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wr.credential(e.oauthAccessToken)}catch{return null}}}Wr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Wr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr extends _c{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return va._fromParams({providerId:Zr.PROVIDER_ID,signInMethod:Zr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Zr.credentialFromTaggedObject(e)}static credentialFromError(e){return Zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Zr.credential(t,i)}catch{return null}}}Zr.GOOGLE_SIGN_IN_METHOD="google.com";Zr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es extends _c{constructor(){super("github.com")}static credential(e){return va._fromParams({providerId:es.PROVIDER_ID,signInMethod:es.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return es.credentialFromTaggedObject(e)}static credentialFromError(e){return es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return es.credential(e.oauthAccessToken)}catch{return null}}}es.GITHUB_SIGN_IN_METHOD="github.com";es.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts extends _c{constructor(){super("twitter.com")}static credential(e,t){return va._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return ts.credential(t,i)}catch{return null}}}ts.TWITTER_SIGN_IN_METHOD="twitter.com";ts.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O2(r,e){return cA(r,"POST","/v1/accounts:signUp",Wf(r,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,a=!1){const l=await ni._fromIdTokenResponse(e,i,a),c=jT(i);return new hs({user:l,providerId:c,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const a=jT(i);return new hs({user:e,providerId:a,_tokenResponse:i,operationType:t})}}function jT(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function M2(r){if(ti(r.app))return Promise.reject(os(r));const e=Zf(r);if(await e._initializationPromise,e.currentUser?.isAnonymous)return new hs({user:e.currentUser,providerId:null,operationType:"signIn"});const t=await O2(e,{returnSecureToken:!0}),i=await hs._fromIdTokenResponse(e,"signIn",t,!0);return await e._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If extends lr{constructor(e,t,i,a){super(t.code,t.message),this.operationType=i,this.user=a,Object.setPrototypeOf(this,If.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,a){return new If(e,t,i,a)}}function IA(r,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(r):t._getIdTokenResponse(r)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?If._fromErrorAndOperation(r,l,e,i):l})}async function P2(r,e,t=!1){const i=await $u(r,e._linkToIdToken(r.auth,await r.getIdToken()),t);return hs._forOperation(r,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k2(r,e,t=!1){const{auth:i}=r;if(ti(i.app))return Promise.reject(os(i));const a="reauthenticate";try{const l=await $u(r,IA(i,a,e,r),t);Ie(l.idToken,i,"internal-error");const c=Hp(l.idToken);Ie(c,i,"internal-error");const{sub:d}=c;return Ie(r.uid===d,i,"user-mismatch"),hs._forOperation(r,a,l)}catch(l){throw l?.code==="auth/user-not-found"&&ir(i,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L2(r,e,t=!1){if(ti(r.app))return Promise.reject(os(r));const i="signIn",a=await IA(r,i,e),l=await hs._fromIdTokenResponse(r,i,a);return t||await r._updateCurrentUser(l.user),l}function U2(r,e,t,i){return Rn(r).onIdTokenChanged(e,t,i)}function B2(r,e,t){return Rn(r).beforeAuthStateChanged(e,t)}const Rf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Rf,"1"),this.storage.removeItem(Rf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2=1e3,j2=10;class CA extends RA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=TA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),a=this.localCache[t];i!==a&&e(t,a,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,d,m)=>{this.notifyListeners(c,m)});return}const i=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const c=this.storage.getItem(i);!t&&this.localCache[i]===c||this.notifyListeners(i,c)},l=this.storage.getItem(i);y2()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,j2):a()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},z2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}CA.type="LOCAL";const q2=CA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA extends RA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}DA.type="SESSION";const xA=DA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F2(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ed{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const i=new ed(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:a,data:l}=t.data,c=this.handlersMap[a];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:a});const d=Array.from(c).map(async p=>p(t.origin,l)),m=await F2(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ed.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qp(r="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return r+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,c;return new Promise((d,m)=>{const p=Qp("",20);a.port1.start();const _=setTimeout(()=>{m(new Error("unsupported_event"))},i);c={messageChannel:a,onMessage(T){const b=T;if(b.data.eventId===p)switch(b.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),d(b.data.response);break;default:clearTimeout(_),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(c),a.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[a.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Si(){return window}function G2(r){Si().location.href=r}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NA(){return typeof Si().WorkerGlobalScope<"u"&&typeof Si().importScripts=="function"}async function K2(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Q2(){return navigator?.serviceWorker?.controller||null}function Y2(){return NA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA="firebaseLocalStorageDb",$2=1,Cf="firebaseLocalStorage",OA="fbase_key";class vc{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function td(r,e){return r.transaction([Cf],e?"readwrite":"readonly").objectStore(Cf)}function X2(){const r=indexedDB.deleteDatabase(VA);return new vc(r).toPromise()}function ip(){const r=indexedDB.open(VA,$2);return new Promise((e,t)=>{r.addEventListener("error",()=>{t(r.error)}),r.addEventListener("upgradeneeded",()=>{const i=r.result;try{i.createObjectStore(Cf,{keyPath:OA})}catch(a){t(a)}}),r.addEventListener("success",async()=>{const i=r.result;i.objectStoreNames.contains(Cf)?e(i):(i.close(),await X2(),e(await ip()))})})}async function qT(r,e,t){const i=td(r,!0).put({[OA]:e,value:t});return new vc(i).toPromise()}async function J2(r,e){const t=td(r,!1).get(e),i=await new vc(t).toPromise();return i===void 0?null:i.value}function FT(r,e){const t=td(r,!0).delete(e);return new vc(t).toPromise()}const W2=800,Z2=3;class MA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ip(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>Z2)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return NA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ed._getInstance(Y2()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await K2(),!this.activeServiceWorker)return;this.sender=new H2(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Q2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ip();return await qT(e,Rf,"1"),await FT(e,Rf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>qT(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>J2(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>FT(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=td(a,!1).getAll();return new vc(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)i.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!i.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const a of Array.from(i))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),W2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}MA.type="LOCAL";const ex=MA;new yc(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tx(r,e){return e?Ji(e):(Ie(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp extends bA{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ko(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ko(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ko(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function nx(r){return L2(r.auth,new Yp(r),r.bypassAuthState)}function ix(r){const{auth:e,user:t}=r;return Ie(t,e,"internal-error"),k2(t,new Yp(r),r.bypassAuthState)}async function rx(r){const{auth:e,user:t}=r;return Ie(t,e,"internal-error"),P2(t,new Yp(r),r.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e,t,i,a,l=!1){this.auth=e,this.resolver=i,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:a,tenantId:l,error:c,type:d}=e;if(c){this.reject(c);return}const m={auth:this.auth,requestUri:t,sessionId:i,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(m))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return nx;case"linkViaPopup":case"linkViaRedirect":return rx;case"reauthViaPopup":case"reauthViaRedirect":return ix;default:ir(this.auth,"internal-error")}}resolve(e){rr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){rr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx=new yc(2e3,1e4);class Oo extends PA{constructor(e,t,i,a,l){super(e,t,a,l),this.provider=i,this.authWindow=null,this.pollId=null,Oo.currentPopupAction&&Oo.currentPopupAction.cancel(),Oo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ie(e,this.auth,"internal-error"),e}async onExecution(){rr(this.filter.length===1,"Popup operations only handle one event");const e=Qp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ti(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Ti(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Oo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ti(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,sx.get())};e()}}Oo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax="pendingRedirect",of=new Map;class ox extends PA{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=of.get(this.auth._key());if(!e){try{const i=await lx(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}of.set(this.auth._key(),e)}return this.bypassAuthState||of.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function lx(r,e){const t=hx(e),i=cx(r);if(!await i._isAvailable())return!1;const a=await i._get(t)==="true";return await i._remove(t),a}function ux(r,e){of.set(r._key(),e)}function cx(r){return Ji(r._redirectPersistence)}function hx(r){return af(ax,r.config.apiKey,r.name)}async function fx(r,e,t=!1){if(ti(r.app))return Promise.reject(os(r));const i=Zf(r),a=tx(i,e),c=await new ox(i,a,t).execute();return c&&!t&&(delete c.user._redirectEventId,await i._persistUserIfCurrent(c.user),await i._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dx=600*1e3;class mx{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!gx(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!kA(e)){const i=e.error.code?.split("auth/")[1]||"internal-error";t.onError(Ti(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=dx&&this.cachedEventUids.clear(),this.cachedEventUids.has(HT(e))}saveEventToCache(e){this.cachedEventUids.add(HT(e)),this.lastProcessedEventTime=Date.now()}}function HT(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function kA({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function gx(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return kA(r);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function px(r,e={}){return ll(r,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_x=/^https?/;async function vx(r){if(r.config.emulator)return;const{authorizedDomains:e}=await px(r);for(const t of e)try{if(Ex(t))return}catch{}ir(r,"unauthorized-domain")}function Ex(r){const e=tp(),{protocol:t,hostname:i}=new URL(e);if(r.startsWith("chrome-extension://")){const c=new URL(r);return c.hostname===""&&i===""?t==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===i}if(!_x.test(t))return!1;if(yx.test(r))return i===r;const a=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx=new yc(3e4,6e4);function GT(){const r=Si().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let t=0;t<r.CP.length;t++)r.CP[t]=null}}function Sx(r){return new Promise((e,t)=>{function i(){GT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{GT(),t(Ti(r,"network-request-failed"))},timeout:Tx.get()})}if(Si().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Si().gapi?.load)i();else{const a=I2("iframefcb");return Si()[a]=()=>{gapi.load?i():t(Ti(r,"network-request-failed"))},b2(`${w2()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw lf=null,e})}let lf=null;function Ax(r){return lf=lf||Sx(r),lf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx=new yc(5e3,15e3),wx="__/auth/iframe",Ix="emulator/auth/iframe",Rx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Cx=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Dx(r){const e=r.config;Ie(e.authDomain,r,"auth-domain-config-required");const t=e.emulator?Fp(e,Ix):`https://${r.config.authDomain}/${wx}`,i={apiKey:e.apiKey,appName:r.name,v:ol},a=Cx.get(r.config.apiHost);a&&(i.eid=a);const l=r._getFrameworks();return l.length&&(i.fw=l.join(",")),`${t}?${pc(i).slice(1)}`}async function xx(r){const e=await Ax(r),t=Si().gapi;return Ie(t,r,"internal-error"),e.open({where:document.body,url:Dx(r),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Rx,dontclear:!0},i=>new Promise(async(a,l)=>{await i.restyle({setHideOnLeave:!1});const c=Ti(r,"network-request-failed"),d=Si().setTimeout(()=>{l(c)},bx.get());function m(){Si().clearTimeout(d),a(i)}i.ping(m).then(m,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Vx=500,Ox=600,Mx="_blank",Px="http://localhost";class KT{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function kx(r,e,t,i=Vx,a=Ox){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),c=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const m={...Nx,width:i.toString(),height:a.toString(),top:l,left:c},p=Pt().toLowerCase();t&&(d=pA(p)?Mx:t),mA(p)&&(e=e||Px,m.scrollbars="yes");const _=Object.entries(m).reduce((b,[N,q])=>`${b}${N}=${q},`,"");if(p2(p)&&d!=="_self")return Lx(e||"",d),new KT(null);const T=window.open(e||"",d,_);Ie(T,r,"popup-blocked");try{T.focus()}catch{}return new KT(T)}function Lx(r,e){const t=document.createElement("a");t.href=r,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux="__/auth/handler",Bx="emulator/auth/handler",zx=encodeURIComponent("fac");async function QT(r,e,t,i,a,l){Ie(r.config.authDomain,r,"auth-domain-config-required"),Ie(r.config.apiKey,r,"invalid-api-key");const c={apiKey:r.config.apiKey,appName:r.name,authType:t,redirectUrl:i,v:ol,eventId:a};if(e instanceof wA){e.setDefaultLanguage(r.languageCode),c.providerId=e.providerId||"",UC(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,T]of Object.entries({}))c[_]=T}if(e instanceof _c){const _=e.getScopes().filter(T=>T!=="");_.length>0&&(c.scopes=_.join(","))}r.tenantId&&(c.tid=r.tenantId);const d=c;for(const _ of Object.keys(d))d[_]===void 0&&delete d[_];const m=await r._getAppCheckToken(),p=m?`#${zx}=${encodeURIComponent(m)}`:"";return`${jx(r)}?${pc(d).slice(1)}${p}`}function jx({config:r}){return r.emulator?Fp(r,Bx):`https://${r.authDomain}/${Ux}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mg="webStorageSupport";class qx{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xA,this._completeRedirectFn=fx,this._overrideRedirectResult=ux}async _openPopup(e,t,i,a){rr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await QT(e,t,i,tp(),a);return kx(e,l,Qp())}async _openRedirect(e,t,i,a){await this._originValidation(e);const l=await QT(e,t,i,tp(),a);return G2(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(rr(l,"If manager is not set, promise should be"),l)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await xx(e),i=new mx(e);return t.register("authEvent",a=>(Ie(a?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Mg,{type:Mg},a=>{const l=a?.[0]?.[Mg];l!==void 0&&t(!!l),ir(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=vx(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return TA()||gA()||Gp()}}const Fx=qx;var YT="@firebase/auth",$T="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ie(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gx(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Kx(r){Bo(new _a("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:d}=i.options;Ie(c&&!c.includes(":"),"invalid-api-key",{appName:i.name});const m={apiKey:c,authDomain:d,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:SA(r)},p=new S2(i,a,l,m);return C2(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Bo(new _a("auth-internal",e=>{const t=Zf(e.getProvider("auth").getImmediate());return(i=>new Hx(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),as(YT,$T,Gx(r)),as(YT,$T,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qx=300,Yx=YS("authIdTokenMaxAge")||Qx;let XT=null;const $x=r=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>Yx)return;const a=t?.token;XT!==a&&(XT=a,await fetch(r,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function Xx(r=zD()){const e=jp(r,"auth");if(e.isInitialized())return e.getImmediate();const t=R2(r,{popupRedirectResolver:Fx,persistence:[ex,q2,xA]}),i=YS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(i,location.origin);if(location.origin===l.origin){const c=$x(l.toString());B2(t,c,()=>c(t.currentUser)),U2(t,d=>c(d))}}const a=bC("auth");return a&&D2(t,`http://${a}`),t}function Jx(){return document.getElementsByTagName("head")?.[0]??document}A2({loadJS(r){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",r),i.onload=e,i.onerror=a=>{const l=Ti("internal-error");l.customData=a,t(l)},i.type="text/javascript",i.charset="UTF-8",Jx().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Kx("Browser");var JT=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ls,LA;(function(){var r;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,w){function I(){}I.prototype=w.prototype,D.F=w.prototype,D.prototype=new I,D.prototype.constructor=D,D.D=function(M,V,P){for(var R=Array(arguments.length-2),je=2;je<arguments.length;je++)R[je-2]=arguments[je];return w.prototype[V].apply(M,R)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(D,w,I){I||(I=0);const M=Array(16);if(typeof w=="string")for(var V=0;V<16;++V)M[V]=w.charCodeAt(I++)|w.charCodeAt(I++)<<8|w.charCodeAt(I++)<<16|w.charCodeAt(I++)<<24;else for(V=0;V<16;++V)M[V]=w[I++]|w[I++]<<8|w[I++]<<16|w[I++]<<24;w=D.g[0],I=D.g[1],V=D.g[2];let P=D.g[3],R;R=w+(P^I&(V^P))+M[0]+3614090360&4294967295,w=I+(R<<7&4294967295|R>>>25),R=P+(V^w&(I^V))+M[1]+3905402710&4294967295,P=w+(R<<12&4294967295|R>>>20),R=V+(I^P&(w^I))+M[2]+606105819&4294967295,V=P+(R<<17&4294967295|R>>>15),R=I+(w^V&(P^w))+M[3]+3250441966&4294967295,I=V+(R<<22&4294967295|R>>>10),R=w+(P^I&(V^P))+M[4]+4118548399&4294967295,w=I+(R<<7&4294967295|R>>>25),R=P+(V^w&(I^V))+M[5]+1200080426&4294967295,P=w+(R<<12&4294967295|R>>>20),R=V+(I^P&(w^I))+M[6]+2821735955&4294967295,V=P+(R<<17&4294967295|R>>>15),R=I+(w^V&(P^w))+M[7]+4249261313&4294967295,I=V+(R<<22&4294967295|R>>>10),R=w+(P^I&(V^P))+M[8]+1770035416&4294967295,w=I+(R<<7&4294967295|R>>>25),R=P+(V^w&(I^V))+M[9]+2336552879&4294967295,P=w+(R<<12&4294967295|R>>>20),R=V+(I^P&(w^I))+M[10]+4294925233&4294967295,V=P+(R<<17&4294967295|R>>>15),R=I+(w^V&(P^w))+M[11]+2304563134&4294967295,I=V+(R<<22&4294967295|R>>>10),R=w+(P^I&(V^P))+M[12]+1804603682&4294967295,w=I+(R<<7&4294967295|R>>>25),R=P+(V^w&(I^V))+M[13]+4254626195&4294967295,P=w+(R<<12&4294967295|R>>>20),R=V+(I^P&(w^I))+M[14]+2792965006&4294967295,V=P+(R<<17&4294967295|R>>>15),R=I+(w^V&(P^w))+M[15]+1236535329&4294967295,I=V+(R<<22&4294967295|R>>>10),R=w+(V^P&(I^V))+M[1]+4129170786&4294967295,w=I+(R<<5&4294967295|R>>>27),R=P+(I^V&(w^I))+M[6]+3225465664&4294967295,P=w+(R<<9&4294967295|R>>>23),R=V+(w^I&(P^w))+M[11]+643717713&4294967295,V=P+(R<<14&4294967295|R>>>18),R=I+(P^w&(V^P))+M[0]+3921069994&4294967295,I=V+(R<<20&4294967295|R>>>12),R=w+(V^P&(I^V))+M[5]+3593408605&4294967295,w=I+(R<<5&4294967295|R>>>27),R=P+(I^V&(w^I))+M[10]+38016083&4294967295,P=w+(R<<9&4294967295|R>>>23),R=V+(w^I&(P^w))+M[15]+3634488961&4294967295,V=P+(R<<14&4294967295|R>>>18),R=I+(P^w&(V^P))+M[4]+3889429448&4294967295,I=V+(R<<20&4294967295|R>>>12),R=w+(V^P&(I^V))+M[9]+568446438&4294967295,w=I+(R<<5&4294967295|R>>>27),R=P+(I^V&(w^I))+M[14]+3275163606&4294967295,P=w+(R<<9&4294967295|R>>>23),R=V+(w^I&(P^w))+M[3]+4107603335&4294967295,V=P+(R<<14&4294967295|R>>>18),R=I+(P^w&(V^P))+M[8]+1163531501&4294967295,I=V+(R<<20&4294967295|R>>>12),R=w+(V^P&(I^V))+M[13]+2850285829&4294967295,w=I+(R<<5&4294967295|R>>>27),R=P+(I^V&(w^I))+M[2]+4243563512&4294967295,P=w+(R<<9&4294967295|R>>>23),R=V+(w^I&(P^w))+M[7]+1735328473&4294967295,V=P+(R<<14&4294967295|R>>>18),R=I+(P^w&(V^P))+M[12]+2368359562&4294967295,I=V+(R<<20&4294967295|R>>>12),R=w+(I^V^P)+M[5]+4294588738&4294967295,w=I+(R<<4&4294967295|R>>>28),R=P+(w^I^V)+M[8]+2272392833&4294967295,P=w+(R<<11&4294967295|R>>>21),R=V+(P^w^I)+M[11]+1839030562&4294967295,V=P+(R<<16&4294967295|R>>>16),R=I+(V^P^w)+M[14]+4259657740&4294967295,I=V+(R<<23&4294967295|R>>>9),R=w+(I^V^P)+M[1]+2763975236&4294967295,w=I+(R<<4&4294967295|R>>>28),R=P+(w^I^V)+M[4]+1272893353&4294967295,P=w+(R<<11&4294967295|R>>>21),R=V+(P^w^I)+M[7]+4139469664&4294967295,V=P+(R<<16&4294967295|R>>>16),R=I+(V^P^w)+M[10]+3200236656&4294967295,I=V+(R<<23&4294967295|R>>>9),R=w+(I^V^P)+M[13]+681279174&4294967295,w=I+(R<<4&4294967295|R>>>28),R=P+(w^I^V)+M[0]+3936430074&4294967295,P=w+(R<<11&4294967295|R>>>21),R=V+(P^w^I)+M[3]+3572445317&4294967295,V=P+(R<<16&4294967295|R>>>16),R=I+(V^P^w)+M[6]+76029189&4294967295,I=V+(R<<23&4294967295|R>>>9),R=w+(I^V^P)+M[9]+3654602809&4294967295,w=I+(R<<4&4294967295|R>>>28),R=P+(w^I^V)+M[12]+3873151461&4294967295,P=w+(R<<11&4294967295|R>>>21),R=V+(P^w^I)+M[15]+530742520&4294967295,V=P+(R<<16&4294967295|R>>>16),R=I+(V^P^w)+M[2]+3299628645&4294967295,I=V+(R<<23&4294967295|R>>>9),R=w+(V^(I|~P))+M[0]+4096336452&4294967295,w=I+(R<<6&4294967295|R>>>26),R=P+(I^(w|~V))+M[7]+1126891415&4294967295,P=w+(R<<10&4294967295|R>>>22),R=V+(w^(P|~I))+M[14]+2878612391&4294967295,V=P+(R<<15&4294967295|R>>>17),R=I+(P^(V|~w))+M[5]+4237533241&4294967295,I=V+(R<<21&4294967295|R>>>11),R=w+(V^(I|~P))+M[12]+1700485571&4294967295,w=I+(R<<6&4294967295|R>>>26),R=P+(I^(w|~V))+M[3]+2399980690&4294967295,P=w+(R<<10&4294967295|R>>>22),R=V+(w^(P|~I))+M[10]+4293915773&4294967295,V=P+(R<<15&4294967295|R>>>17),R=I+(P^(V|~w))+M[1]+2240044497&4294967295,I=V+(R<<21&4294967295|R>>>11),R=w+(V^(I|~P))+M[8]+1873313359&4294967295,w=I+(R<<6&4294967295|R>>>26),R=P+(I^(w|~V))+M[15]+4264355552&4294967295,P=w+(R<<10&4294967295|R>>>22),R=V+(w^(P|~I))+M[6]+2734768916&4294967295,V=P+(R<<15&4294967295|R>>>17),R=I+(P^(V|~w))+M[13]+1309151649&4294967295,I=V+(R<<21&4294967295|R>>>11),R=w+(V^(I|~P))+M[4]+4149444226&4294967295,w=I+(R<<6&4294967295|R>>>26),R=P+(I^(w|~V))+M[11]+3174756917&4294967295,P=w+(R<<10&4294967295|R>>>22),R=V+(w^(P|~I))+M[2]+718787259&4294967295,V=P+(R<<15&4294967295|R>>>17),R=I+(P^(V|~w))+M[9]+3951481745&4294967295,D.g[0]=D.g[0]+w&4294967295,D.g[1]=D.g[1]+(V+(R<<21&4294967295|R>>>11))&4294967295,D.g[2]=D.g[2]+V&4294967295,D.g[3]=D.g[3]+P&4294967295}i.prototype.v=function(D,w){w===void 0&&(w=D.length);const I=w-this.blockSize,M=this.C;let V=this.h,P=0;for(;P<w;){if(V==0)for(;P<=I;)a(this,D,P),P+=this.blockSize;if(typeof D=="string"){for(;P<w;)if(M[V++]=D.charCodeAt(P++),V==this.blockSize){a(this,M),V=0;break}}else for(;P<w;)if(M[V++]=D[P++],V==this.blockSize){a(this,M),V=0;break}}this.h=V,this.o+=w},i.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var w=1;w<D.length-8;++w)D[w]=0;w=this.o*8;for(var I=D.length-8;I<D.length;++I)D[I]=w&255,w/=256;for(this.v(D),D=Array(16),w=0,I=0;I<4;++I)for(let M=0;M<32;M+=8)D[w++]=this.g[I]>>>M&255;return D};function l(D,w){var I=d;return Object.prototype.hasOwnProperty.call(I,D)?I[D]:I[D]=w(D)}function c(D,w){this.h=w;const I=[];let M=!0;for(let V=D.length-1;V>=0;V--){const P=D[V]|0;M&&P==w||(I[V]=P,M=!1)}this.g=I}var d={};function m(D){return-128<=D&&D<128?l(D,function(w){return new c([w|0],w<0?-1:0)}):new c([D|0],D<0?-1:0)}function p(D){if(isNaN(D)||!isFinite(D))return T;if(D<0)return F(p(-D));const w=[];let I=1;for(let M=0;D>=I;M++)w[M]=D/I|0,I*=4294967296;return new c(w,0)}function _(D,w){if(D.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(D.charAt(0)=="-")return F(_(D.substring(1),w));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=p(Math.pow(w,8));let M=T;for(let P=0;P<D.length;P+=8){var V=Math.min(8,D.length-P);const R=parseInt(D.substring(P,P+V),w);V<8?(V=p(Math.pow(w,V)),M=M.j(V).add(p(R))):(M=M.j(I),M=M.add(p(R)))}return M}var T=m(0),b=m(1),N=m(16777216);r=c.prototype,r.m=function(){if(G(this))return-F(this).m();let D=0,w=1;for(let I=0;I<this.g.length;I++){const M=this.i(I);D+=(M>=0?M:4294967296+M)*w,w*=4294967296}return D},r.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(q(this))return"0";if(G(this))return"-"+F(this).toString(D);const w=p(Math.pow(D,6));var I=this;let M="";for(;;){const V=fe(I,w).g;I=ie(I,V.j(w));let P=((I.g.length>0?I.g[0]:I.h)>>>0).toString(D);if(I=V,q(I))return P+M;for(;P.length<6;)P="0"+P;M=P+M}},r.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function q(D){if(D.h!=0)return!1;for(let w=0;w<D.g.length;w++)if(D.g[w]!=0)return!1;return!0}function G(D){return D.h==-1}r.l=function(D){return D=ie(this,D),G(D)?-1:q(D)?0:1};function F(D){const w=D.g.length,I=[];for(let M=0;M<w;M++)I[M]=~D.g[M];return new c(I,~D.h).add(b)}r.abs=function(){return G(this)?F(this):this},r.add=function(D){const w=Math.max(this.g.length,D.g.length),I=[];let M=0;for(let V=0;V<=w;V++){let P=M+(this.i(V)&65535)+(D.i(V)&65535),R=(P>>>16)+(this.i(V)>>>16)+(D.i(V)>>>16);M=R>>>16,P&=65535,R&=65535,I[V]=R<<16|P}return new c(I,I[I.length-1]&-2147483648?-1:0)};function ie(D,w){return D.add(F(w))}r.j=function(D){if(q(this)||q(D))return T;if(G(this))return G(D)?F(this).j(F(D)):F(F(this).j(D));if(G(D))return F(this.j(F(D)));if(this.l(N)<0&&D.l(N)<0)return p(this.m()*D.m());const w=this.g.length+D.g.length,I=[];for(var M=0;M<2*w;M++)I[M]=0;for(M=0;M<this.g.length;M++)for(let V=0;V<D.g.length;V++){const P=this.i(M)>>>16,R=this.i(M)&65535,je=D.i(V)>>>16,qe=D.i(V)&65535;I[2*M+2*V]+=R*qe,Z(I,2*M+2*V),I[2*M+2*V+1]+=P*qe,Z(I,2*M+2*V+1),I[2*M+2*V+1]+=R*je,Z(I,2*M+2*V+1),I[2*M+2*V+2]+=P*je,Z(I,2*M+2*V+2)}for(D=0;D<w;D++)I[D]=I[2*D+1]<<16|I[2*D];for(D=w;D<2*w;D++)I[D]=0;return new c(I,0)};function Z(D,w){for(;(D[w]&65535)!=D[w];)D[w+1]+=D[w]>>>16,D[w]&=65535,w++}function $(D,w){this.g=D,this.h=w}function fe(D,w){if(q(w))throw Error("division by zero");if(q(D))return new $(T,T);if(G(D))return w=fe(F(D),w),new $(F(w.g),F(w.h));if(G(w))return w=fe(D,F(w)),new $(F(w.g),w.h);if(D.g.length>30){if(G(D)||G(w))throw Error("slowDivide_ only works with positive integers.");for(var I=b,M=w;M.l(D)<=0;)I=se(I),M=se(M);var V=de(I,1),P=de(M,1);for(M=de(M,2),I=de(I,2);!q(M);){var R=P.add(M);R.l(D)<=0&&(V=V.add(I),P=R),M=de(M,1),I=de(I,1)}return w=ie(D,V.j(w)),new $(V,w)}for(V=T;D.l(w)>=0;){for(I=Math.max(1,Math.floor(D.m()/w.m())),M=Math.ceil(Math.log(I)/Math.LN2),M=M<=48?1:Math.pow(2,M-48),P=p(I),R=P.j(w);G(R)||R.l(D)>0;)I-=M,P=p(I),R=P.j(w);q(P)&&(P=b),V=V.add(P),D=ie(D,R)}return new $(V,D)}r.B=function(D){return fe(this,D).h},r.and=function(D){const w=Math.max(this.g.length,D.g.length),I=[];for(let M=0;M<w;M++)I[M]=this.i(M)&D.i(M);return new c(I,this.h&D.h)},r.or=function(D){const w=Math.max(this.g.length,D.g.length),I=[];for(let M=0;M<w;M++)I[M]=this.i(M)|D.i(M);return new c(I,this.h|D.h)},r.xor=function(D){const w=Math.max(this.g.length,D.g.length),I=[];for(let M=0;M<w;M++)I[M]=this.i(M)^D.i(M);return new c(I,this.h^D.h)};function se(D){const w=D.g.length+1,I=[];for(let M=0;M<w;M++)I[M]=D.i(M)<<1|D.i(M-1)>>>31;return new c(I,D.h)}function de(D,w){const I=w>>5;w%=32;const M=D.g.length-I,V=[];for(let P=0;P<M;P++)V[P]=w>0?D.i(P+I)>>>w|D.i(P+I+1)<<32-w:D.i(P+I);return new c(V,D.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,LA=i,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=p,c.fromString=_,ls=c}).apply(typeof JT<"u"?JT:typeof self<"u"?self:typeof window<"u"?window:{});var Yh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var UA,xu,BA,uf,rp,zA,jA,qA;(function(){var r,e=Object.defineProperty;function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof Yh=="object"&&Yh];for(var y=0;y<h.length;++y){var v=h[y];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var i=t(this);function a(h,y){if(y)e:{var v=i;h=h.split(".");for(var A=0;A<h.length-1;A++){var B=h[A];if(!(B in v))break e;v=v[B]}h=h[h.length-1],A=v[h],y=y(A),y!=A&&y!=null&&e(v,h,{configurable:!0,writable:!0,value:y})}}a("Symbol.dispose",function(h){return h||Symbol("Symbol.dispose")}),a("Array.prototype.values",function(h){return h||function(){return this[Symbol.iterator]()}}),a("Object.entries",function(h){return h||function(y){var v=[],A;for(A in y)Object.prototype.hasOwnProperty.call(y,A)&&v.push([A,y[A]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function d(h){var y=typeof h;return y=="object"&&h!=null||y=="function"}function m(h,y,v){return h.call.apply(h.bind,arguments)}function p(h,y,v){return p=m,p.apply(null,arguments)}function _(h,y){var v=Array.prototype.slice.call(arguments,1);return function(){var A=v.slice();return A.push.apply(A,arguments),h.apply(this,A)}}function T(h,y){function v(){}v.prototype=y.prototype,h.Z=y.prototype,h.prototype=new v,h.prototype.constructor=h,h.Ob=function(A,B,Y){for(var oe=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)oe[Ce-2]=arguments[Ce];return y.prototype[B].apply(A,oe)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?h=>h&&AsyncContext.Snapshot.wrap(h):h=>h;function N(h){const y=h.length;if(y>0){const v=Array(y);for(let A=0;A<y;A++)v[A]=h[A];return v}return[]}function q(h,y){for(let A=1;A<arguments.length;A++){const B=arguments[A];var v=typeof B;if(v=v!="object"?v:B?Array.isArray(B)?"array":v:"null",v=="array"||v=="object"&&typeof B.length=="number"){v=h.length||0;const Y=B.length||0;h.length=v+Y;for(let oe=0;oe<Y;oe++)h[v+oe]=B[oe]}else h.push(B)}}class G{constructor(y,v){this.i=y,this.j=v,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function F(h){c.setTimeout(()=>{throw h},0)}function ie(){var h=D;let y=null;return h.g&&(y=h.g,h.g=h.g.next,h.g||(h.h=null),y.next=null),y}class Z{constructor(){this.h=this.g=null}add(y,v){const A=$.get();A.set(y,v),this.h?this.h.next=A:this.g=A,this.h=A}}var $=new G(()=>new fe,h=>h.reset());class fe{constructor(){this.next=this.g=this.h=null}set(y,v){this.h=y,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let se,de=!1,D=new Z,w=()=>{const h=Promise.resolve(void 0);se=()=>{h.then(I)}};function I(){for(var h;h=ie();){try{h.h.call(h.g)}catch(v){F(v)}var y=$;y.j(h),y.h<100&&(y.h++,h.next=y.g,y.g=h)}de=!1}function M(){this.u=this.u,this.C=this.C}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function V(h,y){this.type=h,this.g=this.target=y,this.defaultPrevented=!1}V.prototype.h=function(){this.defaultPrevented=!0};var P=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var h=!1,y=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const v=()=>{};c.addEventListener("test",v,y),c.removeEventListener("test",v,y)}catch{}return h})();function R(h){return/^[\s\xa0]*$/.test(h)}function je(h,y){V.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h&&this.init(h,y)}T(je,V),je.prototype.init=function(h,y){const v=this.type=h.type,A=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;this.target=h.target||h.srcElement,this.g=y,y=h.relatedTarget,y||(v=="mouseover"?y=h.fromElement:v=="mouseout"&&(y=h.toElement)),this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=h.pointerType,this.state=h.state,this.i=h,h.defaultPrevented&&je.Z.h.call(this)},je.prototype.h=function(){je.Z.h.call(this);const h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var qe="closure_listenable_"+(Math.random()*1e6|0),X=0;function he(h,y,v,A,B){this.listener=h,this.proxy=null,this.src=y,this.type=v,this.capture=!!A,this.ha=B,this.key=++X,this.da=this.fa=!1}function _e(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function xe(h,y,v){for(const A in h)y.call(v,h[A],A,h)}function x(h,y){for(const v in h)y.call(void 0,h[v],v,h)}function te(h){const y={};for(const v in h)y[v]=h[v];return y}const ue="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function le(h,y){let v,A;for(let B=1;B<arguments.length;B++){A=arguments[B];for(v in A)h[v]=A[v];for(let Y=0;Y<ue.length;Y++)v=ue[Y],Object.prototype.hasOwnProperty.call(A,v)&&(h[v]=A[v])}}function ye(h){this.src=h,this.g={},this.h=0}ye.prototype.add=function(h,y,v,A,B){const Y=h.toString();h=this.g[Y],h||(h=this.g[Y]=[],this.h++);const oe=Se(h,y,A,B);return oe>-1?(y=h[oe],v||(y.fa=!1)):(y=new he(y,this.src,Y,!!A,B),y.fa=v,h.push(y)),y};function Ne(h,y){const v=y.type;if(v in h.g){var A=h.g[v],B=Array.prototype.indexOf.call(A,y,void 0),Y;(Y=B>=0)&&Array.prototype.splice.call(A,B,1),Y&&(_e(y),h.g[v].length==0&&(delete h.g[v],h.h--))}}function Se(h,y,v,A){for(let B=0;B<h.length;++B){const Y=h[B];if(!Y.da&&Y.listener==y&&Y.capture==!!v&&Y.ha==A)return B}return-1}var ot="closure_lm_"+(Math.random()*1e6|0),We={};function Fn(h,y,v,A,B){if(Array.isArray(y)){for(let Y=0;Y<y.length;Y++)Fn(h,y[Y],v,A,B);return null}return v=Rc(v),h&&h[qe]?h.J(y,v,d(A)?!!A.capture:!1,B):gl(h,y,v,!1,A,B)}function gl(h,y,v,A,B,Y){if(!y)throw Error("Invalid event type");const oe=d(B)?!!B.capture:!!B;let Ce=pl(h);if(Ce||(h[ot]=Ce=new ye(h)),v=Ce.add(y,v,A,oe,Y),v.proxy)return v;if(A=xa(),v.proxy=A,A.src=h,A.listener=v,h.addEventListener)P||(B=oe),B===void 0&&(B=!1),h.addEventListener(y.toString(),A,B);else if(h.attachEvent)h.attachEvent(Va(y.toString()),A);else if(h.addListener&&h.removeListener)h.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return v}function xa(){function h(v){return y.call(h.src,h.listener,v)}const y=Td;return h}function Na(h,y,v,A,B){if(Array.isArray(y))for(var Y=0;Y<y.length;Y++)Na(h,y[Y],v,A,B);else A=d(A)?!!A.capture:!!A,v=Rc(v),h&&h[qe]?(h=h.i,Y=String(y).toString(),Y in h.g&&(y=h.g[Y],v=Se(y,v,A,B),v>-1&&(_e(y[v]),Array.prototype.splice.call(y,v,1),y.length==0&&(delete h.g[Y],h.h--)))):h&&(h=pl(h))&&(y=h.g[y.toString()],h=-1,y&&(h=Se(y,v,A,B)),(v=h>-1?y[h]:null)&&Es(v))}function Es(h){if(typeof h!="number"&&h&&!h.da){var y=h.src;if(y&&y[qe])Ne(y.i,h);else{var v=h.type,A=h.proxy;y.removeEventListener?y.removeEventListener(v,A,h.capture):y.detachEvent?y.detachEvent(Va(v),A):y.addListener&&y.removeListener&&y.removeListener(A),(v=pl(y))?(Ne(v,h),v.h==0&&(v.src=null,y[ot]=null)):_e(h)}}}function Va(h){return h in We?We[h]:We[h]="on"+h}function Td(h,y){if(h.da)h=!0;else{y=new je(y,this);const v=h.listener,A=h.ha||h.src;h.fa&&Es(h),h=v.call(A,y)}return h}function pl(h){return h=h[ot],h instanceof ye?h:null}var un="__closure_events_fn_"+(Math.random()*1e9>>>0);function Rc(h){return typeof h=="function"?h:(h[un]||(h[un]=function(y){return h.handleEvent(y)}),h[un])}function xt(){M.call(this),this.i=new ye(this),this.M=this,this.G=null}T(xt,M),xt.prototype[qe]=!0,xt.prototype.removeEventListener=function(h,y,v,A){Na(this,h,y,v,A)};function Lt(h,y){var v,A=h.G;if(A)for(v=[];A;A=A.G)v.push(A);if(h=h.M,A=y.type||y,typeof y=="string")y=new V(y,h);else if(y instanceof V)y.target=y.target||h;else{var B=y;y=new V(A,h),le(y,B)}B=!0;let Y,oe;if(v)for(oe=v.length-1;oe>=0;oe--)Y=y.g=v[oe],B=Di(Y,A,!0,y)&&B;if(Y=y.g=h,B=Di(Y,A,!0,y)&&B,B=Di(Y,A,!1,y)&&B,v)for(oe=0;oe<v.length;oe++)Y=y.g=v[oe],B=Di(Y,A,!1,y)&&B}xt.prototype.N=function(){if(xt.Z.N.call(this),this.i){var h=this.i;for(const y in h.g){const v=h.g[y];for(let A=0;A<v.length;A++)_e(v[A]);delete h.g[y],h.h--}}this.G=null},xt.prototype.J=function(h,y,v,A){return this.i.add(String(h),y,!1,v,A)},xt.prototype.K=function(h,y,v,A){return this.i.add(String(h),y,!0,v,A)};function Di(h,y,v,A){if(y=h.i.g[String(y)],!y)return!0;y=y.concat();let B=!0;for(let Y=0;Y<y.length;++Y){const oe=y[Y];if(oe&&!oe.da&&oe.capture==v){const Ce=oe.listener,lt=oe.ha||oe.src;oe.fa&&Ne(h.i,oe),B=Ce.call(lt,A)!==!1&&B}}return B&&!A.defaultPrevented}function Sd(h,y){if(typeof h!="function")if(h&&typeof h.handleEvent=="function")h=p(h.handleEvent,h);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:c.setTimeout(h,y||0)}function yl(h){h.g=Sd(()=>{h.g=null,h.i&&(h.i=!1,yl(h))},h.l);const y=h.h;h.h=null,h.m.apply(null,y)}class Ad extends M{constructor(y,v){super(),this.m=y,this.l=v,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:yl(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ts(h){M.call(this),this.h=h,this.g={}}T(Ts,M);var hr=[];function Yt(h){xe(h.g,function(y,v){this.g.hasOwnProperty(v)&&Es(y)},h),h.g={}}Ts.prototype.N=function(){Ts.Z.N.call(this),Yt(this)},Ts.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Dn=c.JSON.stringify,nn=c.JSON.parse,bd=class{stringify(h){return c.JSON.stringify(h,void 0)}parse(h){return c.JSON.parse(h,void 0)}};function Cc(){}function Dc(){}var ii={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function fr(){V.call(this,"d")}T(fr,V);function Hn(){V.call(this,"c")}T(Hn,V);var xn={},dr=null;function Oa(){return dr=dr||new xt}xn.Ia="serverreachability";function _l(h){V.call(this,xn.Ia,h)}T(_l,V);function mr(h){const y=Oa();Lt(y,new _l(y))}xn.STAT_EVENT="statevent";function Ma(h,y){V.call(this,xn.STAT_EVENT,h),this.stat=y}T(Ma,V);function _t(h){const y=Oa();Lt(y,new Ma(y,h))}xn.Ja="timingevent";function xc(h,y){V.call(this,xn.Ja,h),this.size=y}T(xc,V);function gr(h,y){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){h()},y)}function pr(){this.g=!0}pr.prototype.ua=function(){this.g=!1};function vl(h,y,v,A,B,Y){h.info(function(){if(h.g)if(Y){var oe="",Ce=Y.split("&");for(let Ke=0;Ke<Ce.length;Ke++){var lt=Ce[Ke].split("=");if(lt.length>1){const Tt=lt[0];lt=lt[1];const gn=Tt.split("_");oe=gn.length>=2&&gn[1]=="type"?oe+(Tt+"="+lt+"&"):oe+(Tt+"=redacted&")}}}else oe=null;else oe=Y;return"XMLHTTP REQ ("+A+") [attempt "+B+"]: "+y+`
`+v+`
`+oe})}function El(h,y,v,A,B,Y,oe){h.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+B+"]: "+y+`
`+v+`
`+Y+" "+oe})}function xi(h,y,v,A){h.info(function(){return"XMLHTTP TEXT ("+y+"): "+ri(h,v)+(A?" "+A:"")})}function wd(h,y){h.info(function(){return"TIMEOUT: "+y})}pr.prototype.info=function(){};function ri(h,y){if(!h.g)return y;if(!y)return null;try{const Y=JSON.parse(y);if(Y){for(h=0;h<Y.length;h++)if(Array.isArray(Y[h])){var v=Y[h];if(!(v.length<2)){var A=v[1];if(Array.isArray(A)&&!(A.length<1)){var B=A[0];if(B!="noop"&&B!="stop"&&B!="close")for(let oe=1;oe<A.length;oe++)A[oe]=""}}}}return Dn(Y)}catch{return y}}var vt={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ft={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Ni;function Ss(){}T(Ss,Cc),Ss.prototype.g=function(){return new XMLHttpRequest},Ni=new Ss;function As(h){return encodeURIComponent(String(h))}function Id(h){var y=1;h=h.split(":");const v=[];for(;y>0&&h.length;)v.push(h.shift()),y--;return h.length&&v.push(h.join(":")),v}function Gn(h,y,v,A){this.j=h,this.i=y,this.l=v,this.S=A||1,this.V=new Ts(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new yr}function yr(){this.i=null,this.g="",this.h=!1}var Pa={},si={};function ai(h,y,v){h.M=1,h.A=Oi(ht(y)),h.u=v,h.R=!0,_r(h,null)}function _r(h,y){h.F=Date.now(),bs(h),h.B=ht(h.A);var v=h.B,A=h.S;Array.isArray(A)||(A=[String(A)]),Mc(v.i,"t",A),h.C=0,v=h.j.L,h.h=new yr,h.g=Ga(h.j,v?y:null,!h.u),h.P>0&&(h.O=new Ad(p(h.Y,h,h.g),h.P)),y=h.V,v=h.g,A=h.ba;var B="readystatechange";Array.isArray(B)||(B&&(hr[0]=B.toString()),B=hr);for(let Y=0;Y<B.length;Y++){const oe=Fn(v,B[Y],A||y.handleEvent,!1,y.h||y);if(!oe)break;y.g[oe.key]=oe}y=h.J?te(h.J):{},h.u?(h.v||(h.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.B,h.v,h.u,y)):(h.v="GET",h.g.ea(h.B,h.v,null,y)),mr(),vl(h.i,h.v,h.B,h.l,h.S,h.u)}Gn.prototype.ba=function(h){h=h.target;const y=this.O;y&&$t(h)==3?y.j():this.Y(h)},Gn.prototype.Y=function(h){try{if(h==this.g)e:{const Ce=$t(this.g),lt=this.g.ya(),Ke=this.g.ca();if(!(Ce<3)&&(Ce!=3||this.g&&(this.h.h||this.g.la()||Ps(this.g)))){this.K||Ce!=4||lt==7||(lt==8||Ke<=0?mr(3):mr(2)),li(this);var y=this.g.ca();this.X=y;var v=vr(this);if(this.o=y==200,El(this.i,this.v,this.B,this.l,this.S,Ce,y),this.o){if(this.U&&!this.L){t:{if(this.g){var A,B=this.g;if((A=B.g?B.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(A)){var Y=A;break t}}Y=null}if(h=Y)xi(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ka(this,h);else{this.o=!1,this.m=3,_t(12),ui(this),ws(this);break e}}if(this.R){h=!0;let Tt;for(;!this.K&&this.C<v.length;)if(Tt=Nc(this,v),Tt==si){Ce==4&&(this.m=4,_t(14),h=!1),xi(this.i,this.l,null,"[Incomplete Response]");break}else if(Tt==Pa){this.m=4,_t(15),xi(this.i,this.l,v,"[Invalid Chunk]"),h=!1;break}else xi(this.i,this.l,Tt,null),ka(this,Tt);if(Et(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ce!=4||v.length!=0||this.h.h||(this.m=1,_t(16),h=!1),this.o=this.o&&h,!h)xi(this.i,this.l,v,"[Invalid Chunked Response]"),ui(this),ws(this);else if(v.length>0&&!this.W){this.W=!0;var oe=this.j;oe.g==this&&oe.aa&&!oe.P&&(oe.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),xl(oe),oe.P=!0,_t(11))}}else xi(this.i,this.l,v,null),ka(this,v);Ce==4&&ui(this),this.o&&!this.K&&(Ce==4?Nl(this.j,this):(this.o=!1,bs(this)))}else ks(this.g),y==400&&v.indexOf("Unknown SID")>0?(this.m=3,_t(12)):(this.m=0,_t(13)),ui(this),ws(this)}}}catch{}finally{}};function vr(h){if(!Et(h))return h.g.la();const y=Ps(h.g);if(y==="")return"";let v="";const A=y.length,B=$t(h.g)==4;if(!h.h.i){if(typeof TextDecoder>"u")return ui(h),ws(h),"";h.h.i=new c.TextDecoder}for(let Y=0;Y<A;Y++)h.h.h=!0,v+=h.h.i.decode(y[Y],{stream:!(B&&Y==A-1)});return y.length=0,h.h.g+=v,h.C=0,h.h.g}function Et(h){return h.g?h.v=="GET"&&h.M!=2&&h.j.Aa:!1}function Nc(h,y){var v=h.C,A=y.indexOf(`
`,v);return A==-1?si:(v=Number(y.substring(v,A)),isNaN(v)?Pa:(A+=1,A+v>y.length?si:(y=y.slice(A,A+v),h.C=A+v,y)))}Gn.prototype.cancel=function(){this.K=!0,ui(this)};function bs(h){h.T=Date.now()+h.H,oi(h,h.H)}function oi(h,y){if(h.D!=null)throw Error("WatchDog timer not null");h.D=gr(p(h.aa,h),y)}function li(h){h.D&&(c.clearTimeout(h.D),h.D=null)}Gn.prototype.aa=function(){this.D=null;const h=Date.now();h-this.T>=0?(wd(this.i,this.B),this.M!=2&&(mr(),_t(17)),ui(this),this.m=2,ws(this)):oi(this,this.T-h)};function ws(h){h.j.I==0||h.K||Nl(h.j,h)}function ui(h){li(h);var y=h.O;y&&typeof y.dispose=="function"&&y.dispose(),h.O=null,Yt(h.V),h.g&&(y=h.g,h.g=null,y.abort(),y.dispose())}function ka(h,y){try{var v=h.j;if(v.I!=0&&(v.g==h||Cs(v.h,h))){if(!h.L&&Cs(v.h,h)&&v.I==3){try{var A=v.Ba.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var B=A;if(B[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<h.F)Ha(v),ci(v);else break e;Dl(v),_t(18)}}else v.xa=B[1],0<v.xa-v.K&&B[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=gr(p(v.Va,v),6e3));Nn(v.h)<=1&&v.ta&&(v.ta=void 0)}else ki(v,11)}else if((h.L||v.g==h)&&Ha(v),!R(y))for(B=v.Ba.g.parse(y),y=0;y<B.length;y++){let Ke=B[y];const Tt=Ke[0];if(!(Tt<=v.K))if(v.K=Tt,Ke=Ke[1],v.I==2)if(Ke[0]=="c"){v.M=Ke[1],v.ba=Ke[2];const gn=Ke[3];gn!=null&&(v.ka=gn,v.j.info("VER="+v.ka));const hi=Ke[4];hi!=null&&(v.za=hi,v.j.info("SVER="+v.za));const Yn=Ke[5];Yn!=null&&typeof Yn=="number"&&Yn>0&&(A=1.5*Yn,v.O=A,v.j.info("backChannelRequestTimeoutMs_="+A)),A=v;const $n=h.g;if($n){const Xn=$n.g?$n.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Xn){var Y=A.h;Y.g||Xn.indexOf("spdy")==-1&&Xn.indexOf("quic")==-1&&Xn.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(La(Y,Y.h),Y.h=null))}if(A.G){const Ol=$n.g?$n.g.getResponseHeader("X-HTTP-Session-Id"):null;Ol&&(A.wa=Ol,Ze(A.J,A.G,Ol))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-h.F,v.j.info("Handshake RTT: "+v.T+"ms")),A=v;var oe=h;if(A.na=Fc(A,A.L?A.ba:null,A.W),oe.L){Vi(A.h,oe);var Ce=oe,lt=A.O;lt&&(Ce.H=lt),Ce.D&&(li(Ce),bs(Ce)),A.g=oe}else Bc(A);v.i.length>0&&zs(v)}else Ke[0]!="stop"&&Ke[0]!="close"||ki(v,7);else v.I==3&&(Ke[0]=="stop"||Ke[0]=="close"?Ke[0]=="stop"?ki(v,7):Us(v):Ke[0]!="noop"&&v.l&&v.l.qa(Ke),v.A=0)}}mr(4)}catch{}}var Rd=class{constructor(h,y){this.g=h,this.map=y}};function Is(h){this.l=h||10,c.PerformanceNavigationTiming?(h=c.performance.getEntriesByType("navigation"),h=h.length>0&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Rs(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Nn(h){return h.h?1:h.g?h.g.size:0}function Cs(h,y){return h.h?h.h==y:h.g?h.g.has(y):!1}function La(h,y){h.g?h.g.add(y):h.h=y}function Vi(h,y){h.h&&h.h==y?h.h=null:h.g&&h.g.has(y)&&h.g.delete(y)}Is.prototype.cancel=function(){if(this.i=Ua(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function Ua(h){if(h.h!=null)return h.i.concat(h.h.G);if(h.g!=null&&h.g.size!==0){let y=h.i;for(const v of h.g.values())y=y.concat(v.G);return y}return N(h.i)}var Ba=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Cd(h,y){if(h){h=h.split("&");for(let v=0;v<h.length;v++){const A=h[v].indexOf("=");let B,Y=null;A>=0?(B=h[v].substring(0,A),Y=h[v].substring(A+1)):B=h[v],y(B,Y?decodeURIComponent(Y.replace(/\+/g," ")):"")}}}function Kn(h){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;h instanceof Kn?(this.l=h.l,Er(this,h.j),this.o=h.o,this.g=h.g,Ds(this,h.u),this.h=h.h,Tr(this,Pc(h.i)),this.m=h.m):h&&(y=String(h).match(Ba))?(this.l=!1,Er(this,y[1]||"",!0),this.o=xs(y[2]||""),this.g=xs(y[3]||"",!0),Ds(this,y[4]),this.h=xs(y[5]||"",!0),Tr(this,y[6]||"",!0),this.m=xs(y[7]||"")):(this.l=!1,this.i=new Vn(null,this.l))}Kn.prototype.toString=function(){const h=[];var y=this.j;y&&h.push(Ut(y,Sl,!0),":");var v=this.g;return(v||y=="file")&&(h.push("//"),(y=this.o)&&h.push(Ut(y,Sl,!0),"@"),h.push(As(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&h.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&h.push("/"),h.push(Ut(v,v.charAt(0)=="/"?Sr:Al,!0))),(v=this.i.toString())&&h.push("?",v),(v=this.m)&&h.push("#",Ut(v,Oc)),h.join("")},Kn.prototype.resolve=function(h){const y=ht(this);let v=!!h.j;v?Er(y,h.j):v=!!h.o,v?y.o=h.o:v=!!h.g,v?y.g=h.g:v=h.u!=null;var A=h.h;if(v)Ds(y,h.u);else if(v=!!h.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var B=y.h.lastIndexOf("/");B!=-1&&(A=y.h.slice(0,B+1)+A)}if(B=A,B==".."||B==".")A="";else if(B.indexOf("./")!=-1||B.indexOf("/.")!=-1){A=B.lastIndexOf("/",0)==0,B=B.split("/");const Y=[];for(let oe=0;oe<B.length;){const Ce=B[oe++];Ce=="."?A&&oe==B.length&&Y.push(""):Ce==".."?((Y.length>1||Y.length==1&&Y[0]!="")&&Y.pop(),A&&oe==B.length&&Y.push("")):(Y.push(Ce),A=!0)}A=Y.join("/")}else A=B}return v?y.h=A:v=h.i.toString()!=="",v?Tr(y,Pc(h.i)):v=!!h.m,v&&(y.m=h.m),y};function ht(h){return new Kn(h)}function Er(h,y,v){h.j=v?xs(y,!0):y,h.j&&(h.j=h.j.replace(/:$/,""))}function Ds(h,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);h.u=y}else h.u=null}function Tr(h,y,v){y instanceof Vn?(h.i=y,Il(h.i,h.l)):(v||(y=Ut(y,Vc)),h.i=new Vn(y,h.l))}function Ze(h,y,v){h.i.set(y,v)}function Oi(h){return Ze(h,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),h}function xs(h,y){return h?y?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Ut(h,y,v){return typeof h=="string"?(h=encodeURI(h).replace(y,Tl),v&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Tl(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Sl=/[#\/\?@]/g,Al=/[#\?:]/g,Sr=/[#\?]/g,Vc=/[#\?@]/g,Oc=/#/g;function Vn(h,y){this.h=this.g=null,this.i=h||null,this.j=!!y}function Mi(h){h.g||(h.g=new Map,h.h=0,h.i&&Cd(h.i,function(y,v){h.add(decodeURIComponent(y.replace(/\+/g," ")),v)}))}r=Vn.prototype,r.add=function(h,y){Mi(this),this.i=null,h=Qn(this,h);let v=this.g.get(h);return v||this.g.set(h,v=[]),v.push(y),this.h+=1,this};function bl(h,y){Mi(h),y=Qn(h,y),h.g.has(y)&&(h.i=null,h.h-=h.g.get(y).length,h.g.delete(y))}function wl(h,y){return Mi(h),y=Qn(h,y),h.g.has(y)}r.forEach=function(h,y){Mi(this),this.g.forEach(function(v,A){v.forEach(function(B){h.call(y,B,A,this)},this)},this)};function za(h,y){Mi(h);let v=[];if(typeof y=="string")wl(h,y)&&(v=v.concat(h.g.get(Qn(h,y))));else for(h=Array.from(h.g.values()),y=0;y<h.length;y++)v=v.concat(h[y]);return v}r.set=function(h,y){return Mi(this),this.i=null,h=Qn(this,h),wl(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[y]),this.h+=1,this},r.get=function(h,y){return h?(h=za(this,h),h.length>0?String(h[0]):y):y};function Mc(h,y,v){bl(h,y),v.length>0&&(h.i=null,h.g.set(Qn(h,y),N(v)),h.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],y=Array.from(this.g.keys());for(let A=0;A<y.length;A++){var v=y[A];const B=As(v);v=za(this,v);for(let Y=0;Y<v.length;Y++){let oe=B;v[Y]!==""&&(oe+="="+As(v[Y])),h.push(oe)}}return this.i=h.join("&")};function Pc(h){const y=new Vn;return y.i=h.i,h.g&&(y.g=new Map(h.g),y.h=h.h),y}function Qn(h,y){return y=String(y),h.j&&(y=y.toLowerCase()),y}function Il(h,y){y&&!h.j&&(Mi(h),h.i=null,h.g.forEach(function(v,A){const B=A.toLowerCase();A!=B&&(bl(this,A),Mc(this,B,v))},h)),h.j=y}function Rl(h,y){const v=new pr;if(c.Image){const A=new Image;A.onload=_(rn,v,"TestLoadImage: loaded",!0,y,A),A.onerror=_(rn,v,"TestLoadImage: error",!1,y,A),A.onabort=_(rn,v,"TestLoadImage: abort",!1,y,A),A.ontimeout=_(rn,v,"TestLoadImage: timeout",!1,y,A),c.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=h}else y(!1)}function Ar(h,y){const v=new pr,A=new AbortController,B=setTimeout(()=>{A.abort(),rn(v,"TestPingServer: timeout",!1,y)},1e4);fetch(h,{signal:A.signal}).then(Y=>{clearTimeout(B),Y.ok?rn(v,"TestPingServer: ok",!0,y):rn(v,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(B),rn(v,"TestPingServer: error",!1,y)})}function rn(h,y,v,A,B){try{B&&(B.onload=null,B.onerror=null,B.onabort=null,B.ontimeout=null),A(v)}catch{}}function kc(){this.g=new bd}function Ns(h){this.i=h.Sb||null,this.h=h.ab||!1}T(Ns,Cc),Ns.prototype.g=function(){return new Vs(this.i,this.h)};function Vs(h,y){xt.call(this),this.H=h,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(Vs,xt),r=Vs.prototype,r.open=function(h,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=h,this.D=y,this.readyState=1,Pi(this)},r.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};h&&(y.body=h),(this.H||c).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,sn(this)),this.readyState=0},r.Pa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,Pi(this)),this.g&&(this.readyState=3,Pi(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;br(this)}else h.text().then(this.Oa.bind(this),this.ga.bind(this))};function br(h){h.j.read().then(h.Ma.bind(h)).catch(h.ga.bind(h))}r.Ma=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var y=h.value?h.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!h.done}))&&(this.response=this.responseText+=y)}h.done?sn(this):Pi(this),this.readyState==3&&br(this)}},r.Oa=function(h){this.g&&(this.response=this.responseText=h,sn(this))},r.Na=function(h){this.g&&(this.response=h,sn(this))},r.ga=function(){this.g&&sn(this)};function sn(h){h.readyState=4,h.l=null,h.j=null,h.B=null,Pi(h)}r.setRequestHeader=function(h,y){this.A.append(h,y)},r.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],y=this.h.entries();for(var v=y.next();!v.done;)v=v.value,h.push(v[0]+": "+v[1]),v=y.next();return h.join(`\r
`)};function Pi(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Vs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function wr(h){let y="";return xe(h,function(v,A){y+=A,y+=":",y+=v,y+=`\r
`}),y}function On(h,y,v){e:{for(A in v){var A=!1;break e}A=!0}A||(v=wr(v),typeof h=="string"?v!=null&&As(v):Ze(h,y,v))}function rt(h){xt.call(this),this.headers=new Map,this.L=h||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(rt,xt);var ja=/^https?$/i,Lc=["POST","PUT"];r=rt.prototype,r.Fa=function(h){this.H=h},r.ea=function(h,y,v,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);y=y?y.toUpperCase():"GET",this.D=h,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Ni.g(),this.g.onreadystatechange=b(p(this.Ca,this));try{this.B=!0,this.g.open(y,String(h),!0),this.B=!1}catch(Y){Os(this,Y);return}if(h=v||"",v=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var B in A)v.set(B,A[B]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const Y of A.keys())v.set(Y,A.get(Y));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(v.keys()).find(Y=>Y.toLowerCase()=="content-type"),B=c.FormData&&h instanceof c.FormData,!(Array.prototype.indexOf.call(Lc,y,void 0)>=0)||A||B||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,oe]of v)this.g.setRequestHeader(Y,oe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(h),this.v=!1}catch(Y){Os(this,Y)}};function Os(h,y){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=y,h.o=5,Ms(h),Nt(h)}function Ms(h){h.A||(h.A=!0,Lt(h,"complete"),Lt(h,"error"))}r.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=h||7,Lt(this,"complete"),Lt(this,"abort"),Nt(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Nt(this,!0)),rt.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?Cl(this):this.Xa())},r.Xa=function(){Cl(this)};function Cl(h){if(h.h&&typeof l<"u"){if(h.v&&$t(h)==4)setTimeout(h.Ca.bind(h),0);else if(Lt(h,"readystatechange"),$t(h)==4){h.h=!1;try{const Y=h.ca();e:switch(Y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var v;if(!(v=y)){var A;if(A=Y===0){let oe=String(h.D).match(Ba)[1]||null;!oe&&c.self&&c.self.location&&(oe=c.self.location.protocol.slice(0,-1)),A=!ja.test(oe?oe.toLowerCase():"")}v=A}if(v)Lt(h,"complete"),Lt(h,"success");else{h.o=6;try{var B=$t(h)>2?h.g.statusText:""}catch{B=""}h.l=B+" ["+h.ca()+"]",Ms(h)}}finally{Nt(h)}}}}function Nt(h,y){if(h.g){h.m&&(clearTimeout(h.m),h.m=null);const v=h.g;h.g=null,y||Lt(h,"ready");try{v.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function $t(h){return h.g?h.g.readyState:0}r.ca=function(){try{return $t(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(h){if(this.g){var y=this.g.responseText;return h&&y.indexOf(h)==0&&(y=y.substring(h.length)),nn(y)}};function Ps(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.F){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function ks(h){const y={};h=(h.g&&$t(h)>=2&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<h.length;A++){if(R(h[A]))continue;var v=Id(h[A]);const B=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const Y=y[B]||[];y[B]=Y,Y.push(v)}x(y,function(A){return A.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ls(h,y,v){return v&&v.internalChannelParams&&v.internalChannelParams[h]||y}function qa(h){this.za=0,this.i=[],this.j=new pr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Ls("failFast",!1,h),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Ls("baseRetryDelayMs",5e3,h),this.Za=Ls("retryDelaySeedMs",1e4,h),this.Ta=Ls("forwardChannelMaxRetries",2,h),this.va=Ls("forwardChannelRequestTimeoutMs",2e4,h),this.ma=h&&h.xmlHttpFactory||void 0,this.Ua=h&&h.Rb||void 0,this.Aa=h&&h.useFetchStreams||!1,this.O=void 0,this.L=h&&h.supportsCrossDomainXhr||!1,this.M="",this.h=new Is(h&&h.concurrentRequestLimit),this.Ba=new kc,this.S=h&&h.fastHandshake||!1,this.R=h&&h.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=h&&h.Pb||!1,h&&h.ua&&this.j.ua(),h&&h.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&h&&h.detectBufferingProxy||!1,this.ia=void 0,h&&h.longPollingTimeout&&h.longPollingTimeout>0&&(this.ia=h.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=qa.prototype,r.ka=8,r.I=1,r.connect=function(h,y,v,A){_t(0),this.W=h,this.H=y||{},v&&A!==void 0&&(this.H.OSID=v,this.H.OAID=A),this.F=this.X,this.J=Fc(this,null,this.W),zs(this)};function Us(h){if(Bs(h),h.I==3){var y=h.V++,v=ht(h.J);if(Ze(v,"SID",h.M),Ze(v,"RID",y),Ze(v,"TYPE","terminate"),js(h,v),y=new Gn(h,h.j,y),y.M=2,y.A=Oi(ht(v)),v=!1,c.navigator&&c.navigator.sendBeacon)try{v=c.navigator.sendBeacon(y.A.toString(),"")}catch{}!v&&c.Image&&(new Image().src=y.A,v=!0),v||(y.g=Ga(y.j,null),y.g.ea(y.A)),y.F=Date.now(),bs(y)}qc(h)}function ci(h){h.g&&(xl(h),h.g.cancel(),h.g=null)}function Bs(h){ci(h),h.v&&(c.clearTimeout(h.v),h.v=null),Ha(h),h.h.cancel(),h.m&&(typeof h.m=="number"&&c.clearTimeout(h.m),h.m=null)}function zs(h){if(!Rs(h.h)&&!h.m){h.m=!0;var y=h.Ea;se||w(),de||(se(),de=!0),D.add(y,h),h.D=0}}function Dd(h,y){return Nn(h.h)>=h.h.j-(h.m?1:0)?!1:h.m?(h.i=y.G.concat(h.i),!0):h.I==1||h.I==2||h.D>=(h.Sa?0:h.Ta)?!1:(h.m=gr(p(h.Ea,h,y),jc(h,h.D)),h.D++,!0)}r.Ea=function(h){if(this.m)if(this.m=null,this.I==1){if(!h){this.V=Math.floor(Math.random()*1e5),h=this.V++;const B=new Gn(this,this.j,h);let Y=this.o;if(this.U&&(Y?(Y=te(Y),le(Y,this.U)):Y=this.U),this.u!==null||this.R||(B.J=Y,Y=null),this.S)e:{for(var y=0,v=0;v<this.i.length;v++){t:{var A=this.i[v];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,y>4096){y=v;break e}if(y===4096||v===this.i.length-1){y=v+1;break e}}y=1e3}else y=1e3;y=Fa(this,B,y),v=ht(this.J),Ze(v,"RID",h),Ze(v,"CVER",22),this.G&&Ze(v,"X-HTTP-Session-Id",this.G),js(this,v),Y&&(this.R?y="headers="+As(wr(Y))+"&"+y:this.u&&On(v,this.u,Y)),La(this.h,B),this.Ra&&Ze(v,"TYPE","init"),this.S?(Ze(v,"$req",y),Ze(v,"SID","null"),B.U=!0,ai(B,v,null)):ai(B,v,y),this.I=2}}else this.I==3&&(h?Uc(this,h):this.i.length==0||Rs(this.h)||Uc(this))};function Uc(h,y){var v;y?v=y.l:v=h.V++;const A=ht(h.J);Ze(A,"SID",h.M),Ze(A,"RID",v),Ze(A,"AID",h.K),js(h,A),h.u&&h.o&&On(A,h.u,h.o),v=new Gn(h,h.j,v,h.D+1),h.u===null&&(v.J=h.o),y&&(h.i=y.G.concat(h.i)),y=Fa(h,v,1e3),v.H=Math.round(h.va*.5)+Math.round(h.va*.5*Math.random()),La(h.h,v),ai(v,A,y)}function js(h,y){h.H&&xe(h.H,function(v,A){Ze(y,A,v)}),h.l&&xe({},function(v,A){Ze(y,A,v)})}function Fa(h,y,v){v=Math.min(h.i.length,v);const A=h.l?p(h.l.Ka,h.l,h):null;e:{var B=h.i;let Ce=-1;for(;;){const lt=["count="+v];Ce==-1?v>0?(Ce=B[0].g,lt.push("ofs="+Ce)):Ce=0:lt.push("ofs="+Ce);let Ke=!0;for(let Tt=0;Tt<v;Tt++){var Y=B[Tt].g;const gn=B[Tt].map;if(Y-=Ce,Y<0)Ce=Math.max(0,B[Tt].g-100),Ke=!1;else try{Y="req"+Y+"_"||"";try{var oe=gn instanceof Map?gn:Object.entries(gn);for(const[hi,Yn]of oe){let $n=Yn;d(Yn)&&($n=Dn(Yn)),lt.push(Y+hi+"="+encodeURIComponent($n))}}catch(hi){throw lt.push(Y+"type="+encodeURIComponent("_badmap")),hi}}catch{A&&A(gn)}}if(Ke){oe=lt.join("&");break e}}oe=void 0}return h=h.i.splice(0,v),y.G=h,oe}function Bc(h){if(!h.g&&!h.v){h.Y=1;var y=h.Da;se||w(),de||(se(),de=!0),D.add(y,h),h.A=0}}function Dl(h){return h.g||h.v||h.A>=3?!1:(h.Y++,h.v=gr(p(h.Da,h),jc(h,h.A)),h.A++,!0)}r.Da=function(){if(this.v=null,zc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var h=4*this.T;this.j.info("BP detection timer enabled: "+h),this.B=gr(p(this.Wa,this),h)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,_t(10),ci(this),zc(this))};function xl(h){h.B!=null&&(c.clearTimeout(h.B),h.B=null)}function zc(h){h.g=new Gn(h,h.j,"rpc",h.Y),h.u===null&&(h.g.J=h.o),h.g.P=0;var y=ht(h.na);Ze(y,"RID","rpc"),Ze(y,"SID",h.M),Ze(y,"AID",h.K),Ze(y,"CI",h.F?"0":"1"),!h.F&&h.ia&&Ze(y,"TO",h.ia),Ze(y,"TYPE","xmlhttp"),js(h,y),h.u&&h.o&&On(y,h.u,h.o),h.O&&(h.g.H=h.O);var v=h.g;h=h.ba,v.M=1,v.A=Oi(ht(y)),v.u=null,v.R=!0,_r(v,h)}r.Va=function(){this.C!=null&&(this.C=null,ci(this),Dl(this),_t(19))};function Ha(h){h.C!=null&&(c.clearTimeout(h.C),h.C=null)}function Nl(h,y){var v=null;if(h.g==y){Ha(h),xl(h),h.g=null;var A=2}else if(Cs(h.h,y))v=y.G,Vi(h.h,y),A=1;else return;if(h.I!=0){if(y.o)if(A==1){v=y.u?y.u.length:0,y=Date.now()-y.F;var B=h.D;A=Oa(),Lt(A,new xc(A,v)),zs(h)}else Bc(h);else if(B=y.m,B==3||B==0&&y.X>0||!(A==1&&Dd(h,y)||A==2&&Dl(h)))switch(v&&v.length>0&&(y=h.h,y.i=y.i.concat(v)),B){case 1:ki(h,5);break;case 4:ki(h,10);break;case 3:ki(h,6);break;default:ki(h,2)}}}function jc(h,y){let v=h.Qa+Math.floor(Math.random()*h.Za);return h.isActive()||(v*=2),v*y}function ki(h,y){if(h.j.info("Error code "+y),y==2){var v=p(h.bb,h),A=h.Ua;const B=!A;A=new Kn(A||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||Er(A,"https"),Oi(A),B?Rl(A.toString(),v):Ar(A.toString(),v)}else _t(2);h.I=0,h.l&&h.l.pa(y),qc(h),Bs(h)}r.bb=function(h){h?(this.j.info("Successfully pinged google.com"),_t(2)):(this.j.info("Failed to ping google.com"),_t(1))};function qc(h){if(h.I=0,h.ja=[],h.l){const y=Ua(h.h);(y.length!=0||h.i.length!=0)&&(q(h.ja,y),q(h.ja,h.i),h.h.i.length=0,N(h.i),h.i.length=0),h.l.oa()}}function Fc(h,y,v){var A=v instanceof Kn?ht(v):new Kn(v);if(A.g!="")y&&(A.g=y+"."+A.g),Ds(A,A.u);else{var B=c.location;A=B.protocol,y=y?y+"."+B.hostname:B.hostname,B=+B.port;const Y=new Kn(null);A&&Er(Y,A),y&&(Y.g=y),B&&Ds(Y,B),v&&(Y.h=v),A=Y}return v=h.G,y=h.wa,v&&y&&Ze(A,v,y),Ze(A,"VER",h.ka),js(h,A),A}function Ga(h,y,v){if(y&&!h.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=h.Aa&&!h.ma?new rt(new Ns({ab:v})):new rt(h.ma),y.Fa(h.L),y}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function Hc(){}r=Hc.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Ka(){}Ka.prototype.g=function(h,y){return new an(h,y)};function an(h,y){xt.call(this),this.g=new qa(y),this.l=h,this.h=y&&y.messageUrlParams||null,h=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(h?h["X-WebChannel-Content-Type"]=y.messageContentType:h={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(h?h["X-WebChannel-Client-Profile"]=y.sa:h={"X-WebChannel-Client-Profile":y.sa}),this.g.U=h,(h=y&&y.Qb)&&!R(h)&&(this.g.u=h),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!R(y)&&(this.g.G=y,h=this.h,h!==null&&y in h&&(h=this.h,y in h&&delete h[y])),this.j=new Ir(this)}T(an,xt),an.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},an.prototype.close=function(){Us(this.g)},an.prototype.o=function(h){var y=this.g;if(typeof h=="string"){var v={};v.__data__=h,h=v}else this.v&&(v={},v.__data__=Dn(h),h=v);y.i.push(new Rd(y.Ya++,h)),y.I==3&&zs(y)},an.prototype.N=function(){this.g.l=null,delete this.j,Us(this.g),delete this.g,an.Z.N.call(this)};function Vl(h){fr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var y=h.__sm__;if(y){e:{for(const v in y){h=v;break e}h=void 0}(this.i=h)&&(h=this.i,y=y!==null&&h in y?y[h]:void 0),this.data=y}else this.data=h}T(Vl,fr);function Gc(){Hn.call(this),this.status=1}T(Gc,Hn);function Ir(h){this.g=h}T(Ir,Hc),Ir.prototype.ra=function(){Lt(this.g,"a")},Ir.prototype.qa=function(h){Lt(this.g,new Vl(h))},Ir.prototype.pa=function(h){Lt(this.g,new Gc)},Ir.prototype.oa=function(){Lt(this.g,"b")},Ka.prototype.createWebChannel=Ka.prototype.g,an.prototype.send=an.prototype.o,an.prototype.open=an.prototype.m,an.prototype.close=an.prototype.close,qA=function(){return new Ka},jA=function(){return Oa()},zA=xn,rp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},vt.NO_ERROR=0,vt.TIMEOUT=8,vt.HTTP_ERROR=6,uf=vt,Ft.COMPLETE="complete",BA=Ft,Dc.EventType=ii,ii.OPEN="a",ii.CLOSE="b",ii.ERROR="c",ii.MESSAGE="d",xt.prototype.listen=xt.prototype.J,xu=Dc,rt.prototype.listenOnce=rt.prototype.K,rt.prototype.getLastError=rt.prototype.Ha,rt.prototype.getLastErrorCode=rt.prototype.ya,rt.prototype.getStatus=rt.prototype.ca,rt.prototype.getResponseJson=rt.prototype.La,rt.prototype.getResponseText=rt.prototype.la,rt.prototype.send=rt.prototype.ea,rt.prototype.setWithCredentials=rt.prototype.Fa,UA=rt}).apply(typeof Yh<"u"?Yh:typeof self<"u"?self:typeof window<"u"?window:{});const WT="@firebase/firestore",ZT="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Zt.UNAUTHENTICATED=new Zt(null),Zt.GOOGLE_CREDENTIALS=new Zt("google-credentials-uid"),Zt.FIRST_PARTY=new Zt("first-party-uid"),Zt.MOCK_USER=new Zt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ul="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea=new Bp("@firebase/firestore");function Co(){return Ea.logLevel}function re(r,...e){if(Ea.logLevel<=Le.DEBUG){const t=e.map($p);Ea.debug(`Firestore (${ul}): ${r}`,...t)}}function bt(r,...e){if(Ea.logLevel<=Le.ERROR){const t=e.map($p);Ea.error(`Firestore (${ul}): ${r}`,...t)}}function Xu(r,...e){if(Ea.logLevel<=Le.WARN){const t=e.map($p);Ea.warn(`Firestore (${ul}): ${r}`,...t)}}function $p(r){if(typeof r=="string")return r;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(r)}catch{return r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function me(r,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,FA(r,i,t)}function FA(r,e,t){let i=`FIRESTORE (${ul}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw bt(i),new Error(i)}function ve(r,e,t,i){let a="Unexpected state";typeof t=="string"?a=t:i=t,r||FA(e,a,i)}function pe(r,e){return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ae extends lr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wx{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Zx{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Zt.UNAUTHENTICATED)))}shutdown(){}}class eN{constructor(e){this.t=e,this.currentUser=Zt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ve(this.o===void 0,42304);let i=this.i;const a=m=>this.i!==i?(i=this.i,t(m)):Promise.resolve();let l=new er;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new er,e.enqueueRetryable((()=>a(this.currentUser)))};const c=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await a(this.currentUser)}))},d=m=>{re("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((m=>d(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?d(m):(re("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new er)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(re("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ve(typeof i.accessToken=="string",31837,{l:i}),new Wx(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ve(e===null||typeof e=="string",2055,{h:e}),new Zt(e)}}class tN{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=Zt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class nN{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new tN(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Zt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class e0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class iN{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ti(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ve(this.o===void 0,3512);const i=l=>{l.error!=null&&re("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,re("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>i(l)))};const a=l=>{re("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):re("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new e0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ve(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new e0(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rN(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<r;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const a=rN(40);for(let l=0;l<a.length;++l)i.length<20&&a[l]<t&&(i+=e.charAt(a[l]%62))}return i}}function Re(r,e){return r<e?-1:r>e?1:0}function sp(r,e){const t=Math.min(r.length,e.length);for(let i=0;i<t;i++){const a=r.charAt(i),l=e.charAt(i);if(a!==l)return Pg(a)===Pg(l)?Re(a,l):Pg(a)?1:-1}return Re(r.length,e.length)}const sN=55296,aN=57343;function Pg(r){const e=r.charCodeAt(0);return e>=sN&&e<=aN}function zo(r,e,t){return r.length===e.length&&r.every(((i,a)=>t(i,e[a])))}function HA(r){return r+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0="__name__";class yi{constructor(e,t,i){t===void 0?t=0:t>e.length&&me(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&me(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return yi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof yi?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const l=yi.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Re(e.length,t.length)}static compareSegments(e,t){const i=yi.isNumericId(e),a=yi.isNumericId(t);return i&&!a?-1:!i&&a?1:i&&a?yi.extractNumericId(e).compare(yi.extractNumericId(t)):sp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ls.fromString(e.substring(4,e.length-2))}}class Ge extends yi{construct(e,t,i){return new Ge(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ae(J.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((a=>a.length>0)))}return new Ge(t)}static emptyPath(){return new Ge([])}}const oN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class dt extends yi{construct(e,t,i){return new dt(e,t,i)}static isValidIdentifier(e){return oN.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),dt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===t0}static keyField(){return new dt([t0])}static fromServerFormat(e){const t=[];let i="",a=0;const l=()=>{if(i.length===0)throw new ae(J.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;a<e.length;){const d=e[a];if(d==="\\"){if(a+1===e.length)throw new ae(J.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new ae(J.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=m,a+=2}else d==="`"?(c=!c,a++):d!=="."||c?(i+=d,a++):(l(),a++)}if(l(),c)throw new ae(J.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new dt(t)}static emptyPath(){return new dt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.path=e}static fromPath(e){return new ce(Ge.fromString(e))}static fromName(e){return new ce(Ge.fromString(e).popFirst(5))}static empty(){return new ce(Ge.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ge.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ge.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ce(new Ge(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(r,e,t){if(!t)throw new ae(J.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function lN(r,e,t,i){if(e===!0&&i===!0)throw new ae(J.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function n0(r){if(!ce.isDocumentKey(r))throw new ae(J.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function i0(r){if(ce.isDocumentKey(r))throw new ae(J.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function KA(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function nd(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":me(12329,{type:typeof r})}function Lo(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ae(J.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=nd(r);throw new ae(J.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(r,e){const t={typeString:r};return e&&(t.value=e),t}function Ec(r,e){if(!KA(r))throw new ae(J.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const a=e[i].typeString,l="value"in e[i]?{value:e[i].value}:void 0;if(!(i in r)){t=`JSON missing required field: '${i}'`;break}const c=r[i];if(a&&typeof c!==a){t=`JSON field '${i}' must be a ${a}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${i}' field to equal '${l.value}'`;break}}if(t)throw new ae(J.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0=-62135596800,s0=1e6;class $e{static now(){return $e.fromMillis(Date.now())}static fromDate(e){return $e.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*s0);return new $e(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ae(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ae(J.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<r0)throw new ae(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ae(J.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/s0}_compareTo(e){return this.seconds===e.seconds?Re(this.nanoseconds,e.nanoseconds):Re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:$e._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ec(e,$e._jsonSchema))return new $e(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-r0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}$e._jsonSchemaVersion="firestore/timestamp/1.0",$e._jsonSchema={type:Dt("string",$e._jsonSchemaVersion),seconds:Dt("number"),nanoseconds:Dt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{static fromTimestamp(e){return new Te(e)}static min(){return new Te(new $e(0,0))}static max(){return new Te(new $e(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo=-1;class Df{constructor(e,t,i,a){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=a}}function ap(r){return r.fields.find((e=>e.kind===2))}function sa(r){return r.fields.filter((e=>e.kind!==2))}Df.UNKNOWN_ID=-1;class cf{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ju{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ju(0,Cn.min())}}function QA(r,e){const t=r.toTimestamp().seconds,i=r.toTimestamp().nanoseconds+1,a=Te.fromTimestamp(i===1e9?new $e(t+1,0):new $e(t,i));return new Cn(a,ce.empty(),e)}function YA(r){return new Cn(r.readTime,r.key,jo)}class Cn{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Cn(Te.min(),ce.empty(),jo)}static max(){return new Cn(Te.max(),ce.empty(),jo)}}function Jp(r,e){let t=r.readTime.compareTo(e.readTime);return t!==0?t:(t=ce.comparator(r.documentKey,e.documentKey),t!==0?t:Re(r.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $A="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class XA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ps(r){if(r.code!==J.FAILED_PRECONDITION||r.message!==$A)throw r;re("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new L(((i,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(i,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(i,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof L?t:L.resolve(t)}catch(t){return L.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):L.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):L.reject(t)}static resolve(e){return new L(((t,i)=>{t(e)}))}static reject(e){return new L(((t,i)=>{i(e)}))}static waitFor(e){return new L(((t,i)=>{let a=0,l=0,c=!1;e.forEach((d=>{++a,d.next((()=>{++l,c&&l===a&&t()}),(m=>i(m)))})),c=!0,l===a&&t()}))}static or(e){let t=L.resolve(!1);for(const i of e)t=t.next((a=>a?L.resolve(a):i()));return t}static forEach(e,t){const i=[];return e.forEach(((a,l)=>{i.push(t.call(this,a,l))})),this.waitFor(i)}static mapArray(e,t){return new L(((i,a)=>{const l=e.length,c=new Array(l);let d=0;for(let m=0;m<l;m++){const p=m;t(e[p]).next((_=>{c[p]=_,++d,d===l&&i(c)}),(_=>a(_)))}}))}static doWhile(e,t){return new L(((i,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):i()};l()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const An="SimpleDb";class id{static open(e,t,i,a){try{return new id(t,e.transaction(a,i))}catch(l){throw new Lu(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new er,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Lu(e,t.error)):this.S.resolve()},this.transaction.onerror=i=>{const a=Wp(i.target.error);this.S.reject(new Lu(e,a))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(re(An,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new cN(t)}}class us{static delete(e){return re(An,"Removing database:",e),oa(KS().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!ZS())return!1;if(us.F())return!0;const e=Pt(),t=us.M(e),i=0<t&&t<10,a=JA(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||l)}static F(){return typeof process<"u"&&process.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(e,t,i){this.name=e,this.version=t,this.N=i,this.B=null,us.M(Pt())===12.2&&bt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(re(An,"Opening database:",this.name),this.db=await new Promise(((t,i)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const c=l.target.result;t(c)},a.onblocked=()=>{i(new Lu(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const c=l.target.error;c.name==="VersionError"?i(new ae(J.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):c.name==="InvalidStateError"?i(new ae(J.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+c)):i(new Lu(e,c))},a.onupgradeneeded=l=>{re(An,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const c=l.target.result;this.N.k(c,a.transaction,l.oldVersion,this.version).next((()=>{re(An,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=t=>this.q(t)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,i,a){const l=t==="readonly";let c=0;for(;;){++c;try{this.db=await this.L(e);const d=id.open(this.db,e,l?"readonly":"readwrite",i),m=a(d).next((p=>(d.C(),p))).catch((p=>(d.abort(p),L.reject(p)))).toPromise();return m.catch((()=>{})),await d.D,m}catch(d){const m=d,p=m.name!=="FirebaseError"&&c<3;if(re(An,"Transaction failed with error:",m.message,"Retrying:",p),this.close(),!p)return Promise.reject(m)}}}close(){this.db&&this.db.close(),this.db=void 0}}function JA(r){const e=r.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class uN{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return oa(this.U.delete())}}class Lu extends ae{constructor(e,t){super(J.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ys(r){return r.name==="IndexedDbTransactionError"}class cN{constructor(e){this.store=e}put(e,t){let i;return t!==void 0?(re(An,"PUT",this.store.name,e,t),i=this.store.put(t,e)):(re(An,"PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),oa(i)}add(e){return re(An,"ADD",this.store.name,e,e),oa(this.store.add(e))}get(e){return oa(this.store.get(e)).next((t=>(t===void 0&&(t=null),re(An,"GET",this.store.name,e,t),t)))}delete(e){return re(An,"DELETE",this.store.name,e),oa(this.store.delete(e))}count(){return re(An,"COUNT",this.store.name),oa(this.store.count())}J(e,t){const i=this.options(e,t),a=i.index?this.store.index(i.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(i.range);return new L(((c,d)=>{l.onerror=m=>{d(m.target.error)},l.onsuccess=m=>{c(m.target.result)}}))}{const l=this.cursor(i),c=[];return this.H(l,((d,m)=>{c.push(m)})).next((()=>c))}}Y(e,t){const i=this.store.getAll(e,t===null?void 0:t);return new L(((a,l)=>{i.onerror=c=>{l(c.target.error)},i.onsuccess=c=>{a(c.target.result)}}))}Z(e,t){re(An,"DELETE ALL",this.store.name);const i=this.options(e,t);i.X=!1;const a=this.cursor(i);return this.H(a,((l,c,d)=>d.delete()))}ee(e,t){let i;t?i=e:(i={},t=e);const a=this.cursor(i);return this.H(a,t)}te(e){const t=this.cursor({});return new L(((i,a)=>{t.onerror=l=>{const c=Wp(l.target.error);a(c)},t.onsuccess=l=>{const c=l.target.result;c?e(c.primaryKey,c.value).next((d=>{d?c.continue():i()})):i()}}))}H(e,t){const i=[];return new L(((a,l)=>{e.onerror=c=>{l(c.target.error)},e.onsuccess=c=>{const d=c.target.result;if(!d)return void a();const m=new uN(d),p=t(d.primaryKey,d.value,m);if(p instanceof L){const _=p.catch((T=>(m.done(),L.reject(T))));i.push(_)}m.isDone?a():m.G===null?d.continue():d.continue(m.G)}})).next((()=>L.waitFor(i)))}options(e,t){let i;return e!==void 0&&(typeof e=="string"?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.X?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function oa(r){return new L(((e,t)=>{r.onsuccess=i=>{const a=i.target.result;e(a)},r.onerror=i=>{const a=Wp(i.target.error);t(a)}}))}let a0=!1;function Wp(r){const e=us.M(Pt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const i=new ae("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return a0||(a0=!0,setTimeout((()=>{throw i}),0)),i}}return r}const Uu="IndexBackfiller";class hN{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){re(Uu,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();re(Uu,`Documents written: ${t}`)}catch(t){ys(t)?re(Uu,"Ignoring IndexedDB error during index backfill: ",t):await ps(t)}await this.re(6e4)}))}}class fN{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const i=new Set;let a=t,l=!0;return L.doWhile((()=>l===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((c=>{if(c!==null&&!i.has(c))return re(Uu,`Processing collection: ${c}`),this.oe(e,c,a).next((d=>{a-=d,i.add(c)}));l=!1})))).next((()=>t-a))}oe(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((a=>this.localStore.localDocuments.getNextDocuments(e,t,a,i).next((l=>{const c=l.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next((()=>this._e(a,l))).next((d=>(re(Uu,`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d)))).next((()=>c.size))}))))}_e(e,t){let i=e;return t.changes.forEach(((a,l)=>{const c=YA(l);Jp(c,i)>0&&(i=c)})),new Cn(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}mn.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fa=-1;function rd(r){return r==null}function Wu(r){return r===0&&1/r==-1/0}function WA(r){return typeof r=="number"&&Number.isInteger(r)&&!Wu(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xf="";function tn(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=o0(e)),e=dN(r.get(t),e);return o0(e)}function dN(r,e){let t=e;const i=r.length;for(let a=0;a<i;a++){const l=r.charAt(a);switch(l){case"\0":t+="";break;case xf:t+="";break;default:t+=l}}return t}function o0(r){return r+xf+""}function vi(r){const e=r.length;if(ve(e>=2,64408,{path:r}),e===2)return ve(r.charAt(0)===xf&&r.charAt(1)==="",56145,{path:r}),Ge.emptyPath();const t=e-2,i=[];let a="";for(let l=0;l<e;){const c=r.indexOf(xf,l);switch((c<0||c>t)&&me(50515,{path:r}),r.charAt(c+1)){case"":const d=r.substring(l,c);let m;a.length===0?m=d:(a+=d,m=a,a=""),i.push(m);break;case"":a+=r.substring(l,c),a+="\0";break;case"":a+=r.substring(l,c+1);break;default:me(61167,{path:r})}l=c+2}return new Ge(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa="remoteDocuments",Tc="owner",So="owner",Zu="mutationQueues",mN="userId",ei="mutations",l0="batchId",ha="userMutationsIndex",u0=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hf(r,e){return[r,tn(e)]}function ZA(r,e,t){return[r,tn(e),t]}const gN={},qo="documentMutations",Nf="remoteDocumentsV14",pN=["prefixPath","collectionGroup","readTime","documentId"],ff="documentKeyIndex",yN=["prefixPath","collectionGroup","documentId"],eb="collectionGroupIndex",_N=["collectionGroup","readTime","prefixPath","documentId"],ec="remoteDocumentGlobal",op="remoteDocumentGlobalKey",Fo="targets",tb="queryTargetsIndex",vN=["canonicalId","targetId"],Ho="targetDocuments",EN=["targetId","path"],Zp="documentTargetsIndex",TN=["path","targetId"],Vf="targetGlobalKey",da="targetGlobal",tc="collectionParents",SN=["collectionId","parent"],Go="clientMetadata",AN="clientId",sd="bundles",bN="bundleId",ad="namedQueries",wN="name",ey="indexConfiguration",IN="indexId",lp="collectionGroupIndex",RN="collectionGroup",Bu="indexState",CN=["indexId","uid"],nb="sequenceNumberIndex",DN=["uid","sequenceNumber"],zu="indexEntries",xN=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ib="documentKeyIndex",NN=["indexId","uid","orderedDocumentKey"],od="documentOverlays",VN=["userId","collectionPath","documentId"],up="collectionPathOverlayIndex",ON=["userId","collectionPath","largestBatchId"],rb="collectionGroupOverlayIndex",MN=["userId","collectionGroup","largestBatchId"],ty="globals",PN="name",sb=[Zu,ei,qo,aa,Fo,Tc,da,Ho,Go,ec,tc,sd,ad],kN=[...sb,od],ab=[Zu,ei,qo,Nf,Fo,Tc,da,Ho,Go,ec,tc,sd,ad,od],ob=ab,ny=[...ob,ey,Bu,zu],LN=ny,lb=[...ny,ty],UN=lb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp extends XA{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function kt(r,e){const t=pe(r);return us.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c0(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function Ca(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function ub(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e,t){this.comparator=e,this.root=t||Qt.EMPTY}insert(e,t){return new at(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Qt.BLACK,null,null))}remove(e){return new at(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Qt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(a===0)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new $h(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new $h(this.root,e,this.comparator,!1)}getReverseIterator(){return new $h(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new $h(this.root,e,this.comparator,!0)}}class $h{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?i(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Qt{constructor(e,t,i,a,l){this.key=e,this.value=t,this.color=i??Qt.RED,this.left=a??Qt.EMPTY,this.right=l??Qt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,l){return new Qt(e??this.key,t??this.value,i??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const l=i(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,i),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Qt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return Qt.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Qt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Qt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw me(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw me(27949);return e+(this.isRed()?0:1)}}Qt.EMPTY=null,Qt.RED=!0,Qt.BLACK=!1;Qt.EMPTY=new class{constructor(){this.size=0}get key(){throw me(57766)}get value(){throw me(16141)}get color(){throw me(16727)}get left(){throw me(29726)}get right(){throw me(36894)}copy(e,t,i,a,l){return this}insert(e,t,i){return new Qt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je{constructor(e){this.comparator=e,this.data=new at(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new h0(this.data.getIterator())}getIteratorFrom(e){return new h0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Je)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Je(this.comparator);return t.data=e,t}}class h0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ao(r){return r.hasNext()?r.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e){this.fields=e,e.sort(dt.comparator)}static empty(){return new qn([])}unionWith(e){let t=new Je(dt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new qn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return zo(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new cb("Invalid base64 string: "+l):l}})(e);return new wt(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let c=0;c<a.length;++c)l+=String.fromCharCode(a[c]);return l})(e);return new wt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wt.EMPTY_BYTE_STRING=new wt("");const BN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sr(r){if(ve(!!r,39018),typeof r=="string"){let e=0;const t=BN.exec(r);if(ve(!!t,46558,{timestamp:r}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(r);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ct(r.seconds),nanos:ct(r.nanos)}}function ct(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function ar(r){return typeof r=="string"?wt.fromBase64String(r):wt.fromUint8Array(r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb="server_timestamp",fb="__type__",db="__previous_value__",mb="__local_write_time__";function iy(r){return(r?.mapValue?.fields||{})[fb]?.stringValue===hb}function ld(r){const e=r.mapValue.fields[db];return iy(e)?ld(e):e}function nc(r){const e=sr(r.mapValue.fields[mb].timestampValue);return new $e(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e,t,i,a,l,c,d,m,p,_){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.longPollingOptions=m,this.useFetchStreams=p,this.isUsingEmulator=_}}const Of="(default)";class Ta{constructor(e,t){this.projectId=e,this.database=t||Of}static empty(){return new Ta("","")}get isDefaultDatabase(){return this.database===Of}isEqual(e){return e instanceof Ta&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry="__type__",gb="__max__",is={mapValue:{fields:{__type__:{stringValue:gb}}}},sy="__vector__",Ko="value",df={nullValue:"NULL_VALUE"};function fs(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?iy(r)?4:pb(r)?9007199254740991:ud(r)?10:11:me(28295,{value:r})}function Ii(r,e){if(r===e)return!0;const t=fs(r);if(t!==fs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return nc(r).isEqual(nc(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const c=sr(a.timestampValue),d=sr(l.timestampValue);return c.seconds===d.seconds&&c.nanos===d.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(a,l){return ar(a.bytesValue).isEqual(ar(l.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(a,l){return ct(a.geoPointValue.latitude)===ct(l.geoPointValue.latitude)&&ct(a.geoPointValue.longitude)===ct(l.geoPointValue.longitude)})(r,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return ct(a.integerValue)===ct(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const c=ct(a.doubleValue),d=ct(l.doubleValue);return c===d?Wu(c)===Wu(d):isNaN(c)&&isNaN(d)}return!1})(r,e);case 9:return zo(r.arrayValue.values||[],e.arrayValue.values||[],Ii);case 10:case 11:return(function(a,l){const c=a.mapValue.fields||{},d=l.mapValue.fields||{};if(c0(c)!==c0(d))return!1;for(const m in c)if(c.hasOwnProperty(m)&&(d[m]===void 0||!Ii(c[m],d[m])))return!1;return!0})(r,e);default:return me(52216,{left:r})}}function ic(r,e){return(r.values||[]).find((t=>Ii(t,e)))!==void 0}function ds(r,e){if(r===e)return 0;const t=fs(r),i=fs(e);if(t!==i)return Re(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Re(r.booleanValue,e.booleanValue);case 2:return(function(l,c){const d=ct(l.integerValue||l.doubleValue),m=ct(c.integerValue||c.doubleValue);return d<m?-1:d>m?1:d===m?0:isNaN(d)?isNaN(m)?0:-1:1})(r,e);case 3:return f0(r.timestampValue,e.timestampValue);case 4:return f0(nc(r),nc(e));case 5:return sp(r.stringValue,e.stringValue);case 6:return(function(l,c){const d=ar(l),m=ar(c);return d.compareTo(m)})(r.bytesValue,e.bytesValue);case 7:return(function(l,c){const d=l.split("/"),m=c.split("/");for(let p=0;p<d.length&&p<m.length;p++){const _=Re(d[p],m[p]);if(_!==0)return _}return Re(d.length,m.length)})(r.referenceValue,e.referenceValue);case 8:return(function(l,c){const d=Re(ct(l.latitude),ct(c.latitude));return d!==0?d:Re(ct(l.longitude),ct(c.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return d0(r.arrayValue,e.arrayValue);case 10:return(function(l,c){const d=l.fields||{},m=c.fields||{},p=d[Ko]?.arrayValue,_=m[Ko]?.arrayValue,T=Re(p?.values?.length||0,_?.values?.length||0);return T!==0?T:d0(p,_)})(r.mapValue,e.mapValue);case 11:return(function(l,c){if(l===is.mapValue&&c===is.mapValue)return 0;if(l===is.mapValue)return 1;if(c===is.mapValue)return-1;const d=l.fields||{},m=Object.keys(d),p=c.fields||{},_=Object.keys(p);m.sort(),_.sort();for(let T=0;T<m.length&&T<_.length;++T){const b=sp(m[T],_[T]);if(b!==0)return b;const N=ds(d[m[T]],p[_[T]]);if(N!==0)return N}return Re(m.length,_.length)})(r.mapValue,e.mapValue);default:throw me(23264,{he:t})}}function f0(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Re(r,e);const t=sr(r),i=sr(e),a=Re(t.seconds,i.seconds);return a!==0?a:Re(t.nanos,i.nanos)}function d0(r,e){const t=r.values||[],i=e.values||[];for(let a=0;a<t.length&&a<i.length;++a){const l=ds(t[a],i[a]);if(l)return l}return Re(t.length,i.length)}function Qo(r){return hp(r)}function hp(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(t){const i=sr(t);return`time(${i.seconds},${i.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(t){return ar(t).toBase64()})(r.bytesValue):"referenceValue"in r?(function(t){return ce.fromName(t).toString()})(r.referenceValue):"geoPointValue"in r?(function(t){return`geo(${t.latitude},${t.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(t){let i="[",a=!0;for(const l of t.values||[])a?a=!1:i+=",",i+=hp(l);return i+"]"})(r.arrayValue):"mapValue"in r?(function(t){const i=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const c of i)l?l=!1:a+=",",a+=`${c}:${hp(t.fields[c])}`;return a+"}"})(r.mapValue):me(61005,{value:r})}function mf(r){switch(fs(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ld(r);return e?16+mf(e):16;case 5:return 2*r.stringValue.length;case 6:return ar(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((a,l)=>a+mf(l)),0)})(r.arrayValue);case 10:case 11:return(function(i){let a=0;return Ca(i.fields,((l,c)=>{a+=l.length+mf(c)})),a})(r.mapValue);default:throw me(13486,{value:r})}}function rc(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function fp(r){return!!r&&"integerValue"in r}function sc(r){return!!r&&"arrayValue"in r}function m0(r){return!!r&&"nullValue"in r}function g0(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function gf(r){return!!r&&"mapValue"in r}function ud(r){return(r?.mapValue?.fields||{})[ry]?.stringValue===sy}function ju(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return Ca(r.mapValue.fields,((t,i)=>e.mapValue.fields[t]=ju(i))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ju(r.arrayValue.values[t]);return e}return{...r}}function pb(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===gb}const yb={mapValue:{fields:{[ry]:{stringValue:sy},[Ko]:{arrayValue:{}}}}};function jN(r){return"nullValue"in r?df:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?rc(Ta.empty(),ce.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?ud(r)?yb:{mapValue:{}}:me(35942,{value:r})}function qN(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?rc(Ta.empty(),ce.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?yb:"mapValue"in r?ud(r)?{mapValue:{}}:is:me(61959,{value:r})}function p0(r,e){const t=ds(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function y0(r,e){const t=ds(r.value,e.value);return t!==0?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.value=e}static empty(){return new dn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!gf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ju(t)}setAll(e){let t=dt.emptyPath(),i={},a=[];e.forEach(((c,d)=>{if(!t.isImmediateParentOf(d)){const m=this.getFieldsMap(t);this.applyChanges(m,i,a),i={},a=[],t=d.popLast()}c?i[d.lastSegment()]=ju(c):a.push(d.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,i,a)}delete(e){const t=this.field(e.popLast());gf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ii(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];gf(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){Ca(t,((a,l)=>e[a]=l));for(const a of i)delete e[a]}clone(){return new dn(ju(this.value))}}function _b(r){const e=[];return Ca(r.fields,((t,i)=>{const a=new dt([t]);if(gf(i)){const l=_b(i.mapValue).fields;if(l.length===0)e.push(a);else for(const c of l)e.push(a.child(c))}else e.push(a)})),new qn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,t,i,a,l,c,d){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.createTime=l,this.data=c,this.documentState=d}static newInvalidDocument(e){return new yt(e,0,Te.min(),Te.min(),Te.min(),dn.empty(),0)}static newFoundDocument(e,t,i,a){return new yt(e,1,t,Te.min(),i,a,0)}static newNoDocument(e,t){return new yt(e,2,t,Te.min(),Te.min(),dn.empty(),0)}static newUnknownDocument(e,t){return new yt(e,3,t,Te.min(),Te.min(),dn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof yt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yo{constructor(e,t){this.position=e,this.inclusive=t}}function _0(r,e,t){let i=0;for(let a=0;a<r.position.length;a++){const l=e[a],c=r.position[a];if(l.field.isKeyField()?i=ce.comparator(ce.fromName(c.referenceValue),t.key):i=ds(c,t.data.field(l.field)),l.dir==="desc"&&(i*=-1),i!==0)break}return i}function v0(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Ii(r.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e,t="asc"){this.field=e,this.dir=t}}function FN(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{}class Ue extends vb{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new HN(e,t,i):t==="array-contains"?new QN(e,i):t==="in"?new wb(e,i):t==="not-in"?new YN(e,i):t==="array-contains-any"?new $N(e,i):new Ue(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new GN(e,i):new KN(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ds(t,this.value)):t!==null&&fs(this.value)===fs(t)&&this.matchesComparison(ds(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Xe extends vb{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Xe(e,t)}matches(e){return $o(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function $o(r){return r.op==="and"}function dp(r){return r.op==="or"}function ay(r){return Eb(r)&&$o(r)}function Eb(r){for(const e of r.filters)if(e instanceof Xe)return!1;return!0}function mp(r){if(r instanceof Ue)return r.field.canonicalString()+r.op.toString()+Qo(r.value);if(ay(r))return r.filters.map((e=>mp(e))).join(",");{const e=r.filters.map((t=>mp(t))).join(",");return`${r.op}(${e})`}}function Tb(r,e){return r instanceof Ue?(function(i,a){return a instanceof Ue&&i.op===a.op&&i.field.isEqual(a.field)&&Ii(i.value,a.value)})(r,e):r instanceof Xe?(function(i,a){return a instanceof Xe&&i.op===a.op&&i.filters.length===a.filters.length?i.filters.reduce(((l,c,d)=>l&&Tb(c,a.filters[d])),!0):!1})(r,e):void me(19439)}function Sb(r,e){const t=r.filters.concat(e);return Xe.create(t,r.op)}function Ab(r){return r instanceof Ue?(function(t){return`${t.field.canonicalString()} ${t.op} ${Qo(t.value)}`})(r):r instanceof Xe?(function(t){return t.op.toString()+" {"+t.getFilters().map(Ab).join(" ,")+"}"})(r):"Filter"}class HN extends Ue{constructor(e,t,i){super(e,t,i),this.key=ce.fromName(i.referenceValue)}matches(e){const t=ce.comparator(e.key,this.key);return this.matchesComparison(t)}}class GN extends Ue{constructor(e,t){super(e,"in",t),this.keys=bb("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class KN extends Ue{constructor(e,t){super(e,"not-in",t),this.keys=bb("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function bb(r,e){return(e.arrayValue?.values||[]).map((t=>ce.fromName(t.referenceValue)))}class QN extends Ue{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return sc(t)&&ic(t.arrayValue,this.value)}}class wb extends Ue{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&ic(this.value.arrayValue,t)}}class YN extends Ue{constructor(e,t){super(e,"not-in",t)}matches(e){if(ic(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!ic(this.value.arrayValue,t)}}class $N extends Ue{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!sc(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>ic(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e,t=null,i=[],a=[],l=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=l,this.startAt=c,this.endAt=d,this.Te=null}}function gp(r,e=null,t=[],i=[],a=null,l=null,c=null){return new XN(r,e,t,i,a,l,c)}function Sa(r){const e=pe(r);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>mp(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(l){return l.field.canonicalString()+l.dir})(i))).join(","),rd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>Qo(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>Qo(i))).join(",")),e.Te=t}return e.Te}function Sc(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!FN(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Tb(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!v0(r.startAt,e.startAt)&&v0(r.endAt,e.endAt)}function Mf(r){return ce.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function Pf(r,e){return r.filters.filter((t=>t instanceof Ue&&t.field.isEqual(e)))}function E0(r,e,t){let i=df,a=!0;for(const l of Pf(r,e)){let c=df,d=!0;switch(l.op){case"<":case"<=":c=jN(l.value);break;case"==":case"in":case">=":c=l.value;break;case">":c=l.value,d=!1;break;case"!=":case"not-in":c=df}p0({value:i,inclusive:a},{value:c,inclusive:d})<0&&(i=c,a=d)}if(t!==null){for(let l=0;l<r.orderBy.length;++l)if(r.orderBy[l].field.isEqual(e)){const c=t.position[l];p0({value:i,inclusive:a},{value:c,inclusive:t.inclusive})<0&&(i=c,a=t.inclusive);break}}return{value:i,inclusive:a}}function T0(r,e,t){let i=is,a=!0;for(const l of Pf(r,e)){let c=is,d=!0;switch(l.op){case">=":case">":c=qN(l.value),d=!1;break;case"==":case"in":case"<=":c=l.value;break;case"<":c=l.value,d=!1;break;case"!=":case"not-in":c=is}y0({value:i,inclusive:a},{value:c,inclusive:d})>0&&(i=c,a=d)}if(t!==null){for(let l=0;l<r.orderBy.length;++l)if(r.orderBy[l].field.isEqual(e)){const c=t.position[l];y0({value:i,inclusive:a},{value:c,inclusive:t.inclusive})>0&&(i=c,a=t.inclusive);break}}return{value:i,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl{constructor(e,t=null,i=[],a=[],l=null,c="F",d=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=l,this.limitType=c,this.startAt=d,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Ib(r,e,t,i,a,l,c,d){return new cl(r,e,t,i,a,l,c,d)}function cd(r){return new cl(r)}function S0(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function Rb(r){return r.collectionGroup!==null}function qu(r){const e=pe(r);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let d=new Je(dt.comparator);return c.filters.forEach((m=>{m.getFlattenedFilters().forEach((p=>{p.isInequality()&&(d=d.add(p.field))}))})),d})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new ac(l,i))})),t.has(dt.keyField().canonicalString())||e.Ie.push(new ac(dt.keyField(),i))}return e.Ie}function In(r){const e=pe(r);return e.Ee||(e.Ee=JN(e,qu(r))),e.Ee}function JN(r,e){if(r.limitType==="F")return gp(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new ac(a.field,l)}));const t=r.endAt?new Yo(r.endAt.position,r.endAt.inclusive):null,i=r.startAt?new Yo(r.startAt.position,r.startAt.inclusive):null;return gp(r.path,r.collectionGroup,e,r.filters,r.limit,t,i)}}function pp(r,e){const t=r.filters.concat([e]);return new cl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function kf(r,e,t){return new cl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function hd(r,e){return Sc(In(r),In(e))&&r.limitType===e.limitType}function Cb(r){return`${Sa(In(r))}|lt:${r.limitType}`}function Do(r){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((a=>Ab(a))).join(", ")}]`),rd(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((a=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(a))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((a=>Qo(a))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((a=>Qo(a))).join(",")),`Target(${i})`})(In(r))}; limitType=${r.limitType})`}function Ac(r,e){return e.isFoundDocument()&&(function(i,a){const l=a.key.path;return i.collectionGroup!==null?a.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(l):ce.isDocumentKey(i.path)?i.path.isEqual(l):i.path.isImmediateParentOf(l)})(r,e)&&(function(i,a){for(const l of qu(i))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(r,e)&&(function(i,a){for(const l of i.filters)if(!l.matches(a))return!1;return!0})(r,e)&&(function(i,a){return!(i.startAt&&!(function(c,d,m){const p=_0(c,d,m);return c.inclusive?p<=0:p<0})(i.startAt,qu(i),a)||i.endAt&&!(function(c,d,m){const p=_0(c,d,m);return c.inclusive?p>=0:p>0})(i.endAt,qu(i),a))})(r,e)}function Db(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function xb(r){return(e,t)=>{let i=!1;for(const a of qu(r)){const l=WN(a,e,t);if(l!==0)return l;i=i||a.field.isKeyField()}return 0}}function WN(r,e,t){const i=r.field.isKeyField()?ce.comparator(e.key,t.key):(function(l,c,d){const m=c.data.field(l),p=d.data.field(l);return m!==null&&p!==null?ds(m,p):me(42886)})(r.field,e,t);switch(r.dir){case"asc":return i;case"desc":return-1*i;default:return me(19790,{direction:r.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[a,l]of i)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(a===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return i.length===1?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){Ca(this.inner,((t,i)=>{for(const[a,l]of i)e(a,l)}))}isEmpty(){return ub(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN=new at(ce.comparator);function bn(){return ZN}const Nb=new at(ce.comparator);function Nu(...r){let e=Nb;for(const t of r)e=e.insert(t.key,t);return e}function Vb(r){let e=Nb;return r.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Ei(){return Fu()}function Ob(){return Fu()}function Fu(){return new ur((r=>r.toString()),((r,e)=>r.isEqual(e)))}const eV=new at(ce.comparator),tV=new Je(ce.comparator);function Oe(...r){let e=tV;for(const t of r)e=e.add(t);return e}const nV=new Je(Re);function oy(){return nV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ly(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wu(e)?"-0":e}}function Mb(r){return{integerValue:""+r}}function iV(r,e){return WA(e)?Mb(e):ly(r,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(){this._=void 0}}function rV(r,e,t){return r instanceof Xo?(function(a,l){const c={fields:{[fb]:{stringValue:hb},[mb]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&iy(l)&&(l=ld(l)),l&&(c.fields[db]=l),{mapValue:c}})(t,e):r instanceof Jo?kb(r,e):r instanceof Wo?Lb(r,e):(function(a,l){const c=Pb(a,l),d=A0(c)+A0(a.Ae);return fp(c)&&fp(a.Ae)?Mb(d):ly(a.serializer,d)})(r,e)}function sV(r,e,t){return r instanceof Jo?kb(r,e):r instanceof Wo?Lb(r,e):t}function Pb(r,e){return r instanceof oc?(function(i){return fp(i)||(function(l){return!!l&&"doubleValue"in l})(i)})(e)?e:{integerValue:0}:null}class Xo extends fd{}class Jo extends fd{constructor(e){super(),this.elements=e}}function kb(r,e){const t=Ub(e);for(const i of r.elements)t.some((a=>Ii(a,i)))||t.push(i);return{arrayValue:{values:t}}}class Wo extends fd{constructor(e){super(),this.elements=e}}function Lb(r,e){let t=Ub(e);for(const i of r.elements)t=t.filter((a=>!Ii(a,i)));return{arrayValue:{values:t}}}class oc extends fd{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function A0(r){return ct(r.integerValue||r.doubleValue)}function Ub(r){return sc(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e,t){this.field=e,this.transform=t}}function aV(r,e){return r.field.isEqual(e.field)&&(function(i,a){return i instanceof Jo&&a instanceof Jo||i instanceof Wo&&a instanceof Wo?zo(i.elements,a.elements,Ii):i instanceof oc&&a instanceof oc?Ii(i.Ae,a.Ae):i instanceof Xo&&a instanceof Xo})(r.transform,e.transform)}class oV{constructor(e,t){this.version=e,this.transformResults=t}}class wn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new wn}static exists(e){return new wn(void 0,e)}static updateTime(e){return new wn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function pf(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class dd{}function zb(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new uy(r.key,wn.none()):new hl(r.key,r.data,wn.none());{const t=r.data,i=dn.empty();let a=new Je(dt.comparator);for(let l of e.fields)if(!a.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?i.delete(l):i.set(l,c),a=a.add(l)}return new _s(r.key,i,new qn(a.toArray()),wn.none())}}function lV(r,e,t){r instanceof hl?(function(a,l,c){const d=a.value.clone(),m=w0(a.fieldTransforms,l,c.transformResults);d.setAll(m),l.convertToFoundDocument(c.version,d).setHasCommittedMutations()})(r,e,t):r instanceof _s?(function(a,l,c){if(!pf(a.precondition,l))return void l.convertToUnknownDocument(c.version);const d=w0(a.fieldTransforms,l,c.transformResults),m=l.data;m.setAll(jb(a)),m.setAll(d),l.convertToFoundDocument(c.version,m).setHasCommittedMutations()})(r,e,t):(function(a,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function Hu(r,e,t,i){return r instanceof hl?(function(l,c,d,m){if(!pf(l.precondition,c))return d;const p=l.value.clone(),_=I0(l.fieldTransforms,m,c);return p.setAll(_),c.convertToFoundDocument(c.version,p).setHasLocalMutations(),null})(r,e,t,i):r instanceof _s?(function(l,c,d,m){if(!pf(l.precondition,c))return d;const p=I0(l.fieldTransforms,m,c),_=c.data;return _.setAll(jb(l)),_.setAll(p),c.convertToFoundDocument(c.version,_).setHasLocalMutations(),d===null?null:d.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((T=>T.field)))})(r,e,t,i):(function(l,c,d){return pf(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):d})(r,e,t)}function uV(r,e){let t=null;for(const i of r.fieldTransforms){const a=e.data.field(i.field),l=Pb(i.transform,a||null);l!=null&&(t===null&&(t=dn.empty()),t.set(i.field,l))}return t||null}function b0(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(i,a){return i===void 0&&a===void 0||!(!i||!a)&&zo(i,a,((l,c)=>aV(l,c)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class hl extends dd{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class _s extends dd{constructor(e,t,i,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function jb(r){const e=new Map;return r.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=r.data.field(t);e.set(t,i)}})),e}function w0(r,e,t){const i=new Map;ve(r.length===t.length,32656,{Re:t.length,Ve:r.length});for(let a=0;a<t.length;a++){const l=r[a],c=l.transform,d=e.data.field(l.field);i.set(l.field,sV(c,d,t[a]))}return i}function I0(r,e,t){const i=new Map;for(const a of r){const l=a.transform,c=t.data.field(a.field);i.set(a.field,rV(l,c,e))}return i}class uy extends dd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qb extends dd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&lV(l,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Hu(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Hu(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Ob();return this.mutations.forEach((a=>{const l=e.get(a.key),c=l.overlayedDocument;let d=this.applyToLocalView(c,l.mutatedFields);d=t.has(a.key)?null:d;const m=zb(c,d);m!==null&&i.set(a.key,m),c.isValidDocument()||c.convertToNoDocument(Te.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Oe())}isEqual(e){return this.batchId===e.batchId&&zo(this.mutations,e.mutations,((t,i)=>b0(t,i)))&&zo(this.baseMutations,e.baseMutations,((t,i)=>b0(t,i)))}}class hy{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){ve(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let a=(function(){return eV})();const l=e.mutations;for(let c=0;c<l.length;c++)a=a.insert(l[c].key,i[c].version);return new hy(e,t,i,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cV{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ct,ze;function hV(r){switch(r){case J.OK:return me(64938);case J.CANCELLED:case J.UNKNOWN:case J.DEADLINE_EXCEEDED:case J.RESOURCE_EXHAUSTED:case J.INTERNAL:case J.UNAVAILABLE:case J.UNAUTHENTICATED:return!1;case J.INVALID_ARGUMENT:case J.NOT_FOUND:case J.ALREADY_EXISTS:case J.PERMISSION_DENIED:case J.FAILED_PRECONDITION:case J.ABORTED:case J.OUT_OF_RANGE:case J.UNIMPLEMENTED:case J.DATA_LOSS:return!0;default:return me(15467,{code:r})}}function Fb(r){if(r===void 0)return bt("GRPC error has no .code"),J.UNKNOWN;switch(r){case Ct.OK:return J.OK;case Ct.CANCELLED:return J.CANCELLED;case Ct.UNKNOWN:return J.UNKNOWN;case Ct.DEADLINE_EXCEEDED:return J.DEADLINE_EXCEEDED;case Ct.RESOURCE_EXHAUSTED:return J.RESOURCE_EXHAUSTED;case Ct.INTERNAL:return J.INTERNAL;case Ct.UNAVAILABLE:return J.UNAVAILABLE;case Ct.UNAUTHENTICATED:return J.UNAUTHENTICATED;case Ct.INVALID_ARGUMENT:return J.INVALID_ARGUMENT;case Ct.NOT_FOUND:return J.NOT_FOUND;case Ct.ALREADY_EXISTS:return J.ALREADY_EXISTS;case Ct.PERMISSION_DENIED:return J.PERMISSION_DENIED;case Ct.FAILED_PRECONDITION:return J.FAILED_PRECONDITION;case Ct.ABORTED:return J.ABORTED;case Ct.OUT_OF_RANGE:return J.OUT_OF_RANGE;case Ct.UNIMPLEMENTED:return J.UNIMPLEMENTED;case Ct.DATA_LOSS:return J.DATA_LOSS;default:return me(39323,{code:r})}}(ze=Ct||(Ct={}))[ze.OK=0]="OK",ze[ze.CANCELLED=1]="CANCELLED",ze[ze.UNKNOWN=2]="UNKNOWN",ze[ze.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ze[ze.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ze[ze.NOT_FOUND=5]="NOT_FOUND",ze[ze.ALREADY_EXISTS=6]="ALREADY_EXISTS",ze[ze.PERMISSION_DENIED=7]="PERMISSION_DENIED",ze[ze.UNAUTHENTICATED=16]="UNAUTHENTICATED",ze[ze.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ze[ze.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ze[ze.ABORTED=10]="ABORTED",ze[ze.OUT_OF_RANGE=11]="OUT_OF_RANGE",ze[ze.UNIMPLEMENTED=12]="UNIMPLEMENTED",ze[ze.INTERNAL=13]="INTERNAL",ze[ze.UNAVAILABLE=14]="UNAVAILABLE",ze[ze.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fV(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dV=new ls([4294967295,4294967295],0);function R0(r){const e=fV().encode(r),t=new LA;return t.update(e),new Uint8Array(t.digest())}function C0(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new ls([t,i],0),new ls([a,l],0)]}class dy{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Vu(`Invalid padding: ${t}`);if(i<0)throw new Vu(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Vu(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Vu(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=ls.fromNumber(this.ge)}ye(e,t,i){let a=e.add(t.multiply(ls.fromNumber(i)));return a.compare(dV)===1&&(a=new ls([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=R0(e),[i,a]=C0(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,a,l);if(!this.we(c))return!1}return!0}static create(e,t,i){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new dy(l,a,t);return i.forEach((d=>c.insert(d))),c}insert(e){if(this.ge===0)return;const t=R0(e),[i,a]=C0(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(i,a,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Vu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e,t,i,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,wc.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new bc(Te.min(),a,new at(Re),bn(),Oe())}}class wc{constructor(e,t,i,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new wc(i,t,Oe(),Oe(),Oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e,t,i,a){this.be=e,this.removedTargetIds=t,this.key=i,this.De=a}}class Hb{constructor(e,t){this.targetId=e,this.Ce=t}}class Gb{constructor(e,t,i=wt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class D0{constructor(){this.ve=0,this.Fe=x0(),this.Me=wt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Oe(),t=Oe(),i=Oe();return this.Fe.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:me(38017,{changeType:l})}})),new wc(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=x0()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ve(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class mV{constructor(e){this.Ge=e,this.ze=new Map,this.je=bn(),this.Je=Xh(),this.He=Xh(),this.Ye=new at(Re)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:me(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,a)=>{this.rt(a)&&t(a)}))}st(e){const t=e.targetId,i=e.Ce.count,a=this.ot(t);if(a){const l=a.target;if(Mf(l))if(i===0){const c=new ce(l.path);this.et(t,c,yt.newNoDocument(c,Te.min()))}else ve(i===1,20013,{expectedCount:i});else{const c=this._t(t);if(c!==i){const d=this.ut(e),m=d?this.ct(d,e,c):1;if(m!==0){this.it(t);const p=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,p)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:a=0},hashCount:l=0}=t;let c,d;try{c=ar(i).toUint8Array()}catch(m){if(m instanceof cb)return Xu("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{d=new dy(c,a,l)}catch(m){return Xu(m instanceof Vu?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return d.ge===0?null:d}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let a=0;return i.forEach((l=>{const c=this.Ge.ht(),d=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(d)||(this.et(t,l,null),a++)})),a}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const d=this.ot(c);if(d){if(l.current&&Mf(d.target)){const m=new ce(d.target.path);this.It(m).has(c)||this.Et(c,m)||this.et(c,m,yt.newNoDocument(m,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let i=Oe();this.He.forEach(((l,c)=>{let d=!0;c.forEachWhile((m=>{const p=this.ot(m);return!p||p.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const a=new bc(e,t,this.Ye,this.je,i);return this.je=bn(),this.Je=Xh(),this.He=Xh(),this.Ye=new at(Re),a}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,t)?a.Qe(t,1):a.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new D0,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Je(Re),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Je(Re),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||re("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new D0),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Xh(){return new at(ce.comparator)}function x0(){return new at(ce.comparator)}const gV={asc:"ASCENDING",desc:"DESCENDING"},pV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},yV={and:"AND",or:"OR"};class _V{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function yp(r,e){return r.useProto3Json||rd(e)?e:{value:e}}function Zo(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Kb(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function vV(r,e){return Zo(r,e.toTimestamp())}function ln(r){return ve(!!r,49232),Te.fromTimestamp((function(t){const i=sr(t);return new $e(i.seconds,i.nanos)})(r))}function my(r,e){return _p(r,e).canonicalString()}function _p(r,e){const t=(function(a){return new Ge(["projects",a.projectId,"databases",a.database])})(r).child("documents");return e===void 0?t:t.child(e)}function Qb(r){const e=Ge.fromString(r);return ve(nw(e),10190,{key:e.toString()}),e}function Lf(r,e){return my(r.databaseId,e.path)}function ma(r,e){const t=Qb(e);if(t.get(1)!==r.databaseId.projectId)throw new ae(J.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new ae(J.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new ce(Xb(t))}function Yb(r,e){return my(r.databaseId,e)}function $b(r){const e=Qb(r);return e.length===4?Ge.emptyPath():Xb(e)}function vp(r){return new Ge(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Xb(r){return ve(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function N0(r,e,t){return{name:Lf(r,e),fields:t.value.mapValue.fields}}function EV(r,e,t){const i=ma(r,e.name),a=ln(e.updateTime),l=e.createTime?ln(e.createTime):Te.min(),c=new dn({mapValue:{fields:e.fields}}),d=yt.newFoundDocument(i,a,l,c);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function TV(r,e){let t;if("targetChange"in e){e.targetChange;const i=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:me(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(p,_){return p.useProto3Json?(ve(_===void 0||typeof _=="string",58123),wt.fromBase64String(_||"")):(ve(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),wt.fromUint8Array(_||new Uint8Array))})(r,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&(function(p){const _=p.code===void 0?J.UNKNOWN:Fb(p.code);return new ae(_,p.message||"")})(c);t=new Gb(i,a,l,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const a=ma(r,i.document.name),l=ln(i.document.updateTime),c=i.document.createTime?ln(i.document.createTime):Te.min(),d=new dn({mapValue:{fields:i.document.fields}}),m=yt.newFoundDocument(a,l,c,d),p=i.targetIds||[],_=i.removedTargetIds||[];t=new yf(p,_,m.key,m)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const a=ma(r,i.document),l=i.readTime?ln(i.readTime):Te.min(),c=yt.newNoDocument(a,l),d=i.removedTargetIds||[];t=new yf([],d,c.key,c)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const a=ma(r,i.document),l=i.removedTargetIds||[];t=new yf([],l,a,null)}else{if(!("filter"in e))return me(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:a=0,unchangedNames:l}=i,c=new cV(a,l),d=i.targetId;t=new Hb(d,c)}}return t}function Uf(r,e){let t;if(e instanceof hl)t={update:N0(r,e.key,e.value)};else if(e instanceof uy)t={delete:Lf(r,e.key)};else if(e instanceof _s)t={update:N0(r,e.key,e.data),updateMask:RV(e.fieldMask)};else{if(!(e instanceof qb))return me(16599,{Vt:e.type});t={verify:Lf(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(l,c){const d=c.transform;if(d instanceof Xo)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Jo)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Wo)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof oc)return{fieldPath:c.field.canonicalString(),increment:d.Ae};throw me(20930,{transform:c.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:vV(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:me(27497)})(r,e.precondition)),t}function Ep(r,e){const t=e.currentDocument?(function(l){return l.updateTime!==void 0?wn.updateTime(ln(l.updateTime)):l.exists!==void 0?wn.exists(l.exists):wn.none()})(e.currentDocument):wn.none(),i=e.updateTransforms?e.updateTransforms.map((a=>(function(c,d){let m=null;if("setToServerValue"in d)ve(d.setToServerValue==="REQUEST_TIME",16630,{proto:d}),m=new Xo;else if("appendMissingElements"in d){const _=d.appendMissingElements.values||[];m=new Jo(_)}else if("removeAllFromArray"in d){const _=d.removeAllFromArray.values||[];m=new Wo(_)}else"increment"in d?m=new oc(c,d.increment):me(16584,{proto:d});const p=dt.fromServerFormat(d.fieldPath);return new Bb(p,m)})(r,a))):[];if(e.update){e.update.name;const a=ma(r,e.update.name),l=new dn({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=(function(m){const p=m.fieldPaths||[];return new qn(p.map((_=>dt.fromServerFormat(_))))})(e.updateMask);return new _s(a,l,c,t,i)}return new hl(a,l,t,i)}if(e.delete){const a=ma(r,e.delete);return new uy(a,t)}if(e.verify){const a=ma(r,e.verify);return new qb(a,t)}return me(1463,{proto:e})}function SV(r,e){return r&&r.length>0?(ve(e!==void 0,14353),r.map((t=>(function(a,l){let c=a.updateTime?ln(a.updateTime):ln(l);return c.isEqual(Te.min())&&(c=ln(l)),new oV(c,a.transformResults||[])})(t,e)))):[]}function Jb(r,e){return{documents:[Yb(r,e.path)]}}function Wb(r,e){const t={structuredQuery:{}},i=e.path;let a;e.collectionGroup!==null?(a=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=Yb(r,a);const l=(function(p){if(p.length!==0)return tw(Xe.create(p,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(p){if(p.length!==0)return p.map((_=>(function(b){return{field:xo(b.field),direction:bV(b.dir)}})(_)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const d=yp(r,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{ft:t,parent:a}}function Zb(r){let e=$b(r.parent);const t=r.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){ve(i===1,65062);const _=t.from[0];_.allDescendants?a=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=(function(T){const b=ew(T);return b instanceof Xe&&ay(b)?b.getFilters():[b]})(t.where));let c=[];t.orderBy&&(c=(function(T){return T.map((b=>(function(q){return new ac(No(q.field),(function(F){switch(F){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(q.direction))})(b)))})(t.orderBy));let d=null;t.limit&&(d=(function(T){let b;return b=typeof T=="object"?T.value:T,rd(b)?null:b})(t.limit));let m=null;t.startAt&&(m=(function(T){const b=!!T.before,N=T.values||[];return new Yo(N,b)})(t.startAt));let p=null;return t.endAt&&(p=(function(T){const b=!T.before,N=T.values||[];return new Yo(N,b)})(t.endAt)),Ib(e,a,c,l,d,"F",m,p)}function AV(r,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return me(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function ew(r){return r.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=No(t.unaryFilter.field);return Ue.create(i,"==",{doubleValue:NaN});case"IS_NULL":const a=No(t.unaryFilter.field);return Ue.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=No(t.unaryFilter.field);return Ue.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=No(t.unaryFilter.field);return Ue.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return me(61313);default:return me(60726)}})(r):r.fieldFilter!==void 0?(function(t){return Ue.create(No(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return me(58110);default:return me(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(t){return Xe.create(t.compositeFilter.filters.map((i=>ew(i))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return me(1026)}})(t.compositeFilter.op))})(r):me(30097,{filter:r})}function bV(r){return gV[r]}function wV(r){return pV[r]}function IV(r){return yV[r]}function xo(r){return{fieldPath:r.canonicalString()}}function No(r){return dt.fromServerFormat(r.fieldPath)}function tw(r){return r instanceof Ue?(function(t){if(t.op==="=="){if(g0(t.value))return{unaryFilter:{field:xo(t.field),op:"IS_NAN"}};if(m0(t.value))return{unaryFilter:{field:xo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(g0(t.value))return{unaryFilter:{field:xo(t.field),op:"IS_NOT_NAN"}};if(m0(t.value))return{unaryFilter:{field:xo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xo(t.field),op:wV(t.op),value:t.value}}})(r):r instanceof Xe?(function(t){const i=t.getFilters().map((a=>tw(a)));return i.length===1?i[0]:{compositeFilter:{op:IV(t.op),filters:i}}})(r):me(54877,{filter:r})}function RV(r){const e=[];return r.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function nw(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e,t,i,a,l=Te.min(),c=Te.min(),d=wt.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d,this.expectedCount=m}withSequenceNumber(e){return new Wi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Wi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Wi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Wi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(e){this.yt=e}}function CV(r,e){let t;if(e.document)t=EV(r.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=ce.fromSegments(e.noDocument.path),a=ba(e.noDocument.readTime);t=yt.newNoDocument(i,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return me(56709);{const i=ce.fromSegments(e.unknownDocument.path),a=ba(e.unknownDocument.version);t=yt.newUnknownDocument(i,a)}}return e.readTime&&t.setReadTime((function(a){const l=new $e(a[0],a[1]);return Te.fromTimestamp(l)})(e.readTime)),t}function V0(r,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Bf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=(function(l,c){return{name:Lf(l,c.key),fields:c.data.value.mapValue.fields,updateTime:Zo(l,c.version.toTimestamp()),createTime:Zo(l,c.createTime.toTimestamp())}})(r.yt,e);else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:Aa(e.version)};else{if(!e.isUnknownDocument())return me(57904,{document:e});i.unknownDocument={path:t.path.toArray(),version:Aa(e.version)}}return i}function Bf(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function Aa(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ba(r){const e=new $e(r.seconds,r.nanoseconds);return Te.fromTimestamp(e)}function la(r,e){const t=(e.baseMutations||[]).map((l=>Ep(r.yt,l)));for(let l=0;l<e.mutations.length-1;++l){const c=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const d=e.mutations[l+1];c.updateTransforms=d.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const i=e.mutations.map((l=>Ep(r.yt,l))),a=$e.fromMillis(e.localWriteTimeMs);return new cy(e.batchId,a,t,i)}function Ou(r){const e=ba(r.readTime),t=r.lastLimboFreeSnapshotVersion!==void 0?ba(r.lastLimboFreeSnapshotVersion):Te.min();let i;return i=(function(l){return l.documents!==void 0})(r.query)?(function(l){const c=l.documents.length;return ve(c===1,1966,{count:c}),In(cd($b(l.documents[0])))})(r.query):(function(l){return In(Zb(l))})(r.query),new Wi(i,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,wt.fromBase64String(r.resumeToken))}function rw(r,e){const t=Aa(e.snapshotVersion),i=Aa(e.lastLimboFreeSnapshotVersion);let a;a=Mf(e.target)?Jb(r.yt,e.target):Wb(r.yt,e.target).ft;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Sa(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:a}}function sw(r){const e=Zb({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?kf(e,e.limit,"L"):e}function kg(r,e){return new fy(e.largestBatchId,Ep(r.yt,e.overlayMutation))}function O0(r,e){const t=e.path.lastSegment();return[r,tn(e.path.popLast()),t]}function M0(r,e,t,i){return{indexId:r,uid:e,sequenceNumber:t,readTime:Aa(i.readTime),documentKey:tn(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DV{getBundleMetadata(e,t){return P0(e).get(t).next((i=>{if(i)return(function(l){return{id:l.bundleId,createTime:ba(l.createTime),version:l.version}})(i)}))}saveBundleMetadata(e,t){return P0(e).put((function(a){return{bundleId:a.id,createTime:Aa(ln(a.createTime)),version:a.version}})(t))}getNamedQuery(e,t){return k0(e).get(t).next((i=>{if(i)return(function(l){return{name:l.name,query:sw(l.bundledQuery),readTime:ba(l.readTime)}})(i)}))}saveNamedQuery(e,t){return k0(e).put((function(a){return{name:a.name,readTime:Aa(ln(a.readTime)),bundledQuery:a.bundledQuery}})(t))}}function P0(r){return kt(r,sd)}function k0(r){return kt(r,ad)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const i=t.uid||"";return new md(e,i)}getOverlay(e,t){return bu(e).get(O0(this.userId,t)).next((i=>i?kg(this.serializer,i):null))}getOverlays(e,t){const i=Ei();return L.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(e,t,i){const a=[];return i.forEach(((l,c)=>{const d=new fy(t,c);a.push(this.St(e,d))})),L.waitFor(a)}removeOverlaysForBatchId(e,t,i){const a=new Set;t.forEach((c=>a.add(tn(c.getCollectionPath()))));const l=[];return a.forEach((c=>{const d=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,i+1],!1,!0);l.push(bu(e).Z(up,d))})),L.waitFor(l)}getOverlaysForCollection(e,t,i){const a=Ei(),l=tn(t),c=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,Number.POSITIVE_INFINITY],!0);return bu(e).J(up,c).next((d=>{for(const m of d){const p=kg(this.serializer,m);a.set(p.getKey(),p)}return a}))}getOverlaysForCollectionGroup(e,t,i,a){const l=Ei();let c;const d=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return bu(e).ee({index:rb,range:d},((m,p,_)=>{const T=kg(this.serializer,p);l.size()<a||T.largestBatchId===c?(l.set(T.getKey(),T),c=T.largestBatchId):_.done()})).next((()=>l))}St(e,t){return bu(e).put((function(a,l,c){const[d,m,p]=O0(l,c.mutation.key);return{userId:l,collectionPath:m,documentId:p,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:Uf(a.yt,c.mutation)}})(this.serializer,this.userId,t))}}function bu(r){return kt(r,od)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xV{bt(e){return kt(e,ty)}getSessionToken(e){return this.bt(e).get("sessionToken").next((t=>{const i=t?.value;return i?wt.fromUint8Array(i):wt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(ct(e.integerValue));else if("doubleValue"in e){const i=ct(e.doubleValue);isNaN(i)?this.Ft(t,13):(this.Ft(t,15),Wu(i)?t.Mt(0):t.Mt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ft(t,20),typeof i=="string"&&(i=sr(i)),t.xt(`${i.seconds||""}`),t.Mt(i.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(ar(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.Ft(t,45),t.Mt(i.latitude||0),t.Mt(i.longitude||0)}else"mapValue"in e?pb(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):ud(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):me(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const i=e.fields||{};this.Ft(t,55);for(const a of Object.keys(i))this.Ot(a,t),this.Ct(i[a],t)}kt(e,t){const i=e.fields||{};this.Ft(t,53);const a=Ko,l=i[a].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(ct(l)),this.Ot(a,t),this.Ct(i[a],t)}Qt(e,t){const i=e.values||[];this.Ft(t,50);for(const a of i)this.Ct(a,t)}Lt(e,t){this.Ft(t,37),ce.fromName(e).path.forEach((i=>{this.Ft(t,60),this.Ut(i,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}ua.Kt=new ua;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo=255;function NV(r){if(r===0)return 8;let e=0;return r>>4||(e+=4,r<<=4),r>>6||(e+=2,r<<=2),r>>7||(e+=1),e}function L0(r){const e=64-(function(i){let a=0;for(let l=0;l<8;++l){const c=NV(255&i[l]);if(a+=c,c!==8)break}return a})(r);return Math.ceil(e/8)}class VV{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Gt(i.value),i=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Jt(i.value),i=t.next();this.Ht()}Yt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Gt(i);else if(i<2048)this.Gt(960|i>>>6),this.Gt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i);else{const a=t.codePointAt(0);this.Gt(240|a>>>18),this.Gt(128|63&a>>>12),this.Gt(128|63&a>>>6),this.Gt(128|63&a)}}this.zt()}Zt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Jt(i);else if(i<2048)this.Jt(960|i>>>6),this.Jt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Jt(480|i>>>12),this.Jt(128|63&i>>>6),this.Jt(128|63&i);else{const a=t.codePointAt(0);this.Jt(240|a>>>18),this.Jt(128|63&a>>>12),this.Jt(128|63&a>>>6),this.Jt(128|63&a)}}this.Ht()}Xt(e){const t=this.en(e),i=L0(t);this.tn(1+i),this.buffer[this.position++]=255&i;for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=255&t[a]}nn(e){const t=this.en(e),i=L0(t);this.tn(1+i),this.buffer[this.position++]=~(255&i);for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}rn(){this.sn(bo),this.sn(255)}_n(){this.an(bo),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(l){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,l,!1),new Uint8Array(c.buffer)})(e),i=!!(128&t[0]);t[0]^=i?255:128;for(let a=1;a<t.length;++a)t[a]^=i?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===bo?(this.sn(bo),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===bo?(this.an(bo),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const a=new Uint8Array(i);a.set(this.buffer),this.buffer=a}}class OV{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class MV{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class wu{constructor(){this.cn=new VV,this.ln=new OV(this.cn),this.hn=new MV(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return e===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e,t,i,a){this.Tn=e,this.In=t,this.En=i,this.dn=a}An(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,i=new Uint8Array(t);return i.set(this.dn,0),t!==e?i.set([0],this.dn.length):++i[i.length-1],new ca(this.Tn,this.In,this.En,i)}Rn(e,t,i){return{indexId:this.Tn,uid:e,arrayValue:_f(this.En),directionalValue:_f(this.dn),orderedDocumentKey:_f(t),documentKey:i.path.toArray()}}Vn(e,t,i){const a=this.Rn(e,t,i);return[a.indexId,a.uid,a.arrayValue,a.directionalValue,a.orderedDocumentKey,a.documentKey]}}function $r(r,e){let t=r.Tn-e.Tn;return t!==0?t:(t=U0(r.En,e.En),t!==0?t:(t=U0(r.dn,e.dn),t!==0?t:ce.comparator(r.In,e.In)))}function U0(r,e){for(let t=0;t<r.length&&t<e.length;++t){const i=r[t]-e[t];if(i!==0)return i}return r.length-e.length}function _f(r){return WS()?(function(t){let i="";for(let a=0;a<t.length;a++)i+=String.fromCharCode(t[a]);return i})(r):r}function B0(r){return typeof r!="string"?r:(function(t){const i=new Uint8Array(t.length);for(let a=0;a<t.length;a++)i[a]=t.charCodeAt(a);return i})(r)}class z0{constructor(e){this.mn=new Je(((t,i)=>dt.comparator(t.field,i.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const i=t;i.isInequality()?this.mn=this.mn.add(i):this.gn.push(i)}}get pn(){return this.mn.size>1}yn(e){if(ve(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=ap(e);if(t!==void 0&&!this.wn(t))return!1;const i=sa(e);let a=new Set,l=0,c=0;for(;l<i.length&&this.wn(i[l]);++l)a=a.add(i[l].fieldPath.canonicalString());if(l===i.length)return!0;if(this.mn.size>0){const d=this.mn.getIterator().getNext();if(!a.has(d.field.canonicalString())){const m=i[l];if(!this.Sn(d,m)||!this.bn(this.fn[c++],m))return!1}++l}for(;l<i.length;++l){const d=i[l];if(c>=this.fn.length||!this.bn(this.fn[c++],d))return!1}return!0}Dn(){if(this.pn)return null;let e=new Je(dt.comparator);const t=[];for(const i of this.gn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")t.push(new cf(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new cf(i.field,0))}for(const i of this.fn)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new cf(i.field,i.dir==="asc"?0:1)));return new Df(Df.UNKNOWN_ID,this.collectionId,t,Ju.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===i}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aw(r){if(ve(r instanceof Ue||r instanceof Xe,20012),r instanceof Ue){if(r instanceof wb){const t=r.value.arrayValue?.values?.map((i=>Ue.create(r.field,"==",i)))||[];return Xe.create(t,"or")}return r}const e=r.filters.map((t=>aw(t)));return Xe.create(e,r.op)}function PV(r){if(r.getFilters().length===0)return[];const e=Ap(aw(r));return ve(ow(e),7391),Tp(e)||Sp(e)?[e]:e.getFilters()}function Tp(r){return r instanceof Ue}function Sp(r){return r instanceof Xe&&ay(r)}function ow(r){return Tp(r)||Sp(r)||(function(t){if(t instanceof Xe&&dp(t)){for(const i of t.getFilters())if(!Tp(i)&&!Sp(i))return!1;return!0}return!1})(r)}function Ap(r){if(ve(r instanceof Ue||r instanceof Xe,34018),r instanceof Ue)return r;if(r.filters.length===1)return Ap(r.filters[0]);const e=r.filters.map((i=>Ap(i)));let t=Xe.create(e,r.op);return t=zf(t),ow(t)?t:(ve(t instanceof Xe,64498),ve($o(t),40251),ve(t.filters.length>1,57927),t.filters.reduce(((i,a)=>gy(i,a))))}function gy(r,e){let t;return ve(r instanceof Ue||r instanceof Xe,38388),ve(e instanceof Ue||e instanceof Xe,25473),t=r instanceof Ue?e instanceof Ue?(function(a,l){return Xe.create([a,l],"and")})(r,e):j0(r,e):e instanceof Ue?j0(e,r):(function(a,l){if(ve(a.filters.length>0&&l.filters.length>0,48005),$o(a)&&$o(l))return Sb(a,l.getFilters());const c=dp(a)?a:l,d=dp(a)?l:a,m=c.filters.map((p=>gy(p,d)));return Xe.create(m,"or")})(r,e),zf(t)}function j0(r,e){if($o(e))return Sb(e,r.getFilters());{const t=e.filters.map((i=>gy(r,i)));return Xe.create(t,"or")}}function zf(r){if(ve(r instanceof Ue||r instanceof Xe,11850),r instanceof Ue)return r;const e=r.getFilters();if(e.length===1)return zf(e[0]);if(Eb(r))return r;const t=e.map((a=>zf(a))),i=[];return t.forEach((a=>{a instanceof Ue?i.push(a):a instanceof Xe&&(a.op===r.op?i.push(...a.filters):i.push(a))})),i.length===1?i[0]:Xe.create(i,r.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(){this.Cn=new py}addToCollectionParentIndex(e,t){return this.Cn.add(t),L.resolve()}getCollectionParents(e,t){return L.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return L.resolve()}deleteFieldIndex(e,t){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,t){return L.resolve()}getDocumentsMatchingTarget(e,t){return L.resolve(null)}getIndexType(e,t){return L.resolve(0)}getFieldIndexes(e,t){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,t){return L.resolve(Cn.min())}getMinOffsetFromCollectionGroup(e,t){return L.resolve(Cn.min())}updateCollectionGroup(e,t,i){return L.resolve()}updateIndexEntries(e,t){return L.resolve()}}class py{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new Je(Ge.comparator),l=!a.has(i);return this.index[t]=a.add(i),l}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new Je(Ge.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q0="IndexedDbIndexManager",Jh=new Uint8Array(0);class LV{constructor(e,t){this.databaseId=t,this.vn=new py,this.Fn=new ur((i=>Sa(i)),((i,a)=>Sc(i,a))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const i=t.lastSegment(),a=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const l={collectionId:i,parent:tn(a)};return F0(e).put(l)}return L.resolve()}getCollectionParents(e,t){const i=[],a=IDBKeyRange.bound([t,""],[HA(t),""],!1,!0);return F0(e).J(a).next((l=>{for(const c of l){if(c.collectionId!==t)break;i.push(vi(c.parent))}return i}))}addFieldIndex(e,t){const i=Iu(e),a=(function(d){return{indexId:d.indexId,collectionGroup:d.collectionGroup,fields:d.fields.map((m=>[m.fieldPath.canonicalString(),m.kind]))}})(t);delete a.indexId;const l=i.add(a);if(t.indexState){const c=Io(e);return l.next((d=>{c.put(M0(d,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return l.next()}deleteFieldIndex(e,t){const i=Iu(e),a=Io(e),l=wo(e);return i.delete(t.indexId).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Iu(e),i=wo(e),a=Io(e);return t.Z().next((()=>i.Z())).next((()=>a.Z()))}createTargetIndexes(e,t){return L.forEach(this.Mn(t),(i=>this.getIndexType(e,i).next((a=>{if(a===0||a===1){const l=new z0(i).Dn();if(l!=null)return this.addFieldIndex(e,l)}}))))}getDocumentsMatchingTarget(e,t){const i=wo(e);let a=!0;const l=new Map;return L.forEach(this.Mn(t),(c=>this.xn(e,c).next((d=>{a&&(a=!!d),l.set(c,d)})))).next((()=>{if(a){let c=Oe();const d=[];return L.forEach(l,((m,p)=>{re(q0,`Using index ${(function($){return`id=${$.indexId}|cg=${$.collectionGroup}|f=${$.fields.map((fe=>`${fe.fieldPath}:${fe.kind}`)).join(",")}`})(m)} to execute ${Sa(t)}`);const _=(function($,fe){const se=ap(fe);if(se===void 0)return null;for(const de of Pf($,se.fieldPath))switch(de.op){case"array-contains-any":return de.value.arrayValue.values||[];case"array-contains":return[de.value]}return null})(p,m),T=(function($,fe){const se=new Map;for(const de of sa(fe))for(const D of Pf($,de.fieldPath))switch(D.op){case"==":case"in":se.set(de.fieldPath.canonicalString(),D.value);break;case"not-in":case"!=":return se.set(de.fieldPath.canonicalString(),D.value),Array.from(se.values())}return null})(p,m),b=(function($,fe){const se=[];let de=!0;for(const D of sa(fe)){const w=D.kind===0?E0($,D.fieldPath,$.startAt):T0($,D.fieldPath,$.startAt);se.push(w.value),de&&(de=w.inclusive)}return new Yo(se,de)})(p,m),N=(function($,fe){const se=[];let de=!0;for(const D of sa(fe)){const w=D.kind===0?T0($,D.fieldPath,$.endAt):E0($,D.fieldPath,$.endAt);se.push(w.value),de&&(de=w.inclusive)}return new Yo(se,de)})(p,m),q=this.On(m,p,b),G=this.On(m,p,N),F=this.Nn(m,p,T),ie=this.Bn(m.indexId,_,q,b.inclusive,G,N.inclusive,F);return L.forEach(ie,(Z=>i.Y(Z,t.limit).next(($=>{$.forEach((fe=>{const se=ce.fromSegments(fe.documentKey);c.has(se)||(c=c.add(se),d.push(se))}))}))))})).next((()=>d))}return L.resolve(null)}))}Mn(e){let t=this.Fn.get(e);return t||(e.filters.length===0?t=[e]:t=PV(Xe.create(e.filters,"and")).map((i=>gp(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt))),this.Fn.set(e,t),t)}Bn(e,t,i,a,l,c,d){const m=(t!=null?t.length:1)*Math.max(i.length,l.length),p=m/(t!=null?t.length:1),_=[];for(let T=0;T<m;++T){const b=t?this.Ln(t[T/p]):Jh,N=this.kn(e,b,i[T%p],a),q=this.qn(e,b,l[T%p],c),G=d.map((F=>this.kn(e,b,F,!0)));_.push(...this.createRange(N,q,G))}return _}kn(e,t,i,a){const l=new ca(e,ce.empty(),t,i);return a?l:l.An()}qn(e,t,i,a){const l=new ca(e,ce.empty(),t,i);return a?l.An():l}xn(e,t){const i=new z0(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next((l=>{let c=null;for(const d of l)i.yn(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c}))}getIndexType(e,t){let i=2;const a=this.Mn(t);return L.forEach(a,(l=>this.xn(e,l).next((c=>{c?i!==0&&c.fields.length<(function(m){let p=new Je(dt.comparator),_=!1;for(const T of m.filters)for(const b of T.getFlattenedFilters())b.field.isKeyField()||(b.op==="array-contains"||b.op==="array-contains-any"?_=!0:p=p.add(b.field));for(const T of m.orderBy)T.field.isKeyField()||(p=p.add(T.field));return p.size+(_?1:0)})(l)&&(i=1):i=0})))).next((()=>(function(c){return c.limit!==null})(t)&&a.length>1&&i===2?1:i))}Qn(e,t){const i=new wu;for(const a of sa(e)){const l=t.data.field(a.fieldPath);if(l==null)return null;const c=i.Pn(a.kind);ua.Kt.Dt(l,c)}return i.un()}Ln(e){const t=new wu;return ua.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const i=new wu;return ua.Kt.Dt(rc(this.databaseId,t),i.Pn((function(l){const c=sa(l);return c.length===0?0:c[c.length-1].kind})(e))),i.un()}Nn(e,t,i){if(i===null)return[];let a=[];a.push(new wu);let l=0;for(const c of sa(e)){const d=i[l++];for(const m of a)if(this.Un(t,c.fieldPath)&&sc(d))a=this.Kn(a,c,d);else{const p=m.Pn(c.kind);ua.Kt.Dt(d,p)}}return this.Wn(a)}On(e,t,i){return this.Nn(e,t,i.position)}Wn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].un();return t}Kn(e,t,i){const a=[...e],l=[];for(const c of i.arrayValue.values||[])for(const d of a){const m=new wu;m.seed(d.un()),ua.Kt.Dt(c,m.Pn(t.kind)),l.push(m)}return l}Un(e,t){return!!e.filters.find((i=>i instanceof Ue&&i.field.isEqual(t)&&(i.op==="in"||i.op==="not-in")))}getFieldIndexes(e,t){const i=Iu(e),a=Io(e);return(t?i.J(lp,IDBKeyRange.bound(t,t)):i.J()).next((l=>{const c=[];return L.forEach(l,(d=>a.get([d.indexId,this.uid]).next((m=>{c.push((function(_,T){const b=T?new Ju(T.sequenceNumber,new Cn(ba(T.readTime),new ce(vi(T.documentKey)),T.largestBatchId)):Ju.empty(),N=_.fields.map((([q,G])=>new cf(dt.fromServerFormat(q),G)));return new Df(_.indexId,_.collectionGroup,N,b)})(d,m))})))).next((()=>c))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((i,a)=>{const l=i.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:Re(i.collectionGroup,a.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,i){const a=Iu(e),l=Io(e);return this.Gn(e).next((c=>a.J(lp,IDBKeyRange.bound(t,t)).next((d=>L.forEach(d,(m=>l.put(M0(m.indexId,this.uid,c,i))))))))}updateIndexEntries(e,t){const i=new Map;return L.forEach(t,((a,l)=>{const c=i.get(a.collectionGroup);return(c?L.resolve(c):this.getFieldIndexes(e,a.collectionGroup)).next((d=>(i.set(a.collectionGroup,d),L.forEach(d,(m=>this.zn(e,a,m).next((p=>{const _=this.jn(l,m);return p.isEqual(_)?L.resolve():this.Jn(e,l,m,p,_)})))))))}))}Hn(e,t,i,a){return wo(e).put(a.Rn(this.uid,this.$n(i,t.key),t.key))}Yn(e,t,i,a){return wo(e).delete(a.Vn(this.uid,this.$n(i,t.key),t.key))}zn(e,t,i){const a=wo(e);let l=new Je($r);return a.ee({index:ib,range:IDBKeyRange.only([i.indexId,this.uid,_f(this.$n(i,t))])},((c,d)=>{l=l.add(new ca(i.indexId,t,B0(d.arrayValue),B0(d.directionalValue)))})).next((()=>l))}jn(e,t){let i=new Je($r);const a=this.Qn(t,e);if(a==null)return i;const l=ap(t);if(l!=null){const c=e.data.field(l.fieldPath);if(sc(c))for(const d of c.arrayValue.values||[])i=i.add(new ca(t.indexId,e.key,this.Ln(d),a))}else i=i.add(new ca(t.indexId,e.key,Jh,a));return i}Jn(e,t,i,a,l){re(q0,"Updating index entries for document '%s'",t.key);const c=[];return(function(m,p,_,T,b){const N=m.getIterator(),q=p.getIterator();let G=Ao(N),F=Ao(q);for(;G||F;){let ie=!1,Z=!1;if(G&&F){const $=_(G,F);$<0?Z=!0:$>0&&(ie=!0)}else G!=null?Z=!0:ie=!0;ie?(T(F),F=Ao(q)):Z?(b(G),G=Ao(N)):(G=Ao(N),F=Ao(q))}})(a,l,$r,(d=>{c.push(this.Hn(e,t,i,d))}),(d=>{c.push(this.Yn(e,t,i,d))})),L.waitFor(c)}Gn(e){let t=1;return Io(e).ee({index:nb,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((i,a,l)=>{l.done(),t=a.sequenceNumber+1})).next((()=>t))}createRange(e,t,i){i=i.sort(((c,d)=>$r(c,d))).filter(((c,d,m)=>!d||$r(c,m[d-1])!==0));const a=[];a.push(e);for(const c of i){const d=$r(c,e),m=$r(c,t);if(d===0)a[0]=e.An();else if(d>0&&m<0)a.push(c),a.push(c.An());else if(m>0)break}a.push(t);const l=[];for(let c=0;c<a.length;c+=2){if(this.Zn(a[c],a[c+1]))return[];const d=a[c].Vn(this.uid,Jh,ce.empty()),m=a[c+1].Vn(this.uid,Jh,ce.empty());l.push(IDBKeyRange.bound(d,m))}return l}Zn(e,t){return $r(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(H0)}getMinOffset(e,t){return L.mapArray(this.Mn(t),(i=>this.xn(e,i).next((a=>a||me(44426))))).next(H0)}}function F0(r){return kt(r,tc)}function wo(r){return kt(r,zu)}function Iu(r){return kt(r,ey)}function Io(r){return kt(r,Bu)}function H0(r){ve(r.length!==0,28825);let e=r[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<r.length;i++){const a=r[i].indexState.offset;Jp(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new Cn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},lw=41943040;class en{static withCacheSize(e){return new en(e,en.DEFAULT_COLLECTION_PERCENTILE,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uw(r,e,t){const i=r.store(ei),a=r.store(qo),l=[],c=IDBKeyRange.only(t.batchId);let d=0;const m=i.ee({range:c},((_,T,b)=>(d++,b.delete())));l.push(m.next((()=>{ve(d===1,47070,{batchId:t.batchId})})));const p=[];for(const _ of t.mutations){const T=ZA(e,_.key.path,t.batchId);l.push(a.delete(T)),p.push(_.key)}return L.waitFor(l).next((()=>p))}function jf(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw me(14731);e=r.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */en.DEFAULT_COLLECTION_PERCENTILE=10,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,en.DEFAULT=new en(lw,en.DEFAULT_COLLECTION_PERCENTILE,en.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),en.DISABLED=new en(-1,0,0);class gd{constructor(e,t,i,a){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=a,this.Xn={}}static wt(e,t,i,a){ve(e.uid!=="",64387);const l=e.isAuthenticated()?e.uid:"";return new gd(l,t,i,a)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Xr(e).ee({index:ha,range:i},((a,l,c)=>{t=!1,c.done()})).next((()=>t))}addMutationBatch(e,t,i,a){const l=Vo(e),c=Xr(e);return c.add({}).next((d=>{ve(typeof d=="number",49019);const m=new cy(d,t,i,a),p=(function(N,q,G){const F=G.baseMutations.map((Z=>Uf(N.yt,Z))),ie=G.mutations.map((Z=>Uf(N.yt,Z)));return{userId:q,batchId:G.batchId,localWriteTimeMs:G.localWriteTime.toMillis(),baseMutations:F,mutations:ie}})(this.serializer,this.userId,m),_=[];let T=new Je(((b,N)=>Re(b.canonicalString(),N.canonicalString())));for(const b of a){const N=ZA(this.userId,b.key.path,d);T=T.add(b.key.path.popLast()),_.push(c.put(p)),_.push(l.put(N,gN))}return T.forEach((b=>{_.push(this.indexManager.addToCollectionParentIndex(e,b))})),e.addOnCommittedListener((()=>{this.Xn[d]=m.keys()})),L.waitFor(_).next((()=>m))}))}lookupMutationBatch(e,t){return Xr(e).get(t).next((i=>i?(ve(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:t}),la(this.serializer,i)):null))}er(e,t){return this.Xn[t]?L.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next((i=>{if(i){const a=i.keys();return this.Xn[t]=a,a}return null}))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=IDBKeyRange.lowerBound([this.userId,i]);let l=null;return Xr(e).ee({index:ha,range:a},((c,d,m)=>{d.userId===this.userId&&(ve(d.batchId>=i,47524,{tr:i}),l=la(this.serializer,d)),m.done()})).next((()=>l))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=fa;return Xr(e).ee({index:ha,range:t,reverse:!0},((a,l,c)=>{i=l.batchId,c.done()})).next((()=>i))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,fa],[this.userId,Number.POSITIVE_INFINITY]);return Xr(e).J(ha,t).next((i=>i.map((a=>la(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=hf(this.userId,t.path),a=IDBKeyRange.lowerBound(i),l=[];return Vo(e).ee({range:a},((c,d,m)=>{const[p,_,T]=c,b=vi(_);if(p===this.userId&&t.path.isEqual(b))return Xr(e).get(T).next((N=>{if(!N)throw me(61480,{nr:c,batchId:T});ve(N.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:N.userId,batchId:T}),l.push(la(this.serializer,N))}));m.done()})).next((()=>l))}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Je(Re);const a=[];return t.forEach((l=>{const c=hf(this.userId,l.path),d=IDBKeyRange.lowerBound(c),m=Vo(e).ee({range:d},((p,_,T)=>{const[b,N,q]=p,G=vi(N);b===this.userId&&l.path.isEqual(G)?i=i.add(q):T.done()}));a.push(m)})),L.waitFor(a).next((()=>this.rr(e,i)))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1,l=hf(this.userId,i),c=IDBKeyRange.lowerBound(l);let d=new Je(Re);return Vo(e).ee({range:c},((m,p,_)=>{const[T,b,N]=m,q=vi(b);T===this.userId&&i.isPrefixOf(q)?q.length===a&&(d=d.add(N)):_.done()})).next((()=>this.rr(e,d)))}rr(e,t){const i=[],a=[];return t.forEach((l=>{a.push(Xr(e).get(l).next((c=>{if(c===null)throw me(35274,{batchId:l});ve(c.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:c.userId,batchId:l}),i.push(la(this.serializer,c))})))})),L.waitFor(a).next((()=>i))}removeMutationBatch(e,t){return uw(e.le,this.userId,t).next((i=>(e.addOnCommittedListener((()=>{this.ir(t.batchId)})),L.forEach(i,(a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return L.resolve();const i=IDBKeyRange.lowerBound((function(c){return[c]})(this.userId)),a=[];return Vo(e).ee({range:i},((l,c,d)=>{if(l[0]===this.userId){const m=vi(l[1]);a.push(m)}else d.done()})).next((()=>{ve(a.length===0,56720,{sr:a.map((l=>l.canonicalString()))})}))}))}containsKey(e,t){return cw(e,this.userId,t)}_r(e){return hw(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:fa,lastStreamToken:""}))}}function cw(r,e,t){const i=hf(e,t.path),a=i[1],l=IDBKeyRange.lowerBound(i);let c=!1;return Vo(r).ee({range:l,X:!0},((d,m,p)=>{const[_,T,b]=d;_===e&&T===a&&(c=!0),p.done()})).next((()=>c))}function Xr(r){return kt(r,ei)}function Vo(r){return kt(r,qo)}function hw(r){return kt(r,Zu)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new wa(0)}static cr(){return new wa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UV{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next((t=>{const i=new wa(t.highestTargetId);return t.highestTargetId=i.next(),this.hr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.lr(e).next((t=>Te.fromTimestamp(new $e(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.lr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,i){return this.lr(e).next((a=>(a.highestListenSequenceNumber=t,i&&(a.lastRemoteSnapshotVersion=i.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.hr(e,a))))}addTargetData(e,t){return this.Pr(e,t).next((()=>this.lr(e).next((i=>(i.targetCount+=1,this.Tr(t,i),this.hr(e,i))))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Ro(e).delete(t.targetId))).next((()=>this.lr(e))).next((i=>(ve(i.targetCount>0,8065),i.targetCount-=1,this.hr(e,i))))}removeTargets(e,t,i){let a=0;const l=[];return Ro(e).ee(((c,d)=>{const m=Ou(d);m.sequenceNumber<=t&&i.get(m.targetId)===null&&(a++,l.push(this.removeTargetData(e,m)))})).next((()=>L.waitFor(l))).next((()=>a))}forEachTarget(e,t){return Ro(e).ee(((i,a)=>{const l=Ou(a);t(l)}))}lr(e){return K0(e).get(Vf).next((t=>(ve(t!==null,2888),t)))}hr(e,t){return K0(e).put(Vf,t)}Pr(e,t){return Ro(e).put(rw(this.serializer,t))}Tr(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.lr(e).next((t=>t.targetCount))}getTargetData(e,t){const i=Sa(t),a=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let l=null;return Ro(e).ee({range:a,index:tb},((c,d,m)=>{const p=Ou(d);Sc(t,p.target)&&(l=p,m.done())})).next((()=>l))}addMatchingKeys(e,t,i){const a=[],l=ns(e);return t.forEach((c=>{const d=tn(c.path);a.push(l.put({targetId:i,path:d})),a.push(this.referenceDelegate.addReference(e,i,c))})),L.waitFor(a)}removeMatchingKeys(e,t,i){const a=ns(e);return L.forEach(t,(l=>{const c=tn(l.path);return L.waitFor([a.delete([i,c]),this.referenceDelegate.removeReference(e,i,l)])}))}removeMatchingKeysForTargetId(e,t){const i=ns(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(a)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),a=ns(e);let l=Oe();return a.ee({range:i,X:!0},((c,d,m)=>{const p=vi(c[1]),_=new ce(p);l=l.add(_)})).next((()=>l))}containsKey(e,t){const i=tn(t.path),a=IDBKeyRange.bound([i],[HA(i)],!1,!0);let l=0;return ns(e).ee({index:Zp,X:!0,range:a},(([c,d],m,p)=>{c!==0&&(l++,p.done())})).next((()=>l>0))}At(e,t){return Ro(e).get(t).next((i=>i?Ou(i):null))}}function Ro(r){return kt(r,Fo)}function K0(r){return kt(r,da)}function ns(r){return kt(r,Ho)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q0="LruGarbageCollector",fw=1048576;function Y0([r,e],[t,i]){const a=Re(r,t);return a===0?Re(e,i):a}class BV{constructor(e){this.Ir=e,this.buffer=new Je(Y0),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();Y0(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class dw{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){re(Q0,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ys(t)?re(Q0,"Ignoring IndexedDB error during garbage collection: ",t):await ps(t)}await this.Vr(3e5)}))}}class zV{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return L.resolve(mn.ce);const i=new BV(t);return this.mr.forEachTarget(e,(a=>i.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>i.Ar(a))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(re("LruGarbageCollector","Garbage collection skipped; disabled"),L.resolve(G0)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(re("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),G0):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,a,l,c,d,m,p;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(re("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),a=this.params.maximumSequenceNumbersToCollect):a=T,c=Date.now(),this.nthSequenceNumber(e,a)))).next((T=>(i=T,d=Date.now(),this.removeTargets(e,i,t)))).next((T=>(l=T,m=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(p=Date.now(),Co()<=Le.DEBUG&&re("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-_}ms
	Determined least recently used ${a} in `+(d-c)+`ms
	Removed ${l} targets in `+(m-d)+`ms
	Removed ${T} documents in `+(p-m)+`ms
Total Duration: ${p-_}ms`),L.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:T}))))}}function mw(r,e){return new zV(r,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jV{constructor(e,t){this.db=e,this.garbageCollector=mw(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next((i=>t.next((a=>i+a))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,((i,a)=>t(a)))}addReference(e,t,i){return Wh(e,i)}removeReference(e,t,i){return Wh(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return Wh(e,t)}br(e,t){return(function(a,l){let c=!1;return hw(a).te((d=>cw(a,d,l).next((m=>(m&&(c=!0),L.resolve(!m)))))).next((()=>c))})(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.Sr(e,((c,d)=>{if(d<=t){const m=this.br(e,c).next((p=>{if(!p)return l++,i.getEntry(e,c).next((()=>(i.removeEntry(c,Te.min()),ns(e).delete((function(T){return[0,tn(T.path)]})(c)))))}));a.push(m)}})).next((()=>L.waitFor(a))).next((()=>i.apply(e))).next((()=>l))}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return Wh(e,t)}Sr(e,t){const i=ns(e);let a,l=mn.ce;return i.ee({index:Zp},(([c,d],{path:m,sequenceNumber:p})=>{c===0?(l!==mn.ce&&t(new ce(vi(a)),l),l=p,a=m):l=mn.ce})).next((()=>{l!==mn.ce&&t(new ce(vi(a)),l)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Wh(r,e){return ns(r).put((function(i,a){return{targetId:0,path:tn(i.path),sequenceNumber:a}})(e,r.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gw{constructor(){this.changes=new ur((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,yt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?L.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return ia(e).put(i)}removeEntry(e,t,i){return ia(e).delete((function(l,c){const d=l.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Bf(c),d[d.length-1]]})(t,i))}updateMetadata(e,t){return this.getMetadata(e).next((i=>(i.byteSize+=t,this.Dr(e,i))))}getEntry(e,t){let i=yt.newInvalidDocument(t);return ia(e).ee({index:ff,range:IDBKeyRange.only(Ru(t))},((a,l)=>{i=this.Cr(t,l)})).next((()=>i))}vr(e,t){let i={size:0,document:yt.newInvalidDocument(t)};return ia(e).ee({index:ff,range:IDBKeyRange.only(Ru(t))},((a,l)=>{i={document:this.Cr(t,l),size:jf(l)}})).next((()=>i))}getEntries(e,t){let i=bn();return this.Fr(e,t,((a,l)=>{const c=this.Cr(a,l);i=i.insert(a,c)})).next((()=>i))}Mr(e,t){let i=bn(),a=new at(ce.comparator);return this.Fr(e,t,((l,c)=>{const d=this.Cr(l,c);i=i.insert(l,d),a=a.insert(l,jf(c))})).next((()=>({documents:i,Or:a})))}Fr(e,t,i){if(t.isEmpty())return L.resolve();let a=new Je(J0);t.forEach((m=>a=a.add(m)));const l=IDBKeyRange.bound(Ru(a.first()),Ru(a.last())),c=a.getIterator();let d=c.getNext();return ia(e).ee({index:ff,range:l},((m,p,_)=>{const T=ce.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;d&&J0(d,T)<0;)i(d,null),d=c.getNext();d&&d.isEqual(T)&&(i(d,p),d=c.hasNext()?c.getNext():null),d?_.j(Ru(d)):_.done()})).next((()=>{for(;d;)i(d,null),d=c.hasNext()?c.getNext():null}))}getDocumentsMatchingQuery(e,t,i,a,l){const c=t.path,d=[c.popLast().toArray(),c.lastSegment(),Bf(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],m=[c.popLast().toArray(),c.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ia(e).J(IDBKeyRange.bound(d,m,!0)).next((p=>{l?.incrementDocumentReadCount(p.length);let _=bn();for(const T of p){const b=this.Cr(ce.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);b.isFoundDocument()&&(Ac(t,b)||a.has(b.key))&&(_=_.insert(b.key,b))}return _}))}getAllFromCollectionGroup(e,t,i,a){let l=bn();const c=X0(t,i),d=X0(t,Cn.max());return ia(e).ee({index:eb,range:IDBKeyRange.bound(c,d,!0)},((m,p,_)=>{const T=this.Cr(ce.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);l=l.insert(T.key,T),l.size===a&&_.done()})).next((()=>l))}newChangeBuffer(e){return new FV(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return $0(e).get(op).next((t=>(ve(!!t,20021),t)))}Dr(e,t){return $0(e).put(op,t)}Cr(e,t){if(t){const i=CV(this.serializer,t);if(!(i.isNoDocument()&&i.version.isEqual(Te.min())))return i}return yt.newInvalidDocument(e)}}function pw(r){return new qV(r)}class FV extends gw{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new ur((i=>i.toString()),((i,a)=>i.isEqual(a)))}applyChanges(e){const t=[];let i=0,a=new Je(((l,c)=>Re(l.canonicalString(),c.canonicalString())));return this.changes.forEach(((l,c)=>{const d=this.Br.get(l);if(t.push(this.Nr.removeEntry(e,l,d.readTime)),c.isValidDocument()){const m=V0(this.Nr.serializer,c);a=a.add(l.path.popLast());const p=jf(m);i+=p-d.size,t.push(this.Nr.addEntry(e,l,m))}else if(i-=d.size,this.trackRemovals){const m=V0(this.Nr.serializer,c.convertToNoDocument(Te.min()));t.push(this.Nr.addEntry(e,l,m))}})),a.forEach((l=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,l))})),t.push(this.Nr.updateMetadata(e,i)),L.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next((i=>(this.Br.set(t,{size:i.size,readTime:i.document.readTime}),i.document)))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next((({documents:i,Or:a})=>(a.forEach(((l,c)=>{this.Br.set(l,{size:c,readTime:i.get(l).readTime})})),i)))}}function $0(r){return kt(r,ec)}function ia(r){return kt(r,Nf)}function Ru(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function X0(r,e){const t=e.documentKey.path.toArray();return[r,Bf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function J0(r,e){const t=r.path.toArray(),i=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<i.length-2;++l)if(a=Re(t[l],i[l]),a)return a;return a=Re(t.length,i.length),a||(a=Re(t[t.length-2],i[i.length-2]),a||Re(t[t.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HV{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(i=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(i!==null&&Hu(i.mutation,a,qn.empty(),$e.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Oe()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Oe()){const a=Ei();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,i).next((l=>{let c=Nu();return l.forEach(((d,m)=>{c=c.insert(d,m.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const i=Ei();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Oe())))}populateOverlays(e,t,i){const a=[];return i.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((c,d)=>{t.set(c,d)}))}))}computeViews(e,t,i,a){let l=bn();const c=Fu(),d=(function(){return Fu()})();return t.forEach(((m,p)=>{const _=i.get(p.key);a.has(p.key)&&(_===void 0||_.mutation instanceof _s)?l=l.insert(p.key,p):_!==void 0?(c.set(p.key,_.mutation.getFieldMask()),Hu(_.mutation,p,_.mutation.getFieldMask(),$e.now())):c.set(p.key,qn.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((p,_)=>c.set(p,_))),t.forEach(((p,_)=>d.set(p,new HV(_,c.get(p)??null)))),d)))}recalculateAndSaveOverlays(e,t){const i=Fu();let a=new at(((c,d)=>c-d)),l=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const d of c)d.keys().forEach((m=>{const p=t.get(m);if(p===null)return;let _=i.get(m)||qn.empty();_=d.applyToLocalView(p,_),i.set(m,_);const T=(a.get(d.batchId)||Oe()).add(m);a=a.insert(d.batchId,T)}))})).next((()=>{const c=[],d=a.getReverseIterator();for(;d.hasNext();){const m=d.getNext(),p=m.key,_=m.value,T=Ob();_.forEach((b=>{if(!l.has(b)){const N=zb(t.get(b),i.get(b));N!==null&&T.set(b,N),l=l.add(b)}})),c.push(this.documentOverlayCache.saveOverlays(e,p,T))}return L.waitFor(c)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,a){return(function(c){return ce.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Rb(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,a):this.getDocumentsMatchingCollectionQuery(e,t,i,a)}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next((l=>{const c=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-l.size):L.resolve(Ei());let d=jo,m=l;return c.next((p=>L.forEach(p,((_,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),l.get(_)?L.resolve():this.remoteDocumentCache.getEntry(e,_).next((b=>{m=m.insert(_,b)}))))).next((()=>this.populateOverlays(e,p,l))).next((()=>this.computeViews(e,m,p,Oe()))).next((_=>({batchId:d,changes:Vb(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ce(t)).next((i=>{let a=Nu();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,a){const l=t.collectionGroup;let c=Nu();return this.indexManager.getCollectionParents(e,l).next((d=>L.forEach(d,(m=>{const p=(function(T,b){return new cl(b,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,i,a).next((_=>{_.forEach(((T,b)=>{c=c.insert(T,b)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,i,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,l,a)))).next((c=>{l.forEach(((m,p)=>{const _=p.getKey();c.get(_)===null&&(c=c.insert(_,yt.newInvalidDocument(_)))}));let d=Nu();return c.forEach(((m,p)=>{const _=l.get(m);_!==void 0&&Hu(_.mutation,p,qn.empty(),$e.now()),Ac(t,p)&&(d=d.insert(m,p))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GV{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return L.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:ln(a.createTime)}})(t)),L.resolve()}getNamedQuery(e,t){return L.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(a){return{name:a.name,query:sw(a.bundledQuery),readTime:ln(a.readTime)}})(t)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(){this.overlays=new at(ce.comparator),this.qr=new Map}getOverlay(e,t){return L.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Ei();return L.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&i.set(a,l)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((a,l)=>{this.St(e,t,l)})),L.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.qr.get(i);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(i)),L.resolve()}getOverlaysForCollection(e,t,i){const a=Ei(),l=t.length+1,c=new ce(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const m=d.getNext().value,p=m.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&m.largestBatchId>i&&a.set(m.getKey(),m)}return L.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let l=new at(((p,_)=>p-_));const c=this.overlays.getIterator();for(;c.hasNext();){const p=c.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>i){let _=l.get(p.largestBatchId);_===null&&(_=Ei(),l=l.insert(p.largestBatchId,_)),_.set(p.getKey(),p)}}const d=Ei(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((p,_)=>d.set(p,_))),!(d.size()>=a)););return L.resolve(d)}St(e,t,i){const a=this.overlays.get(i.key);if(a!==null){const c=this.qr.get(a.largestBatchId).delete(i.key);this.qr.set(a.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new fy(t,i));let l=this.qr.get(t);l===void 0&&(l=Oe(),this.qr.set(t,l)),this.qr.set(t,l.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{constructor(){this.sessionToken=wt.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yy{constructor(){this.Qr=new Je(qt.$r),this.Ur=new Je(qt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new qt(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new qt(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new ce(new Ge([])),i=new qt(t,e),a=new qt(t,e+1),l=[];return this.Ur.forEachInRange([i,a],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ce(new Ge([])),i=new qt(t,e),a=new qt(t,e+1);let l=Oe();return this.Ur.forEachInRange([i,a],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new qt(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class qt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ce.comparator(e.key,t.key)||Re(e.Yr,t.Yr)}static Kr(e,t){return Re(e.Yr,t.Yr)||ce.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Je(qt.$r)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,a){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new cy(l,t,i,a);this.mutationQueue.push(c);for(const d of a)this.Zr=this.Zr.add(new qt(d.key,l)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return L.resolve(c)}lookupMutationBatch(e,t){return L.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=this.ei(i),l=a<0?0:a;return L.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?fa:this.tr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new qt(t,0),a=new qt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([i,a],(c=>{const d=this.Xr(c.Yr);l.push(d)})),L.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Je(Re);return t.forEach((a=>{const l=new qt(a,0),c=new qt(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(d=>{i=i.add(d.Yr)}))})),L.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let l=i;ce.isDocumentKey(l)||(l=l.child(""));const c=new qt(new ce(l),0);let d=new Je(Re);return this.Zr.forEachWhile((m=>{const p=m.key.path;return!!i.isPrefixOf(p)&&(p.length===a&&(d=d.add(m.Yr)),!0)}),c),L.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((i=>{const a=this.Xr(i);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){ve(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return L.forEach(t.mutations,(a=>{const l=new qt(a.key,t.batchId);return i=i.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new qt(t,0),a=this.Zr.firstAfterOrEqual(i);return L.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{constructor(e){this.ri=e,this.docs=(function(){return new at(ce.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),l=a?a.size:0,c=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return L.resolve(i?i.document.mutableCopy():yt.newInvalidDocument(t))}getEntries(e,t){let i=bn();return t.forEach((a=>{const l=this.docs.get(a);i=i.insert(a,l?l.document.mutableCopy():yt.newInvalidDocument(a))})),L.resolve(i)}getDocumentsMatchingQuery(e,t,i,a){let l=bn();const c=t.path,d=new ce(c.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(d);for(;m.hasNext();){const{key:p,value:{document:_}}=m.getNext();if(!c.isPrefixOf(p.path))break;p.path.length>c.length+1||Jp(YA(_),i)<=0||(a.has(_.key)||Ac(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return L.resolve(l)}getAllFromCollectionGroup(e,t,i,a){me(9500)}ii(e,t){return L.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new XV(this)}getSize(e){return L.resolve(this.size)}}class XV extends gw{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,a)=>{a.isValidDocument()?t.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(i)})),L.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{constructor(e){this.persistence=e,this.si=new ur((t=>Sa(t)),Sc),this.lastRemoteSnapshotVersion=Te.min(),this.highestTargetId=0,this.oi=0,this._i=new yy,this.targetCount=0,this.ai=wa.ur()}forEachTarget(e,t){return this.si.forEach(((i,a)=>t(a))),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),L.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new wa(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,L.resolve()}updateTargetData(e,t){return this.Pr(t),L.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,t,i){let a=0;const l=[];return this.si.forEach(((c,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,d.targetId)),a++)})),L.waitFor(l).next((()=>a))}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return L.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),L.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((c=>{l.push(a.markPotentiallyOrphaned(e,c))})),L.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),L.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return L.resolve(i)}containsKey(e,t){return L.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _y{constructor(e,t){this.ui={},this.overlays={},this.ci=new mn(0),this.li=!1,this.li=!0,this.hi=new QV,this.referenceDelegate=e(this),this.Pi=new JV(this),this.indexManager=new kV,this.remoteDocumentCache=(function(a){return new $V(a)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new iw(t),this.Ii=new GV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new KV,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new YV(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){re("MemoryPersistence","Starting transaction:",e);const a=new WV(this.ci.next());return this.referenceDelegate.Ei(),i(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ai(e,t){return L.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class WV extends XA{constructor(e){super(),this.currentSequenceNumber=e}}class pd{constructor(e){this.persistence=e,this.Ri=new yy,this.Vi=null}static mi(e){return new pd(e)}get fi(){if(this.Vi)return this.Vi;throw me(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),L.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),L.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),L.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((a=>this.fi.add(a.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.fi.add(l.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.fi,(i=>{const a=ce.fromPath(i);return this.gi(e,a).next((l=>{l||t.removeEntry(a,Te.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return L.or([()=>L.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class qf{constructor(e,t){this.persistence=e,this.pi=new ur((i=>tn(i.path)),((i,a)=>i.isEqual(a))),this.garbageCollector=mw(this,t)}static mi(e,t){return new qf(e,t)}Ei(){}di(e){return L.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((a=>i+a))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return L.forEach(this.pi,((i,a)=>this.br(e,i,a).next((l=>l?L.resolve():t(a)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ii(e,(c=>this.br(e,c,t).next((d=>{d||(i++,l.removeEntry(c,Te.min()))})))).next((()=>l.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),L.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),L.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),L.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),L.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=mf(e.data.value)),t}br(e,t,i){return L.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.pi.get(t);return L.resolve(a!==void 0&&a>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZV{constructor(e){this.serializer=e}k(e,t,i,a){const l=new id("createOrUpgrade",t);i<1&&a>=1&&((function(m){m.createObjectStore(Tc)})(e),(function(m){m.createObjectStore(Zu,{keyPath:mN}),m.createObjectStore(ei,{keyPath:l0,autoIncrement:!0}).createIndex(ha,u0,{unique:!0}),m.createObjectStore(qo)})(e),W0(e),(function(m){m.createObjectStore(aa)})(e));let c=L.resolve();return i<3&&a>=3&&(i!==0&&((function(m){m.deleteObjectStore(Ho),m.deleteObjectStore(Fo),m.deleteObjectStore(da)})(e),W0(e)),c=c.next((()=>(function(m){const p=m.store(da),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Te.min().toTimestamp(),targetCount:0};return p.put(Vf,_)})(l)))),i<4&&a>=4&&(i!==0&&(c=c.next((()=>(function(m,p){return p.store(ei).J().next((T=>{m.deleteObjectStore(ei),m.createObjectStore(ei,{keyPath:l0,autoIncrement:!0}).createIndex(ha,u0,{unique:!0});const b=p.store(ei),N=T.map((q=>b.put(q)));return L.waitFor(N)}))})(e,l)))),c=c.next((()=>{(function(m){m.createObjectStore(Go,{keyPath:AN})})(e)}))),i<5&&a>=5&&(c=c.next((()=>this.yi(l)))),i<6&&a>=6&&(c=c.next((()=>((function(m){m.createObjectStore(ec)})(e),this.wi(l))))),i<7&&a>=7&&(c=c.next((()=>this.Si(l)))),i<8&&a>=8&&(c=c.next((()=>this.bi(e,l)))),i<9&&a>=9&&(c=c.next((()=>{(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(e)}))),i<10&&a>=10&&(c=c.next((()=>this.Di(l)))),i<11&&a>=11&&(c=c.next((()=>{(function(m){m.createObjectStore(sd,{keyPath:bN})})(e),(function(m){m.createObjectStore(ad,{keyPath:wN})})(e)}))),i<12&&a>=12&&(c=c.next((()=>{(function(m){const p=m.createObjectStore(od,{keyPath:VN});p.createIndex(up,ON,{unique:!1}),p.createIndex(rb,MN,{unique:!1})})(e)}))),i<13&&a>=13&&(c=c.next((()=>(function(m){const p=m.createObjectStore(Nf,{keyPath:pN});p.createIndex(ff,yN),p.createIndex(eb,_N)})(e))).next((()=>this.Ci(e,l))).next((()=>e.deleteObjectStore(aa)))),i<14&&a>=14&&(c=c.next((()=>this.Fi(e,l)))),i<15&&a>=15&&(c=c.next((()=>(function(m){m.createObjectStore(ey,{keyPath:IN,autoIncrement:!0}).createIndex(lp,RN,{unique:!1}),m.createObjectStore(Bu,{keyPath:CN}).createIndex(nb,DN,{unique:!1}),m.createObjectStore(zu,{keyPath:xN}).createIndex(ib,NN,{unique:!1})})(e)))),i<16&&a>=16&&(c=c.next((()=>{t.objectStore(Bu).clear()})).next((()=>{t.objectStore(zu).clear()}))),i<17&&a>=17&&(c=c.next((()=>{(function(m){m.createObjectStore(ty,{keyPath:PN})})(e)}))),i<18&&a>=18&&WS()&&(c=c.next((()=>{t.objectStore(Bu).clear()})).next((()=>{t.objectStore(zu).clear()}))),c}wi(e){let t=0;return e.store(aa).ee(((i,a)=>{t+=jf(a)})).next((()=>{const i={byteSize:t};return e.store(ec).put(op,i)}))}yi(e){const t=e.store(Zu),i=e.store(ei);return t.J().next((a=>L.forEach(a,(l=>{const c=IDBKeyRange.bound([l.userId,fa],[l.userId,l.lastAcknowledgedBatchId]);return i.J(ha,c).next((d=>L.forEach(d,(m=>{ve(m.userId===l.userId,18650,"Cannot process batch from unexpected user",{batchId:m.batchId});const p=la(this.serializer,m);return uw(e,l.userId,p).next((()=>{}))}))))}))))}Si(e){const t=e.store(Ho),i=e.store(aa);return e.store(da).get(Vf).next((a=>{const l=[];return i.ee(((c,d)=>{const m=new Ge(c),p=(function(T){return[0,tn(T)]})(m);l.push(t.get(p).next((_=>_?L.resolve():(T=>t.put({targetId:0,path:tn(T),sequenceNumber:a.highestListenSequenceNumber}))(m))))})).next((()=>L.waitFor(l)))}))}bi(e,t){e.createObjectStore(tc,{keyPath:SN});const i=t.store(tc),a=new py,l=c=>{if(a.add(c)){const d=c.lastSegment(),m=c.popLast();return i.put({collectionId:d,parent:tn(m)})}};return t.store(aa).ee({X:!0},((c,d)=>{const m=new Ge(c);return l(m.popLast())})).next((()=>t.store(qo).ee({X:!0},(([c,d,m],p)=>{const _=vi(d);return l(_.popLast())}))))}Di(e){const t=e.store(Fo);return t.ee(((i,a)=>{const l=Ou(a),c=rw(this.serializer,l);return t.put(c)}))}Ci(e,t){const i=t.store(aa),a=[];return i.ee(((l,c)=>{const d=t.store(Nf),m=(function(T){return T.document?new ce(Ge.fromString(T.document.name).popFirst(5)):T.noDocument?ce.fromSegments(T.noDocument.path):T.unknownDocument?ce.fromSegments(T.unknownDocument.path):me(36783)})(c).path.toArray(),p={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};a.push(d.put(p))})).next((()=>L.waitFor(a)))}Fi(e,t){const i=t.store(ei),a=pw(this.serializer),l=new _y(pd.mi,this.serializer.yt);return i.J().next((c=>{const d=new Map;return c.forEach((m=>{let p=d.get(m.userId)??Oe();la(this.serializer,m).keys().forEach((_=>p=p.add(_))),d.set(m.userId,p)})),L.forEach(d,((m,p)=>{const _=new Zt(p),T=md.wt(this.serializer,_),b=l.getIndexManager(_),N=gd.wt(_,this.serializer,b,l.referenceDelegate);return new yw(a,N,T,b).recalculateAndSaveOverlaysForDocumentKeys(new cp(t,mn.ce),m).next()}))}))}}function W0(r){r.createObjectStore(Ho,{keyPath:EN}).createIndex(Zp,TN,{unique:!0}),r.createObjectStore(Fo,{keyPath:"targetId"}).createIndex(tb,vN,{unique:!0}),r.createObjectStore(da)}const Jr="IndexedDbPersistence",Lg=18e5,Ug=5e3,Bg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",eO="main";class vy{constructor(e,t,i,a,l,c,d,m,p,_,T=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Mi=l,this.window=c,this.document=d,this.xi=p,this.Oi=_,this.Ni=T,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=b=>Promise.resolve(),!vy.v())throw new ae(J.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new jV(this,a),this.$i=t+eO,this.serializer=new iw(m),this.Ui=new us(this.$i,this.Ni,new ZV(this.serializer)),this.hi=new xV,this.Pi=new UV(this.referenceDelegate,this.serializer),this.remoteDocumentCache=pw(this.serializer),this.Ii=new DV,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,_===!1&&bt(Jr,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ae(J.FAILED_PRECONDITION,Bg);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Pi.getHighestSequenceNumber(e)))})).then((e=>{this.ci=new mn(e,this.xi)})).then((()=>{this.li=!0})).catch((e=>(this.Ui&&this.Ui.close(),Promise.reject(e))))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Zh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(e).next((t=>{t||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(e))).next((t=>this.isPrimary&&!t?this.Zi(e).next((()=>!1)):!!t&&this.Xi(e).next((()=>!0)))))).catch((e=>{if(ys(e))return re(Jr,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return re(Jr,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable((()=>this.Qi(e))),this.isPrimary=e}))}Hi(e){return Cu(e).get(So).next((t=>L.resolve(this.es(t))))}ts(e){return Zh(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,Lg)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const i=kt(t,Go);return i.J().next((a=>{const l=this.ss(a,Lg),c=a.filter((d=>l.indexOf(d)===-1));return L.forEach(c,(d=>i.delete(d.clientId))).next((()=>c))}))})).catch((()=>[]));if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?L.resolve(!0):Cu(e).get(So).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Ug)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new ae(J.FAILED_PRECONDITION,Bg);return!1}}return!(!this.networkEnabled||!this.inForeground)||Zh(e).J().next((i=>this.ss(i,Ug).find((a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,c=!this.inForeground&&a.inForeground,d=this.networkEnabled===a.networkEnabled;if(l||c&&d)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&re(Jr,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Tc,Go],(e=>{const t=new cp(e,mn.ce);return this.Zi(t).next((()=>this.ts(t)))})),this.Ui.close(),this.Ps()}ss(e,t){return e.filter((i=>this.rs(i.updateTimeMs,t)&&!this.us(i.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(e=>Zh(e).J().next((t=>this.ss(t,Lg).map((i=>i.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return gd.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new LV(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return md.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,i){re(Jr,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",l=(function(m){return m===18?UN:m===17?lb:m===16?LN:m===15?ny:m===14?ob:m===13?ab:m===12?kN:m===11?sb:void me(60245)})(this.Ni);let c;return this.Ui.runTransaction(e,a,l,(d=>(c=new cp(d,this.ci?this.ci.next():mn.ce),t==="readwrite-primary"?this.Hi(c).next((m=>!!m||this.Yi(c))).next((m=>{if(!m)throw bt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new ae(J.FAILED_PRECONDITION,$A);return i(c)})).next((m=>this.Xi(c).next((()=>m)))):this.Is(c).next((()=>i(c)))))).then((d=>(c.raiseOnCommittedEvent(),d)))}Is(e){return Cu(e).get(So).next((t=>{if(t!==null&&this.rs(t.leaseTimestampMs,Ug)&&!this.us(t.ownerId)&&!this.es(t)&&!(this.Oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ae(J.FAILED_PRECONDITION,Bg)}))}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Cu(e).put(So,t)}static v(){return us.v()}Zi(e){const t=Cu(e);return t.get(So).next((i=>this.es(i)?(re(Jr,"Releasing primary lease."),t.delete(So)):L.resolve()))}rs(e,t){const i=Date.now();return!(e<i-t)&&(!(e>i)||(bt(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){typeof this.window?.addEventListener=="function"&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;JS()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{const t=this.Ki?.getItem(this._s(e))!==null;return re(Jr,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(t){return bt(Jr,"Failed to get zombied client id.",t),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){bt("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Cu(r){return kt(r,Tc)}function Zh(r){return kt(r,Go)}function _w(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=a}static As(e,t){let i=Oe(),a=Oe();for(const l of t.docChanges)switch(l.type){case 0:i=i.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new Ey(e,t.fromCache,i,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vw{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return JS()?8:JA(Pt())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,a){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,a,i).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new tO;return this.Ss(e,t,c).next((d=>{if(l.result=d,this.Vs)return this.bs(e,t,c,d.size)}))})).next((()=>l.result))}bs(e,t,i,a){return i.documentReadCount<this.fs?(Co()<=Le.DEBUG&&re("QueryEngine","SDK will not create cache indexes for query:",Do(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),L.resolve()):(Co()<=Le.DEBUG&&re("QueryEngine","Query:",Do(t),"scans",i.documentReadCount,"local documents and returns",a,"documents as results."),i.documentReadCount>this.gs*a?(Co()<=Le.DEBUG&&re("QueryEngine","The SDK decides to create cache indexes for query:",Do(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,In(t))):L.resolve())}ys(e,t){if(S0(t))return L.resolve(null);let i=In(t);return this.indexManager.getIndexType(e,i).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=kf(t,null,"F"),i=In(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((l=>{const c=Oe(...l);return this.ps.getDocuments(e,c).next((d=>this.indexManager.getMinOffset(e,i).next((m=>{const p=this.Ds(t,d);return this.Cs(t,p,c,m.readTime)?this.ys(e,kf(t,null,"F")):this.vs(e,p,t,m)}))))})))))}ws(e,t,i,a){return S0(t)||a.isEqual(Te.min())?L.resolve(null):this.ps.getDocuments(e,i).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,i,a)?L.resolve(null):(Co()<=Le.DEBUG&&re("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Do(t)),this.vs(e,c,t,QA(a,jo)).next((d=>d)))}))}Ds(e,t){let i=new Je(xb(e));return t.forEach(((a,l)=>{Ac(e,l)&&(i=i.add(l))})),i}Cs(e,t,i,a){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}Ss(e,t,i){return Co()<=Le.DEBUG&&re("QueryEngine","Using full collection scan to execute query:",Do(t)),this.ps.getDocumentsMatchingQuery(e,t,Cn.min(),i)}vs(e,t,i,a){return this.ps.getDocumentsMatchingQuery(e,i,a).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty="LocalStore",nO=3e8;class iO{constructor(e,t,i,a){this.persistence=e,this.Fs=t,this.serializer=a,this.Ms=new at(Re),this.xs=new ur((l=>Sa(l)),Sc),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new yw(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function Ew(r,e,t,i){return new iO(r,e,t,i)}async function Tw(r,e){const t=pe(r);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next((l=>(a=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((l=>{const c=[],d=[];let m=Oe();for(const p of a){c.push(p.batchId);for(const _ of p.mutations)m=m.add(_.key)}for(const p of l){d.push(p.batchId);for(const _ of p.mutations)m=m.add(_.key)}return t.localDocuments.getDocuments(i,m).next((p=>({Ls:p,removedBatchIds:c,addedBatchIds:d})))}))}))}function rO(r,e){const t=pe(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const a=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,m,p,_){const T=p.batch,b=T.keys();let N=L.resolve();return b.forEach((q=>{N=N.next((()=>_.getEntry(m,q))).next((G=>{const F=p.docVersions.get(q);ve(F!==null,48541),G.version.compareTo(F)<0&&(T.applyToRemoteDocument(G,p),G.isValidDocument()&&(G.setReadTime(p.commitVersion),_.addEntry(G)))}))})),N.next((()=>d.mutationQueue.removeMutationBatch(m,T)))})(t,i,e,l).next((()=>l.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let m=Oe();for(let p=0;p<d.mutationResults.length;++p)d.mutationResults[p].transformResults.length>0&&(m=m.add(d.batch.mutations[p].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(i,a)))}))}function Sw(r){const e=pe(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function sO(r,e){const t=pe(r),i=e.snapshotVersion;let a=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});a=t.Ms;const d=[];e.targetChanges.forEach(((_,T)=>{const b=a.get(T);if(!b)return;d.push(t.Pi.removeMatchingKeys(l,_.removedDocuments,T).next((()=>t.Pi.addMatchingKeys(l,_.addedDocuments,T))));let N=b.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(T)!==null?N=N.withResumeToken(wt.EMPTY_BYTE_STRING,Te.min()).withLastLimboFreeSnapshotVersion(Te.min()):_.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(_.resumeToken,i)),a=a.insert(T,N),(function(G,F,ie){return G.resumeToken.approximateByteSize()===0||F.snapshotVersion.toMicroseconds()-G.snapshotVersion.toMicroseconds()>=nO?!0:ie.addedDocuments.size+ie.modifiedDocuments.size+ie.removedDocuments.size>0})(b,N,_)&&d.push(t.Pi.updateTargetData(l,N))}));let m=bn(),p=Oe();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))})),d.push(aO(l,c,e.documentUpdates).next((_=>{m=_.ks,p=_.qs}))),!i.isEqual(Te.min())){const _=t.Pi.getLastRemoteSnapshotVersion(l).next((T=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,i)));d.push(_)}return L.waitFor(d).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,p))).next((()=>m))})).then((l=>(t.Ms=a,l)))}function aO(r,e,t){let i=Oe(),a=Oe();return t.forEach((l=>i=i.add(l))),e.getEntries(r,i).next((l=>{let c=bn();return t.forEach(((d,m)=>{const p=l.get(d);m.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(d)),m.isNoDocument()&&m.version.isEqual(Te.min())?(e.removeEntry(d,m.readTime),c=c.insert(d,m)):!p.isValidDocument()||m.version.compareTo(p.version)>0||m.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(m),c=c.insert(d,m)):re(Ty,"Ignoring outdated watch update for ",d,". Current version:",p.version," Watch version:",m.version)})),{ks:c,qs:a}}))}function oO(r,e){const t=pe(r);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=fa),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function Ff(r,e){const t=pe(r);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let a;return t.Pi.getTargetData(i,e).next((l=>l?(a=l,L.resolve(a)):t.Pi.allocateTargetId(i).next((c=>(a=new Wi(e,c,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,a).next((()=>a)))))))})).then((i=>{const a=t.Ms.get(i.targetId);return(a===null||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function el(r,e,t){const i=pe(r),a=i.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",l,(c=>i.persistence.referenceDelegate.removeTarget(c,a)))}catch(c){if(!ys(c))throw c;re(Ty,`Failed to update sequence numbers for target ${e}: ${c}`)}i.Ms=i.Ms.remove(e),i.xs.delete(a.target)}function bp(r,e,t){const i=pe(r);let a=Te.min(),l=Oe();return i.persistence.runTransaction("Execute query","readwrite",(c=>(function(m,p,_){const T=pe(m),b=T.xs.get(_);return b!==void 0?L.resolve(T.Ms.get(b)):T.Pi.getTargetData(p,_)})(i,c,In(e)).next((d=>{if(d)return a=d.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(c,d.targetId).next((m=>{l=m}))})).next((()=>i.Fs.getDocumentsMatchingQuery(c,e,t?a:Te.min(),t?l:Oe()))).next((d=>(ww(i,Db(e),d),{documents:d,Qs:l})))))}function Aw(r,e){const t=pe(r),i=pe(t.Pi),a=t.Ms.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",(l=>i.At(l,e).next((c=>c?c.target:null))))}function bw(r,e){const t=pe(r),i=t.Os.get(e)||Te.min();return t.persistence.runTransaction("Get new document changes","readonly",(a=>t.Ns.getAllFromCollectionGroup(a,e,QA(i,jo),Number.MAX_SAFE_INTEGER))).then((a=>(ww(t,e,a),a)))}function ww(r,e,t){let i=r.Os.get(e)||Te.min();t.forEach(((a,l)=>{l.readTime.compareTo(i)>0&&(i=l.readTime)})),r.Os.set(e,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw="firestore_clients";function Z0(r,e){return`${Iw}_${r}_${e}`}const Rw="firestore_mutations";function eS(r,e,t){let i=`${Rw}_${r}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}const Cw="firestore_targets";function zg(r,e){return`${Cw}_${r}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _i="SharedClientState";class Hf{constructor(e,t,i,a){this.user=e,this.batchId=t,this.state=i,this.error=a}static Ws(e,t,i){const a=JSON.parse(i);let l,c=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return c&&a.error&&(c=typeof a.error.message=="string"&&typeof a.error.code=="string",c&&(l=new ae(a.error.code,a.error.message))),c?new Hf(e,t,a.state,l):(bt(_i,`Failed to parse mutation state for ID '${t}': ${i}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Gu{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Ws(e,t){const i=JSON.parse(t);let a,l=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return l&&i.error&&(l=typeof i.error.message=="string"&&typeof i.error.code=="string",l&&(a=new ae(i.error.code,i.error.message))),l?new Gu(e,i.state,a):(bt(_i,`Failed to parse target state for ID '${e}': ${t}`),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Gf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const i=JSON.parse(t);let a=typeof i=="object"&&i.activeTargetIds instanceof Array,l=oy();for(let c=0;a&&c<i.activeTargetIds.length;++c)a=WA(i.activeTargetIds[c]),l=l.add(i.activeTargetIds[c]);return a?new Gf(e,l):(bt(_i,`Failed to parse client data for instance '${e}': ${t}`),null)}}class Sy{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new Sy(t.clientId,t.onlineState):(bt(_i,`Failed to parse online state: ${e}`),null)}}class wp{constructor(){this.activeTargetIds=oy()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class jg{constructor(e,t,i,a,l){this.window=e,this.Mi=t,this.persistenceKey=i,this.Js=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new at(Re),this.started=!1,this.Xs=[];const c=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.eo=Z0(this.persistenceKey,this.Js),this.no=(function(m){return`firestore_sequence_number_${m}`})(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new wp),this.ro=new RegExp(`^${Iw}_${c}_([^_]*)$`),this.io=new RegExp(`^${Rw}_${c}_(\\d+)(?:_(.*))?$`),this.so=new RegExp(`^${Cw}_${c}_(\\d+)$`),this.oo=(function(m){return`firestore_online_state_${m}`})(this.persistenceKey),this._o=(function(m){return`firestore_bundle_loaded_v2_${m}`})(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const i of e){if(i===this.Js)continue;const a=this.getItem(Z0(this.persistenceKey,i));if(a){const l=Gf.Ws(i,a);l&&(this.Zs=this.Zs.insert(l.clientId,l))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const i=this.uo(t);i&&this.co(i)}for(const i of this.Xs)this.Ys(i);this.Xs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach(((i,a)=>{a.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,i){this.ho(e,t,i),this.Po(e)}addLocalQueryTarget(e,t=!0){let i="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(zg(this.persistenceKey,e));if(a){const l=Gu.Ws(e,a);l&&(i=l.state)}}return t&&this.To.zs(e),this.ao(),i}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(zg(this.persistenceKey,e))}updateQueryState(e,t,i){this.Io(e,t,i)}handleUserChange(e,t,i){t.forEach((a=>{this.Po(a)})),this.currentUser=e,i.forEach((a=>{this.addPendingMutation(a)}))}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return re(_i,"READ",e,t),t}setItem(e,t){re(_i,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){re(_i,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(re(_i,"EVENT",t.key,t.newValue),t.key===this.eo)return void bt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.ro.test(t.key)){if(t.newValue==null){const i=this.Ro(t.key);return this.Vo(i,null)}{const i=this.mo(t.key,t.newValue);if(i)return this.Vo(i.clientId,i)}}else if(this.io.test(t.key)){if(t.newValue!==null){const i=this.fo(t.key,t.newValue);if(i)return this.po(i)}}else if(this.so.test(t.key)){if(t.newValue!==null){const i=this.yo(t.key,t.newValue);if(i)return this.wo(i)}}else if(t.key===this.oo){if(t.newValue!==null){const i=this.uo(t.newValue);if(i)return this.co(i)}}else if(t.key===this.no){const i=(function(l){let c=mn.ce;if(l!=null)try{const d=JSON.parse(l);ve(typeof d=="number",30636,{So:l}),c=d}catch(d){bt(_i,"Failed to read sequence number from WebStorage",d)}return c})(t.newValue);i!==mn.ce&&this.sequenceNumberHandler(i)}else if(t.key===this._o){const i=this.bo(t.newValue);await Promise.all(i.map((a=>this.syncEngine.Do(a))))}}}else this.Xs.push(t)}))}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,i){const a=new Hf(this.currentUser,e,t,i),l=eS(this.persistenceKey,this.currentUser,e);this.setItem(l,a.Gs())}Po(e){const t=eS(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,i){const a=zg(this.persistenceKey,e),l=new Gu(e,t,i);this.setItem(a,l.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const i=this.Ro(e);return Gf.Ws(i,t)}fo(e,t){const i=this.io.exec(e),a=Number(i[1]),l=i[2]!==void 0?i[2]:null;return Hf.Ws(new Zt(l),a,t)}yo(e,t){const i=this.so.exec(e),a=Number(i[1]);return Gu.Ws(a,t)}uo(e){return Sy.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);re(_i,`Ignoring mutation for non-active user ${e.user.uid}`)}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const i=t?this.Zs.insert(e,t):this.Zs.remove(e),a=this.lo(this.Zs),l=this.lo(i),c=[],d=[];return l.forEach((m=>{a.has(m)||c.push(m)})),a.forEach((m=>{l.has(m)||d.push(m)})),this.syncEngine.Fo(c,d).then((()=>{this.Zs=i}))}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=oy();return e.forEach(((i,a)=>{t=t.unionWith(a.activeTargetIds)})),t}}class Dw{constructor(){this.Mo=new wp,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new wp,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lO{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS="ConnectivityMonitor";class nS{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){re(tS,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){re(tS,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ef=null;function Ip(){return ef===null?ef=(function(){return 268435456+Math.round(2147483648*Math.random())})():ef++,"0x"+ef.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qg="RestConnection",uO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class cO{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${a}`,this.Wo=this.databaseId.database===Of?`project_id=${i}`:`project_id=${i}&database_id=${a}`}Go(e,t,i,a,l){const c=Ip(),d=this.zo(e,t.toUriEncodedString());re(qg,`Sending RPC '${e}' ${c}:`,d,i);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,a,l);const{host:p}=new URL(d),_=al(p);return this.Jo(e,d,m,i,_).then((T=>(re(qg,`Received RPC '${e}' ${c}: `,T),T)),(T=>{throw Xu(qg,`RPC '${e}' ${c} failed with error: `,T,"url: ",d,"request:",i),T}))}Ho(e,t,i,a,l,c){return this.Go(e,t,i,a,l)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ul})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),i&&i.headers.forEach(((a,l)=>e[l]=a))}zo(e,t){const i=uO[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wt="WebChannelConnection";class fO extends cO{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,a,l){const c=Ip();return new Promise(((d,m)=>{const p=new UA;p.setWithCredentials(!0),p.listenOnce(BA.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case uf.NO_ERROR:const T=p.getResponseJson();re(Wt,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(T)),d(T);break;case uf.TIMEOUT:re(Wt,`RPC '${e}' ${c} timed out`),m(new ae(J.DEADLINE_EXCEEDED,"Request time out"));break;case uf.HTTP_ERROR:const b=p.getStatus();if(re(Wt,`RPC '${e}' ${c} failed with status:`,b,"response text:",p.getResponseText()),b>0){let N=p.getResponseJson();Array.isArray(N)&&(N=N[0]);const q=N?.error;if(q&&q.status&&q.message){const G=(function(ie){const Z=ie.toLowerCase().replace(/_/g,"-");return Object.values(J).indexOf(Z)>=0?Z:J.UNKNOWN})(q.status);m(new ae(G,q.message))}else m(new ae(J.UNKNOWN,"Server responded with status "+p.getStatus()))}else m(new ae(J.UNAVAILABLE,"Connection failed."));break;default:me(9055,{l_:e,streamId:c,h_:p.getLastErrorCode(),P_:p.getLastError()})}}finally{re(Wt,`RPC '${e}' ${c} completed.`)}}));const _=JSON.stringify(a);re(Wt,`RPC '${e}' ${c} sending request:`,a),p.send(t,"POST",_,i,15)}))}T_(e,t,i){const a=Ip(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=qA(),d=jA(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(m.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,t,i),m.encodeInitMessageHeaders=!0;const _=l.join("");re(Wt,`Creating RPC '${e}' stream ${a}: ${_}`,m);const T=c.createWebChannel(_,m);this.I_(T);let b=!1,N=!1;const q=new hO({Yo:F=>{N?re(Wt,`Not sending because RPC '${e}' stream ${a} is closed:`,F):(b||(re(Wt,`Opening RPC '${e}' stream ${a} transport.`),T.open(),b=!0),re(Wt,`RPC '${e}' stream ${a} sending:`,F),T.send(F))},Zo:()=>T.close()}),G=(F,ie,Z)=>{F.listen(ie,($=>{try{Z($)}catch(fe){setTimeout((()=>{throw fe}),0)}}))};return G(T,xu.EventType.OPEN,(()=>{N||(re(Wt,`RPC '${e}' stream ${a} transport opened.`),q.o_())})),G(T,xu.EventType.CLOSE,(()=>{N||(N=!0,re(Wt,`RPC '${e}' stream ${a} transport closed`),q.a_(),this.E_(T))})),G(T,xu.EventType.ERROR,(F=>{N||(N=!0,Xu(Wt,`RPC '${e}' stream ${a} transport errored. Name:`,F.name,"Message:",F.message),q.a_(new ae(J.UNAVAILABLE,"The operation could not be completed")))})),G(T,xu.EventType.MESSAGE,(F=>{if(!N){const ie=F.data[0];ve(!!ie,16349);const Z=ie,$=Z?.error||Z[0]?.error;if($){re(Wt,`RPC '${e}' stream ${a} received error:`,$);const fe=$.status;let se=(function(w){const I=Ct[w];if(I!==void 0)return Fb(I)})(fe),de=$.message;se===void 0&&(se=J.INTERNAL,de="Unknown error status: "+fe+" with message "+$.message),N=!0,q.a_(new ae(se,de)),T.close()}else re(Wt,`RPC '${e}' stream ${a} received:`,ie),q.u_(ie)}})),G(d,zA.STAT_EVENT,(F=>{F.stat===rp.PROXY?re(Wt,`RPC '${e}' stream ${a} detected buffering proxy`):F.stat===rp.NOPROXY&&re(Wt,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{q.__()}),0),q}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xw(){return typeof window<"u"?window:null}function vf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yd(r){return new _V(r,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(e,t,i=1e3,a=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=a,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),a=Math.max(0,t-i);a>0&&re("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS="PersistentStream";class Vw{constructor(e,t,i,a,l,c,d,m){this.Mi=e,this.S_=i,this.b_=a,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Nw(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===J.RESOURCE_EXHAUSTED?(bt(t.toString()),bt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===J.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,a])=>{this.D_===t&&this.G_(i,a)}),(i=>{e((()=>{const a=new ae(J.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(a)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{i((()=>this.z_(a)))})),this.stream.onMessage((a=>{i((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return re(iS,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(re(iS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class dO extends Vw{constructor(e,t,i,a,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=TV(this.serializer,e),i=(function(l){if(!("targetChange"in l))return Te.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Te.min():c.readTime?ln(c.readTime):Te.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=vp(this.serializer),t.addTarget=(function(l,c){let d;const m=c.target;if(d=Mf(m)?{documents:Jb(l,m)}:{query:Wb(l,m).ft},d.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){d.resumeToken=Kb(l,c.resumeToken);const p=yp(l,c.expectedCount);p!==null&&(d.expectedCount=p)}else if(c.snapshotVersion.compareTo(Te.min())>0){d.readTime=Zo(l,c.snapshotVersion.toTimestamp());const p=yp(l,c.expectedCount);p!==null&&(d.expectedCount=p)}return d})(this.serializer,e);const i=AV(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=vp(this.serializer),t.removeTarget=e,this.q_(t)}}class mO extends Vw{constructor(e,t,i,a,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ve(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ve(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ve(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=SV(e.writeResults,e.commitTime),i=ln(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=vp(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>Uf(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{}class pO extends gO{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new ae(J.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,_p(t,i),a,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ae(J.UNKNOWN,l.toString())}))}Ho(e,t,i,a,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,d])=>this.connection.Ho(e,_p(t,i),a,c,d,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===J.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new ae(J.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class yO{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(bt(t),this.aa=!1):re("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ia="RemoteStore";class _O{constructor(e,t,i,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{i.enqueueAndForget((async()=>{Da(this)&&(re(Ia,"Restarting streams for network reachability change."),await(async function(m){const p=pe(m);p.Ea.add(4),await Ic(p),p.Ra.set("Unknown"),p.Ea.delete(4),await _d(p)})(this))}))})),this.Ra=new yO(i,a)}}async function _d(r){if(Da(r))for(const e of r.da)await e(!0)}async function Ic(r){for(const e of r.da)await e(!1)}function vd(r,e){const t=pe(r);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),wy(t)?by(t):dl(t).O_()&&Ay(t,e))}function tl(r,e){const t=pe(r),i=dl(t);t.Ia.delete(e),i.O_()&&Ow(t,e),t.Ia.size===0&&(i.O_()?i.L_():Da(t)&&t.Ra.set("Unknown"))}function Ay(r,e){if(r.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Te.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}dl(r).Y_(e)}function Ow(r,e){r.Va.Ue(e),dl(r).Z_(e)}function by(r){r.Va=new mV({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),dl(r).start(),r.Ra.ua()}function wy(r){return Da(r)&&!dl(r).x_()&&r.Ia.size>0}function Da(r){return pe(r).Ea.size===0}function Mw(r){r.Va=void 0}async function vO(r){r.Ra.set("Online")}async function EO(r){r.Ia.forEach(((e,t)=>{Ay(r,e)}))}async function TO(r,e){Mw(r),wy(r)?(r.Ra.ha(e),by(r)):r.Ra.set("Unknown")}async function SO(r,e,t){if(r.Ra.set("Online"),e instanceof Gb&&e.state===2&&e.cause)try{await(async function(a,l){const c=l.cause;for(const d of l.targetIds)a.Ia.has(d)&&(await a.remoteSyncer.rejectListen(d,c),a.Ia.delete(d),a.Va.removeTarget(d))})(r,e)}catch(i){re(Ia,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Kf(r,i)}else if(e instanceof yf?r.Va.Ze(e):e instanceof Hb?r.Va.st(e):r.Va.tt(e),!t.isEqual(Te.min()))try{const i=await Sw(r.localStore);t.compareTo(i)>=0&&await(function(l,c){const d=l.Va.Tt(c);return d.targetChanges.forEach(((m,p)=>{if(m.resumeToken.approximateByteSize()>0){const _=l.Ia.get(p);_&&l.Ia.set(p,_.withResumeToken(m.resumeToken,c))}})),d.targetMismatches.forEach(((m,p)=>{const _=l.Ia.get(m);if(!_)return;l.Ia.set(m,_.withResumeToken(wt.EMPTY_BYTE_STRING,_.snapshotVersion)),Ow(l,m);const T=new Wi(_.target,m,p,_.sequenceNumber);Ay(l,T)})),l.remoteSyncer.applyRemoteEvent(d)})(r,t)}catch(i){re(Ia,"Failed to raise snapshot:",i),await Kf(r,i)}}async function Kf(r,e,t){if(!ys(e))throw e;r.Ea.add(1),await Ic(r),r.Ra.set("Offline"),t||(t=()=>Sw(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{re(Ia,"Retrying IndexedDB access"),await t(),r.Ea.delete(1),await _d(r)}))}function Pw(r,e){return e().catch((t=>Kf(r,t,e)))}async function fl(r){const e=pe(r),t=ms(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:fa;for(;AO(e);)try{const a=await oO(e.localStore,i);if(a===null){e.Ta.length===0&&t.L_();break}i=a.batchId,bO(e,a)}catch(a){await Kf(e,a)}kw(e)&&Lw(e)}function AO(r){return Da(r)&&r.Ta.length<10}function bO(r,e){r.Ta.push(e);const t=ms(r);t.O_()&&t.X_&&t.ea(e.mutations)}function kw(r){return Da(r)&&!ms(r).x_()&&r.Ta.length>0}function Lw(r){ms(r).start()}async function wO(r){ms(r).ra()}async function IO(r){const e=ms(r);for(const t of r.Ta)e.ea(t.mutations)}async function RO(r,e,t){const i=r.Ta.shift(),a=hy.from(i,e,t);await Pw(r,(()=>r.remoteSyncer.applySuccessfulWrite(a))),await fl(r)}async function CO(r,e){e&&ms(r).X_&&await(async function(i,a){if((function(c){return hV(c)&&c!==J.ABORTED})(a.code)){const l=i.Ta.shift();ms(i).B_(),await Pw(i,(()=>i.remoteSyncer.rejectFailedWrite(l.batchId,a))),await fl(i)}})(r,e),kw(r)&&Lw(r)}async function rS(r,e){const t=pe(r);t.asyncQueue.verifyOperationInProgress(),re(Ia,"RemoteStore received new credentials");const i=Da(t);t.Ea.add(3),await Ic(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await _d(t)}async function Rp(r,e){const t=pe(r);e?(t.Ea.delete(2),await _d(t)):e||(t.Ea.add(2),await Ic(t),t.Ra.set("Unknown"))}function dl(r){return r.ma||(r.ma=(function(t,i,a){const l=pe(t);return l.sa(),new dO(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(r.datastore,r.asyncQueue,{Xo:vO.bind(null,r),t_:EO.bind(null,r),r_:TO.bind(null,r),H_:SO.bind(null,r)}),r.da.push((async e=>{e?(r.ma.B_(),wy(r)?by(r):r.Ra.set("Unknown")):(await r.ma.stop(),Mw(r))}))),r.ma}function ms(r){return r.fa||(r.fa=(function(t,i,a){const l=pe(t);return l.sa(),new mO(i,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(r.datastore,r.asyncQueue,{Xo:()=>Promise.resolve(),t_:wO.bind(null,r),r_:CO.bind(null,r),ta:IO.bind(null,r),na:RO.bind(null,r)}),r.da.push((async e=>{e?(r.fa.B_(),await fl(r)):(await r.fa.stop(),r.Ta.length>0&&(re(Ia,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(e,t,i,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=l,this.deferred=new er,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,a,l){const c=Date.now()+i,d=new Iy(e,t,c,a,l);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ae(J.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ry(r,e){if(bt("AsyncQueue",`${e}: ${r}`),ys(r))return new ae(J.UNAVAILABLE,`${e}: ${r}`);throw r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{static emptySet(e){return new Uo(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||ce.comparator(t.key,i.key):(t,i)=>ce.comparator(t.key,i.key),this.keyedMap=Nu(),this.sortedSet=new at(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Uo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=i.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Uo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sS{constructor(){this.ga=new at(ce.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):me(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class nl{constructor(e,t,i,a,l,c,d,m,p){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=m,this.hasCachedResults=p}static fromInitialDocuments(e,t,i,a,l){const c=[];return t.forEach((d=>{c.push({type:0,doc:d})})),new nl(e,t,Uo.emptySet(t),c,i,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&hd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class xO{constructor(){this.queries=aS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const a=pe(t),l=a.queries;a.queries=aS(),l.forEach(((c,d)=>{for(const m of d.Sa)m.onError(i)}))})(this,new ae(J.ABORTED,"Firestore shutting down"))}}function aS(){return new ur((r=>Cb(r)),hd)}async function Uw(r,e){const t=pe(r);let i=3;const a=e.query;let l=t.queries.get(a);l?!l.ba()&&e.Da()&&(i=2):(l=new DO,i=e.Da()?0:1);try{switch(i){case 0:l.wa=await t.onListen(a,!0);break;case 1:l.wa=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(c){const d=Ry(c,`Initialization of query '${Do(e.query)}' failed`);return void e.onError(d)}t.queries.set(a,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Cy(t)}async function Bw(r,e){const t=pe(r),i=e.query;let a=3;const l=t.queries.get(i);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?a=e.Da()?0:1:!l.ba()&&e.Da()&&(a=2))}switch(a){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function NO(r,e){const t=pe(r);let i=!1;for(const a of e){const l=a.query,c=t.queries.get(l);if(c){for(const d of c.Sa)d.Fa(a)&&(i=!0);c.wa=a}}i&&Cy(t)}function VO(r,e,t){const i=pe(r),a=i.queries.get(e);if(a)for(const l of a.Sa)l.onError(t);i.queries.delete(e)}function Cy(r){r.Ca.forEach((e=>{e.next()}))}var Cp,oS;(oS=Cp||(Cp={})).Ma="default",oS.Cache="cache";class zw{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)a.type!==3&&i.push(a);e=new nl(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=nl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Cp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(e){this.key=e}}class qw{constructor(e){this.key=e}}class OO{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Oe(),this.mutatedKeys=Oe(),this.eu=xb(e),this.tu=new Uo(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new sS,a=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=a,d=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((_,T)=>{const b=a.get(_),N=Ac(this.query,T)?T:null,q=!!b&&this.mutatedKeys.has(b.key),G=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let F=!1;b&&N?b.data.isEqual(N.data)?q!==G&&(i.track({type:3,doc:N}),F=!0):this.su(b,N)||(i.track({type:2,doc:N}),F=!0,(m&&this.eu(N,m)>0||p&&this.eu(N,p)<0)&&(d=!0)):!b&&N?(i.track({type:0,doc:N}),F=!0):b&&!N&&(i.track({type:1,doc:b}),F=!0,(m||p)&&(d=!0)),F&&(N?(c=c.add(N),l=G?l.add(_):l.delete(_)):(c=c.delete(_),l=l.delete(_)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const _=this.query.limitType==="F"?c.last():c.first();c=c.delete(_.key),l=l.delete(_.key),i.track({type:1,doc:_})}return{tu:c,iu:i,Cs:d,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,a){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((_,T)=>(function(N,q){const G=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return me(20277,{Rt:F})}};return G(N)-G(q)})(_.type,T.type)||this.eu(_.doc,T.doc))),this.ou(i),a=a??!1;const d=t&&!a?this._u():[],m=this.Xa.size===0&&this.current&&!a?1:0,p=m!==this.Za;return this.Za=m,c.length!==0||p?{snapshot:new nl(this.query,e.tu,l,c,e.mutatedKeys,m===0,p,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new sS,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Oe(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new qw(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new jw(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=Oe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return nl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const ml="SyncEngine";class MO{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class PO{constructor(e){this.key=e,this.hu=!1}}class kO{constructor(e,t,i,a,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new ur((d=>Cb(d)),hd),this.Iu=new Map,this.Eu=new Set,this.du=new at(ce.comparator),this.Au=new Map,this.Ru=new yy,this.Vu={},this.mu=new Map,this.fu=wa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function LO(r,e,t=!0){const i=Ed(r);let a;const l=i.Tu.get(e);return l?(i.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.lu()):a=await Fw(i,e,t,!0),a}async function UO(r,e){const t=Ed(r);await Fw(t,e,!0,!1)}async function Fw(r,e,t,i){const a=await Ff(r.localStore,In(e)),l=a.targetId,c=r.sharedClientState.addLocalQueryTarget(l,t);let d;return i&&(d=await Dy(r,e,l,c==="current",a.resumeToken)),r.isPrimaryClient&&t&&vd(r.remoteStore,a),d}async function Dy(r,e,t,i,a){r.pu=(T,b,N)=>(async function(G,F,ie,Z){let $=F.view.ru(ie);$.Cs&&($=await bp(G.localStore,F.query,!1).then((({documents:D})=>F.view.ru(D,$))));const fe=Z&&Z.targetChanges.get(F.targetId),se=Z&&Z.targetMismatches.get(F.targetId)!=null,de=F.view.applyChanges($,G.isPrimaryClient,fe,se);return Dp(G,F.targetId,de.au),de.snapshot})(r,T,b,N);const l=await bp(r.localStore,e,!0),c=new OO(e,l.Qs),d=c.ru(l.documents),m=wc.createSynthesizedTargetChangeForCurrentChange(t,i&&r.onlineState!=="Offline",a),p=c.applyChanges(d,r.isPrimaryClient,m);Dp(r,t,p.au);const _=new MO(e,t,c);return r.Tu.set(e,_),r.Iu.has(t)?r.Iu.get(t).push(e):r.Iu.set(t,[e]),p.snapshot}async function BO(r,e,t){const i=pe(r),a=i.Tu.get(e),l=i.Iu.get(a.targetId);if(l.length>1)return i.Iu.set(a.targetId,l.filter((c=>!hd(c,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(a.targetId),i.sharedClientState.isActiveQueryTarget(a.targetId)||await el(i.localStore,a.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(a.targetId),t&&tl(i.remoteStore,a.targetId),il(i,a.targetId)})).catch(ps)):(il(i,a.targetId),await el(i.localStore,a.targetId,!0))}async function zO(r,e){const t=pe(r),i=t.Tu.get(e),a=t.Iu.get(i.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),tl(t.remoteStore,i.targetId))}async function jO(r,e,t){const i=Oy(r);try{const a=await(function(c,d){const m=pe(c),p=$e.now(),_=d.reduce(((N,q)=>N.add(q.key)),Oe());let T,b;return m.persistence.runTransaction("Locally write mutations","readwrite",(N=>{let q=bn(),G=Oe();return m.Ns.getEntries(N,_).next((F=>{q=F,q.forEach(((ie,Z)=>{Z.isValidDocument()||(G=G.add(ie))}))})).next((()=>m.localDocuments.getOverlayedDocuments(N,q))).next((F=>{T=F;const ie=[];for(const Z of d){const $=uV(Z,T.get(Z.key).overlayedDocument);$!=null&&ie.push(new _s(Z.key,$,_b($.value.mapValue),wn.exists(!0)))}return m.mutationQueue.addMutationBatch(N,p,ie,d)})).next((F=>{b=F;const ie=F.applyToLocalDocumentSet(T,G);return m.documentOverlayCache.saveOverlays(N,F.batchId,ie)}))})).then((()=>({batchId:b.batchId,changes:Vb(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),(function(c,d,m){let p=c.Vu[c.currentUser.toKey()];p||(p=new at(Re)),p=p.insert(d,m),c.Vu[c.currentUser.toKey()]=p})(i,a.batchId,t),await vs(i,a.changes),await fl(i.remoteStore)}catch(a){const l=Ry(a,"Failed to persist write");t.reject(l)}}async function Hw(r,e){const t=pe(r);try{const i=await sO(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const c=t.Au.get(l);c&&(ve(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?c.hu=!0:a.modifiedDocuments.size>0?ve(c.hu,14607):a.removedDocuments.size>0&&(ve(c.hu,42227),c.hu=!1))})),await vs(t,i,e)}catch(i){await ps(i)}}function lS(r,e,t){const i=pe(r);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const a=[];i.Tu.forEach(((l,c)=>{const d=c.view.va(e);d.snapshot&&a.push(d.snapshot)})),(function(c,d){const m=pe(c);m.onlineState=d;let p=!1;m.queries.forEach(((_,T)=>{for(const b of T.Sa)b.va(d)&&(p=!0)})),p&&Cy(m)})(i.eventManager,e),a.length&&i.Pu.H_(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function qO(r,e,t){const i=pe(r);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.Au.get(e),l=a&&a.key;if(l){let c=new at(ce.comparator);c=c.insert(l,yt.newNoDocument(l,Te.min()));const d=Oe().add(l),m=new bc(Te.min(),new Map,new at(Re),c,d);await Hw(i,m),i.du=i.du.remove(l),i.Au.delete(e),Vy(i)}else await el(i.localStore,e,!1).then((()=>il(i,e,t))).catch(ps)}async function FO(r,e){const t=pe(r),i=e.batch.batchId;try{const a=await rO(t.localStore,e);Ny(t,i,null),xy(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await vs(t,a)}catch(a){await ps(a)}}async function HO(r,e,t){const i=pe(r);try{const a=await(function(c,d){const m=pe(c);return m.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let _;return m.mutationQueue.lookupMutationBatch(p,d).next((T=>(ve(T!==null,37113),_=T.keys(),m.mutationQueue.removeMutationBatch(p,T)))).next((()=>m.mutationQueue.performConsistencyCheck(p))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(p,_,d))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_))).next((()=>m.localDocuments.getDocuments(p,_)))}))})(i.localStore,e);Ny(i,e,t),xy(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await vs(i,a)}catch(a){await ps(a)}}function xy(r,e){(r.mu.get(e)||[]).forEach((t=>{t.resolve()})),r.mu.delete(e)}function Ny(r,e,t){const i=pe(r);let a=i.Vu[i.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),i.Vu[i.currentUser.toKey()]=a}}function il(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const i of r.Iu.get(e))r.Tu.delete(i),t&&r.Pu.yu(i,t);r.Iu.delete(e),r.isPrimaryClient&&r.Ru.jr(e).forEach((i=>{r.Ru.containsKey(i)||Gw(r,i)}))}function Gw(r,e){r.Eu.delete(e.path.canonicalString());const t=r.du.get(e);t!==null&&(tl(r.remoteStore,t),r.du=r.du.remove(e),r.Au.delete(t),Vy(r))}function Dp(r,e,t){for(const i of t)i instanceof jw?(r.Ru.addReference(i.key,e),GO(r,i)):i instanceof qw?(re(ml,"Document no longer in limbo: "+i.key),r.Ru.removeReference(i.key,e),r.Ru.containsKey(i.key)||Gw(r,i.key)):me(19791,{wu:i})}function GO(r,e){const t=e.key,i=t.path.canonicalString();r.du.get(t)||r.Eu.has(i)||(re(ml,"New document in limbo: "+t),r.Eu.add(i),Vy(r))}function Vy(r){for(;r.Eu.size>0&&r.du.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const t=new ce(Ge.fromString(e)),i=r.fu.next();r.Au.set(i,new PO(t)),r.du=r.du.insert(t,i),vd(r.remoteStore,new Wi(In(cd(t.path)),i,"TargetPurposeLimboResolution",mn.ce))}}async function vs(r,e,t){const i=pe(r),a=[],l=[],c=[];i.Tu.isEmpty()||(i.Tu.forEach(((d,m)=>{c.push(i.pu(m,e,t).then((p=>{if((p||t)&&i.isPrimaryClient){const _=p?!p.fromCache:t?.targetChanges.get(m.targetId)?.current;i.sharedClientState.updateQueryState(m.targetId,_?"current":"not-current")}if(p){a.push(p);const _=Ey.As(m.targetId,p);l.push(_)}})))})),await Promise.all(c),i.Pu.H_(a),await(async function(m,p){const _=pe(m);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>L.forEach(p,(b=>L.forEach(b.Es,(N=>_.persistence.referenceDelegate.addReference(T,b.targetId,N))).next((()=>L.forEach(b.ds,(N=>_.persistence.referenceDelegate.removeReference(T,b.targetId,N)))))))))}catch(T){if(!ys(T))throw T;re(Ty,"Failed to update sequence numbers: "+T)}for(const T of p){const b=T.targetId;if(!T.fromCache){const N=_.Ms.get(b),q=N.snapshotVersion,G=N.withLastLimboFreeSnapshotVersion(q);_.Ms=_.Ms.insert(b,G)}}})(i.localStore,l))}async function KO(r,e){const t=pe(r);if(!t.currentUser.isEqual(e)){re(ml,"User change. New user:",e.toKey());const i=await Tw(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((d=>{d.forEach((m=>{m.reject(new ae(J.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await vs(t,i.Ls)}}function QO(r,e){const t=pe(r),i=t.Au.get(e);if(i&&i.hu)return Oe().add(i.key);{let a=Oe();const l=t.Iu.get(e);if(!l)return a;for(const c of l){const d=t.Tu.get(c);a=a.unionWith(d.view.nu)}return a}}async function YO(r,e){const t=pe(r),i=await bp(t.localStore,e.query,!0),a=e.view.cu(i);return t.isPrimaryClient&&Dp(t,e.targetId,a.au),a}async function $O(r,e){const t=pe(r);return bw(t.localStore,e).then((i=>vs(t,i)))}async function XO(r,e,t,i){const a=pe(r),l=await(function(d,m){const p=pe(d),_=pe(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",(T=>_.er(T,m).next((b=>b?p.localDocuments.getDocuments(T,b):L.resolve(null)))))})(a.localStore,e);l!==null?(t==="pending"?await fl(a.remoteStore):t==="acknowledged"||t==="rejected"?(Ny(a,e,i||null),xy(a,e),(function(d,m){pe(pe(d).mutationQueue).ir(m)})(a.localStore,e)):me(6720,"Unknown batchState",{Su:t}),await vs(a,l)):re(ml,"Cannot apply mutation batch with id: "+e)}async function JO(r,e){const t=pe(r);if(Ed(t),Oy(t),e===!0&&t.gu!==!0){const i=t.sharedClientState.getAllActiveQueryTargets(),a=await uS(t,i.toArray());t.gu=!0,await Rp(t.remoteStore,!0);for(const l of a)vd(t.remoteStore,l)}else if(e===!1&&t.gu!==!1){const i=[];let a=Promise.resolve();t.Iu.forEach(((l,c)=>{t.sharedClientState.isLocalQueryTarget(c)?i.push(c):a=a.then((()=>(il(t,c),el(t.localStore,c,!0)))),tl(t.remoteStore,c)})),await a,await uS(t,i),(function(c){const d=pe(c);d.Au.forEach(((m,p)=>{tl(d.remoteStore,p)})),d.Ru.Jr(),d.Au=new Map,d.du=new at(ce.comparator)})(t),t.gu=!1,await Rp(t.remoteStore,!1)}}async function uS(r,e,t){const i=pe(r),a=[],l=[];for(const c of e){let d;const m=i.Iu.get(c);if(m&&m.length!==0){d=await Ff(i.localStore,In(m[0]));for(const p of m){const _=i.Tu.get(p),T=await YO(i,_);T.snapshot&&l.push(T.snapshot)}}else{const p=await Aw(i.localStore,c);d=await Ff(i.localStore,p),await Dy(i,Kw(p),c,!1,d.resumeToken)}a.push(d)}return i.Pu.H_(l),a}function Kw(r){return Ib(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function WO(r){return(function(t){return pe(pe(t).persistence).Ts()})(pe(r).localStore)}async function ZO(r,e,t,i){const a=pe(r);if(a.gu)return void re(ml,"Ignoring unexpected query state notification.");const l=a.Iu.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const c=await bw(a.localStore,Db(l[0])),d=bc.createSynthesizedRemoteEventForCurrentChange(e,t==="current",wt.EMPTY_BYTE_STRING);await vs(a,c,d);break}case"rejected":await el(a.localStore,e,!0),il(a,e,i);break;default:me(64155,t)}}async function eM(r,e,t){const i=Ed(r);if(i.gu){for(const a of e){if(i.Iu.has(a)&&i.sharedClientState.isActiveQueryTarget(a)){re(ml,"Adding an already active target "+a);continue}const l=await Aw(i.localStore,a),c=await Ff(i.localStore,l);await Dy(i,Kw(l),c.targetId,!1,c.resumeToken),vd(i.remoteStore,c)}for(const a of t)i.Iu.has(a)&&await el(i.localStore,a,!1).then((()=>{tl(i.remoteStore,a),il(i,a)})).catch(ps)}}function Ed(r){const e=pe(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=Hw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=QO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=qO.bind(null,e),e.Pu.H_=NO.bind(null,e.eventManager),e.Pu.yu=VO.bind(null,e.eventManager),e}function Oy(r){const e=pe(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=FO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=HO.bind(null,e),e}class lc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=yd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return Ew(this.persistence,new vw,e.initialUser,this.serializer)}Cu(e){return new _y(pd.mi,this.serializer)}Du(e){return new Dw}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}lc.provider={build:()=>new lc};class tM extends lc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ve(this.persistence.referenceDelegate instanceof qf,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new dw(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?en.withCacheSize(this.cacheSizeBytes):en.DEFAULT;return new _y((i=>qf.mi(i,t)),this.serializer)}}class Qw extends lc{constructor(e,t,i){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Oy(this.xu.syncEngine),await fl(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return Ew(this.persistence,new vw,e.initialUser,this.serializer)}Fu(e,t){const i=this.persistence.referenceDelegate.garbageCollector;return new dw(i,e.asyncQueue,t)}Mu(e,t){const i=new fN(t,this.persistence);return new hN(e.asyncQueue,i)}Cu(e){const t=_w(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?en.withCacheSize(this.cacheSizeBytes):en.DEFAULT;return new vy(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,xw(),vf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new Dw}}class nM extends Qw{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof jg&&(this.sharedClientState.syncEngine={Co:XO.bind(null,t),vo:ZO.bind(null,t),Fo:eM.bind(null,t),Ts:WO.bind(null,t),Do:$O.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji((async i=>{await JO(this.xu.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))}Du(e){const t=xw();if(!jg.v(t))throw new ae(J.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=_w(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new jg(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class uc{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>lS(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=KO.bind(null,this.syncEngine),await Rp(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new xO})()}createDatastore(e){const t=yd(e.databaseInfo.databaseId),i=(function(l){return new fO(l)})(e.databaseInfo);return(function(l,c,d,m){return new pO(l,c,d,m)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,a,l,c,d){return new _O(i,a,l,c,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>lS(this.syncEngine,t,0)),(function(){return nS.v()?new nS:new lO})())}createSyncEngine(e,t){return(function(a,l,c,d,m,p,_){const T=new kO(a,l,c,d,m,p);return _&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const i=pe(t);re(Ia,"RemoteStore shutting down."),i.Ea.add(5),await Ic(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}uc.provider={build:()=>new uc};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yw{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):bt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gs="FirestoreClient";class iM{constructor(e,t,i,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=a,this.user=Zt.UNAUTHENTICATED,this.clientId=Xp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(i,(async c=>{re(gs,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(i,(c=>(re(gs,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new er;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=Ry(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Fg(r,e){r.asyncQueue.verifyOperationInProgress(),re(gs,"Initializing OfflineComponentProvider");const t=r.configuration;await e.initialize(t);let i=t.initialUser;r.setCredentialChangeListener((async a=>{i.isEqual(a)||(await Tw(e.localStore,a),i=a)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function cS(r,e){r.asyncQueue.verifyOperationInProgress();const t=await rM(r);re(gs,"Initializing OnlineComponentProvider"),await e.initialize(t,r.configuration),r.setCredentialChangeListener((i=>rS(e.remoteStore,i))),r.setAppCheckTokenChangeListener(((i,a)=>rS(e.remoteStore,a))),r._onlineComponents=e}async function rM(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){re(gs,"Using user provided OfflineComponentProvider");try{await Fg(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===J.FAILED_PRECONDITION||a.code===J.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Xu("Error using user provided cache. Falling back to memory cache: "+t),await Fg(r,new lc)}}else re(gs,"Using default OfflineComponentProvider"),await Fg(r,new tM(void 0));return r._offlineComponents}async function $w(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(re(gs,"Using user provided OnlineComponentProvider"),await cS(r,r._uninitializedComponentsProvider._online)):(re(gs,"Using default OnlineComponentProvider"),await cS(r,new uc))),r._onlineComponents}function sM(r){return $w(r).then((e=>e.syncEngine))}async function xp(r){const e=await $w(r),t=e.eventManager;return t.onListen=LO.bind(null,e.syncEngine),t.onUnlisten=BO.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=UO.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=zO.bind(null,e.syncEngine),t}function aM(r,e,t={}){const i=new er;return r.asyncQueue.enqueueAndForget((async()=>(function(l,c,d,m,p){const _=new Yw({next:b=>{_.Nu(),c.enqueueAndForget((()=>Bw(l,T))),b.fromCache&&m.source==="server"?p.reject(new ae(J.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(b)},error:b=>p.reject(b)}),T=new zw(d,_,{includeMetadataChanges:!0,qa:!0});return Uw(l,T)})(await xp(r),r.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xw(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oM="firestore.googleapis.com",fS=!0;class dS{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ae(J.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=oM,this.ssl=fS}else this.host=e.host,this.ssl=e.ssl??fS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=lw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<fw)throw new ae(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Xw(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ae(J.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ae(J.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ae(J.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,a){return i.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class My{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ae(J.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ae(J.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new Zx;switch(i.type){case"firstParty":return new nN(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ae(J.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=hS.get(t);i&&(re("ComponentProvider","Removing Datastore"),hS.delete(t),i.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new cr(this.firestore,e,this._query)}}class Mt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mt(this.firestore,e,this._key)}toJSON(){return{type:Mt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Ec(t,Mt._jsonSchema))return new Mt(e,i||null,new ce(Ge.fromString(t.referencePath)))}}Mt._jsonSchemaVersion="firestore/documentReference/1.0",Mt._jsonSchema={type:Dt("string",Mt._jsonSchemaVersion),referencePath:Dt("string")};class cs extends cr{constructor(e,t,i){super(e,t,cd(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mt(this.firestore,null,new ce(e))}withConverter(e){return new cs(this.firestore,e,this._path)}}function Np(r,e,...t){if(r=Rn(r),GA("collection","path",e),r instanceof My){const i=Ge.fromString(e,...t);return i0(i),new cs(r,null,i)}{if(!(r instanceof Mt||r instanceof cs))throw new ae(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Ge.fromString(e,...t));return i0(i),new cs(r.firestore,null,i)}}function lM(r,e,...t){if(r=Rn(r),arguments.length===1&&(e=Xp.newId()),GA("doc","path",e),r instanceof My){const i=Ge.fromString(e,...t);return n0(i),new Mt(r,null,new ce(i))}{if(!(r instanceof Mt||r instanceof cs))throw new ae(J.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=r._path.child(Ge.fromString(e,...t));return n0(i),new Mt(r.firestore,r instanceof cs?r.converter:null,new ce(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS="AsyncQueue";class gS{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Nw(this,"async_queue_retry"),this._c=()=>{const i=vf();i&&re(mS,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=vf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=vf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new er;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ys(e))throw e;re(mS,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,bt("INTERNAL UNHANDLED ERROR: ",pS(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const a=Iy.createAndSchedule(this,e,t,i,(l=>this.hc(l)));return this.tc.push(a),a}uc(){this.nc&&me(47125,{Pc:pS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function pS(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yS(r){return(function(t,i){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of i)if(l in a&&typeof a[l]=="function")return!0;return!1})(r,["next","error","complete"])}class cc extends My{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new gS,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new gS(e),this._firestoreClient=void 0,await e}}}function uM(r,e,t){t||(t=Of);const i=jp(r,"firestore");if(i.isInitialized(t)){const a=i.getImmediate({identifier:t}),l=i.getOptions(t);if(ya(l,e))return a;throw new ae(J.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ae(J.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<fw)throw new ae(J.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&al(e.host)&&$S(e.host),i.initialize({options:e,instanceIdentifier:t})}function Py(r){if(r._terminated)throw new ae(J.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||cM(r),r._firestoreClient}function cM(r){const e=r._freezeSettings(),t=(function(a,l,c,d){return new zN(a,l,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,Xw(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(r._databaseId,r._app?.options.appId||"",r._persistenceKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new iM(r._authCredentials,r._appCheckCredentials,r._queue,t,r._componentsProvider&&(function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}})(r._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new jn(wt.fromBase64String(e))}catch(t){throw new ae(J.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new jn(wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:jn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ec(e,jn._jsonSchema))return jn.fromBase64String(e.bytes)}}jn._jsonSchemaVersion="firestore/bytes/1.0",jn._jsonSchema={type:Dt("string",jn._jsonSchemaVersion),bytes:Dt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ae(J.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ae(J.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ae(J.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Re(this._lat,e._lat)||Re(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ai._jsonSchemaVersion}}static fromJSON(e){if(Ec(e,Ai._jsonSchema))return new Ai(e.latitude,e.longitude)}}Ai._jsonSchemaVersion="firestore/geoPoint/1.0",Ai._jsonSchema={type:Dt("string",Ai._jsonSchemaVersion),latitude:Dt("number"),longitude:Dt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,a){if(i.length!==a.length)return!1;for(let l=0;l<i.length;++l)if(i[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:bi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ec(e,bi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new bi(e.vectorValues);throw new ae(J.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}bi._jsonSchemaVersion="firestore/vectorValue/1.0",bi._jsonSchema={type:Dt("string",bi._jsonSchemaVersion),vectorValues:Dt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hM=/^__.*__$/;class fM{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new _s(e,this.data,this.fieldMask,t,this.fieldTransforms):new hl(e,this.data,t,this.fieldTransforms)}}function Jw(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw me(40011,{Ac:r})}}class Uy{constructor(e,t,i,a,l,c){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=a,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Uy({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){const t=this.path?.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Qf(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Jw(this.Ac)&&hM.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class dM{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||yd(e)}Cc(e,t,i,a=!1){return new Uy({Ac:e,methodName:t,Dc:i,path:dt.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ww(r){const e=r._freezeSettings(),t=yd(r._databaseId);return new dM(r._databaseId,!!e.ignoreUndefinedProperties,t)}function mM(r,e,t,i,a,l={}){const c=r.Cc(l.merge||l.mergeFields?2:0,e,t,a);tI("Data must be an object, but it was:",c,i);const d=Zw(i,c);let m,p;if(l.merge)m=new qn(c.fieldMask),p=c.fieldTransforms;else if(l.mergeFields){const _=[];for(const T of l.mergeFields){const b=pM(e,T,t);if(!c.contains(b))throw new ae(J.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);_M(_,b)||_.push(b)}m=new qn(_),p=c.fieldTransforms.filter((T=>m.covers(T.field)))}else m=null,p=c.fieldTransforms;return new fM(new dn(d),m,p)}class By extends Ly{_toFieldTransform(e){return new Bb(e.path,new Xo)}isEqual(e){return e instanceof By}}function gM(r,e,t,i=!1){return zy(t,r.Cc(i?4:3,e))}function zy(r,e){if(eI(r=Rn(r)))return tI("Unsupported field value:",e,r),Zw(r,e);if(r instanceof Ly)return(function(i,a){if(!Jw(a.Ac))throw a.Sc(`${i._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${i._methodName}() is not currently supported inside arrays`);const l=i._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,a){const l=[];let c=0;for(const d of i){let m=zy(d,a.wc(c));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),c++}return{arrayValue:{values:l}}})(r,e)}return(function(i,a){if((i=Rn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return iV(a.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const l=$e.fromDate(i);return{timestampValue:Zo(a.serializer,l)}}if(i instanceof $e){const l=new $e(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Zo(a.serializer,l)}}if(i instanceof Ai)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof jn)return{bytesValue:Kb(a.serializer,i._byteString)};if(i instanceof Mt){const l=a.databaseId,c=i.firestore._databaseId;if(!c.isEqual(l))throw a.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:my(i.firestore._databaseId||a.databaseId,i._key.path)}}if(i instanceof bi)return(function(c,d){return{mapValue:{fields:{[ry]:{stringValue:sy},[Ko]:{arrayValue:{values:c.toArray().map((p=>{if(typeof p!="number")throw d.Sc("VectorValues must only contain numeric values.");return ly(d.serializer,p)}))}}}}}})(i,a);throw a.Sc(`Unsupported field value: ${nd(i)}`)})(r,e)}function Zw(r,e){const t={};return ub(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ca(r,((i,a)=>{const l=zy(a,e.mc(i));l!=null&&(t[i]=l)})),{mapValue:{fields:t}}}function eI(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof $e||r instanceof Ai||r instanceof jn||r instanceof Mt||r instanceof Ly||r instanceof bi)}function tI(r,e,t){if(!eI(t)||!KA(t)){const i=nd(t);throw i==="an object"?e.Sc(r+" a custom object"):e.Sc(r+" "+i)}}function pM(r,e,t){if((e=Rn(e))instanceof ky)return e._internalPath;if(typeof e=="string")return nI(r,e);throw Qf("Field path arguments must be of type string or ",r,!1,void 0,t)}const yM=new RegExp("[~\\*/\\[\\]]");function nI(r,e,t){if(e.search(yM)>=0)throw Qf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new ky(...e.split("."))._internalPath}catch{throw Qf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Qf(r,e,t,i,a){const l=i&&!i.isEmpty(),c=a!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let m="";return(l||c)&&(m+=" (found",l&&(m+=` in field ${i}`),c&&(m+=` in document ${a}`),m+=")"),new ae(J.INVALID_ARGUMENT,d+r+m)}function _M(r,e){return r.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iI{constructor(e,t,i,a,l){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new Mt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new vM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(jy("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class vM extends iI{data(){return super.data()}}function jy(r,e){return typeof e=="string"?nI(r,e):e instanceof ky?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ae(J.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qy{}class Fy extends qy{}function _S(r,e,...t){let i=[];e instanceof qy&&i.push(e),i=i.concat(t),(function(l){const c=l.filter((m=>m instanceof Gy)).length,d=l.filter((m=>m instanceof Hy)).length;if(c>1||c>0&&d>0)throw new ae(J.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const a of i)r=a._apply(r);return r}class Hy extends Fy{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new Hy(e,t,i)}_apply(e){const t=this._parse(e);return sI(e._query,t),new cr(e.firestore,e.converter,pp(e._query,t))}_parse(e){const t=Ww(e.firestore);return(function(l,c,d,m,p,_,T){let b;if(p.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new ae(J.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){TS(T,_);const q=[];for(const G of T)q.push(ES(m,l,G));b={arrayValue:{values:q}}}else b=ES(m,l,T)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||TS(T,_),b=gM(d,c,T,_==="in"||_==="not-in");return Ue.create(p,_,b)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class Gy extends qy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Gy(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:Xe.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let c=a;const d=l.getFlattenedFilters();for(const m of d)sI(c,m),c=pp(c,m)})(e._query,t),new cr(e.firestore,e.converter,pp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ky extends Fy{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ky(e,t)}_apply(e){const t=(function(a,l,c){if(a.startAt!==null)throw new ae(J.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new ae(J.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ac(l,c)})(e._query,this._field,this._direction);return new cr(e.firestore,e.converter,(function(a,l){const c=a.explicitOrderBy.concat([l]);return new cl(a.path,a.collectionGroup,c,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,t))}}function Hg(r,e="asc"){const t=e,i=jy("orderBy",r);return Ky._create(i,t)}class Qy extends Fy{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new Qy(e,t,i)}_apply(e){return new cr(e.firestore,e.converter,kf(e._query,this._limit,this._limitType))}}function vS(r){return Qy._create("limit",r,"F")}function ES(r,e,t){if(typeof(t=Rn(t))=="string"){if(t==="")throw new ae(J.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Rb(e)&&t.indexOf("/")!==-1)throw new ae(J.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Ge.fromString(t));if(!ce.isDocumentKey(i))throw new ae(J.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return rc(r,new ce(i))}if(t instanceof Mt)return rc(r,t._key);throw new ae(J.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${nd(t)}.`)}function TS(r,e){if(!Array.isArray(r)||r.length===0)throw new ae(J.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function sI(r,e){const t=(function(a,l){for(const c of a)for(const d of c.getFlattenedFilters())if(l.indexOf(d.op)>=0)return d.op;return null})(r.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ae(J.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ae(J.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class EM{convertValue(e,t="none"){switch(fs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ar(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw me(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Ca(e,((a,l)=>{i[a]=this.convertValue(l,t)})),i}convertVectorValue(e){const t=e.fields?.[Ko].arrayValue?.values?.map((i=>ct(i.doubleValue)));return new bi(t)}convertGeoPoint(e){return new Ai(ct(e.latitude),ct(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=ld(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(nc(e));default:return null}}convertTimestamp(e){const t=sr(e);return new $e(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Ge.fromString(e);ve(nw(i),9688,{name:e});const a=new Ta(i.get(1),i.get(3)),l=new ce(i.popFirst(5));return a.isEqual(t)||bt(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TM(r,e,t){let i;return i=r?r.toFirestore(e):e,i}class Mu{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ga extends iI{constructor(e,t,i,a,l,c){super(e,t,i,a,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ef(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(jy("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(J.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ga._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ga._jsonSchemaVersion="firestore/documentSnapshot/1.0",ga._jsonSchema={type:Dt("string",ga._jsonSchemaVersion),bundleSource:Dt("string","DocumentSnapshot"),bundleName:Dt("string"),bundle:Dt("string")};class Ef extends ga{data(e={}){return super.data(e)}}class pa{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Mu(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Ef(this._firestore,this._userDataWriter,i.key,i,new Mu(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ae(J.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let c=0;return a._snapshot.docChanges.map((d=>{const m=new Ef(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Mu(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);return d.doc,{type:"added",doc:m,oldIndex:-1,newIndex:c++}}))}{let c=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((d=>l||d.type!==3)).map((d=>{const m=new Ef(a._firestore,a._userDataWriter,d.doc.key,d.doc,new Mu(a._snapshot.mutatedKeys.has(d.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,_=-1;return d.type!==0&&(p=c.indexOf(d.doc.key),c=c.delete(d.doc.key)),d.type!==1&&(c=c.add(d.doc),_=c.indexOf(d.doc.key)),{type:SM(d.type),doc:m,oldIndex:p,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ae(J.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=pa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Xp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),i.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function SM(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return me(61501,{type:r})}}pa._jsonSchemaVersion="firestore/querySnapshot/1.0",pa._jsonSchema={type:Dt("string",pa._jsonSchemaVersion),bundleSource:Dt("string","QuerySnapshot"),bundleName:Dt("string"),bundle:Dt("string")};class Yy extends EM{constructor(e){super(),this.firestore=e}convertBytes(e){return new jn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Mt(this.firestore,null,t)}}function AM(r){r=Lo(r,cr);const e=Lo(r.firestore,cc),t=Py(e),i=new Yy(e);return rI(r._query),aM(t,r._query).then((a=>new pa(e,i,r,a)))}function bM(r,e){const t=Lo(r.firestore,cc),i=lM(r),a=TM(r.converter,e);return IM(t,[mM(Ww(r.firestore),"addDoc",i._key,a,r.converter!==null,{}).toMutation(i._key,wn.exists(!1))]).then((()=>i))}function wM(r,...e){r=Rn(r);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||yS(e[i])||(t=e[i++]);const a={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(yS(e[i])){const m=e[i];e[i]=m.next?.bind(m),e[i+1]=m.error?.bind(m),e[i+2]=m.complete?.bind(m)}let l,c,d;if(r instanceof Mt)c=Lo(r.firestore,cc),d=cd(r._key.path),l={next:m=>{e[i]&&e[i](RM(c,r,m))},error:e[i+1],complete:e[i+2]};else{const m=Lo(r,cr);c=Lo(m.firestore,cc),d=m._query;const p=new Yy(c);l={next:_=>{e[i]&&e[i](new pa(c,p,m,_))},error:e[i+1],complete:e[i+2]},rI(r._query)}return(function(p,_,T,b){const N=new Yw(b),q=new zw(_,N,T);return p.asyncQueue.enqueueAndForget((async()=>Uw(await xp(p),q))),()=>{N.Nu(),p.asyncQueue.enqueueAndForget((async()=>Bw(await xp(p),q)))}})(Py(c),d,a,l)}function IM(r,e){return(function(i,a){const l=new er;return i.asyncQueue.enqueueAndForget((async()=>jO(await sM(i),a,l))),l.promise})(Py(r),e)}function RM(r,e,t){const i=t.docs.get(e._key),a=new Yy(r);return new ga(r,a,e._key,i,new Mu(t.hasPendingWrites,t.fromCache),e.converter)}class CM{constructor(e){let t;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=VM(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function DM(r){return new CM(r)}class xM{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=uc.provider,this._offlineComponentProvider={build:t=>new Qw(t,e?.cacheSizeBytes,this.forceOwnership)}}}class NM{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=uc.provider,this._offlineComponentProvider={build:t=>new nM(t,e?.cacheSizeBytes)}}}function VM(r){return new xM(r?.forceOwnership)}function OM(){return new NM}function MM(){return new By("serverTimestamp")}(function(e,t=!0){(function(a){ul=a})(ol),Bo(new _a("firestore",((i,{instanceIdentifier:a,options:l})=>{const c=i.getProvider("app").getImmediate(),d=new cc(new eN(i.getProvider("auth-internal")),new iN(c,i.getProvider("app-check-internal")),(function(p,_){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new ae(J.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ta(p.options.projectId,_)})(c,a),c);return l={useFetchStreams:t,...l},d._setSettings(l),d}),"PUBLIC").setMultipleInstances(!0)),as(WT,ZT,e),as(WT,ZT,"esm2020")})();const PM={apiKey:"AIzaSyBnmsSmzp2-MKZgKDbPuSLOSm3DTfNXcR4",authDomain:"quiz-app-73866.firebaseapp.com",projectId:"quiz-app-73866",storageBucket:"quiz-app-73866.firebasestorage.app",messagingSenderId:"979165461037",appId:"1:979165461037:web:9feef3af2be3682a1dd6a4",measurementId:"G-C7XCR7M769"},aI=nA(PM),Gg=Xx(aI),Vp=uM(aI,{localCache:DM({tabManager:OM()})});async function kM(){return Gg.currentUser||await M2(Gg),Gg.currentUser}const Kg="endlessLeaderboardTop10Cache_v1";function LM(r){if(!r)return"";let e;if(r.toDate)e=r.toDate();else if(r instanceof Date)e=r;else{const t=Date.parse(r);if(Number.isNaN(t))return"";e=new Date(t)}return e.toLocaleDateString("en-GB")}function UM(){const[r,e]=z.useState(()=>{try{const c=localStorage.getItem(Kg);return c?JSON.parse(c):[]}catch{return[]}}),[t,i]=z.useState(r.length===0),[a,l]=z.useState("");return z.useEffect(()=>{const c=_S(Np(Vp,"endlessLeaderboard"),Hg("score","desc"),Hg("createdAt","asc"),vS(10));let d=wM(c,m=>{const p=m.docs.map((_,T)=>{const b=_.data();return{id:_.id,rank:T+1,name:b.name,score:b.score,createdAt:b.createdAt}});e(p),i(!1),l("");try{localStorage.setItem(Kg,JSON.stringify(p.map(_=>({..._,createdAt:_.createdAt?.toDate?.()||_.createdAt}))))}catch{}},async m=>{console.warn("[Endless Leaderboard] Composite query failed:",m?.code,m?.message),l("");try{const p=_S(Np(Vp,"endlessLeaderboard"),Hg("score","desc"),vS(10)),T=(await AM(p)).docs.map((b,N)=>{const q=b.data();return{id:b.id,rank:N+1,name:q.name,score:q.score,createdAt:q.createdAt}});e(T),i(!1);try{localStorage.setItem(Kg,JSON.stringify(T.map(b=>({...b,createdAt:b.createdAt?.toDate?.()||b.createdAt}))))}catch{}}catch(p){console.error("[Endless Leaderboard] Fallback query failed:",p),l("Failed to load endless leaderboard."),i(!1)}});return()=>{typeof d=="function"&&d()}},[]),t&&r.length===0?H.jsx("div",{style:{marginTop:"1rem",width:"100%",textAlign:"left",color:"#6b7280"},children:"Loading endless leaderboard"}):a&&r.length===0?H.jsx("div",{style:{marginTop:"1rem",width:"100%",textAlign:"left",color:"#b91c1c"},children:a}):r.length===0?H.jsx("div",{style:{marginTop:"1rem",width:"100%",textAlign:"left",color:"#6b7280"},children:"No endless scores yet. Be the first!"}):H.jsxs("div",{style:{marginTop:"1rem",width:"100%",textAlign:"left"},children:[H.jsx("h3",{style:{color:"#1e3a8a",marginBottom:6},children:" Endless Leaderboard (Top 10)"}),H.jsx("div",{style:{display:"grid",gap:6,maxHeight:"260px",overflowY:"auto",paddingRight:"4px"},children:r.map(c=>H.jsxs("div",{style:{display:"grid",gridTemplateColumns:"40px 1fr auto auto",gap:10,alignItems:"center",background:"#f8fafc",border:"1px solid #e5e7eb",borderRadius:10,padding:"8px 12px"},children:[H.jsxs("strong",{style:{color:"#111"},children:["#",c.rank]}),H.jsx("div",{style:{textAlign:"left",fontWeight:700,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:c.name,children:c.name}),H.jsxs("div",{style:{fontWeight:700,color:"#111",fontSize:"0.95rem"},children:["Streak: ",c.score]}),H.jsx("div",{style:{color:"#6b7280",fontSize:"0.85rem",textAlign:"right"},children:LM(c.createdAt)})]},c.id||`${c.name}-${c.score}-${c.rank}`))})]})}function BM(r){const e=new Date(r).getTime(),t=Date.now(),i=Math.max(1,Math.floor((t-e)/1e3));if(i<60)return`${i}s ago`;const a=Math.floor(i/60);if(a<60)return`${a}m ago`;const l=Math.floor(a/60);if(l<24)return`${l}h ago`;const c=Math.floor(l/24);return c<7?`${c}d ago`:new Date(e).toLocaleDateString("en-GB")}const zM=()=>{const r=Ra(),[e,t]=z.useState("easy"),[i,a]=z.useState("any"),[l,c]=z.useState(0),[d,m]=z.useState(!1),[p,_]=z.useState(""),[T,b]=z.useState([]),N=z.useMemo(()=>jS(),[]),q=z.useMemo(()=>Qu(i),[i]),G=!!(q?.specifics&&q.specifics.length>0);z.useEffect(()=>{const $=localStorage.getItem("triviaBestScore");$&&c(Number($));try{const fe=localStorage.getItem("triviaRecentScores"),se=fe?JSON.parse(fe):[],de=new Set,D=[];for(const w of se){const I=[w.score,w.total,w.groupId,w.subcategoryId??"null",w.difficulty,w.date].join("|");if(de.has(I)||(de.add(I),D.push(w)),D.length>=5)break}localStorage.setItem("triviaRecentScores",JSON.stringify(D)),b(D)}catch{b([])}},[]),z.useEffect(()=>{_(""),m(!1)},[i]);const F=()=>{r("/trivia",{state:{difficulty:e,groupId:i,subcategoryId:G&&d&&p?Number(p):null}})},ie=()=>{r("/endless",{state:{difficulty:e}})},Z=$=>Qu($)?.name||"Any Topic";return H.jsxs("div",{className:"app-container landing-page",children:[H.jsx("h1",{children:" Trivia Quest"}),H.jsx("p",{children:"Pick a topic and difficulty  go broad, or drill into something specific."}),H.jsxs("div",{className:"selectors",children:[H.jsxs("label",{children:["Topic:",H.jsx("select",{value:i,onChange:$=>a($.target.value),children:N.map($=>H.jsx("option",{value:$.id,children:$.name},$.id))})]}),H.jsxs("label",{children:["Difficulty:",H.jsxs("select",{value:e,onChange:$=>t($.target.value),children:[H.jsx("option",{value:"easy",children:"Easy"}),H.jsx("option",{value:"medium",children:"Medium"}),H.jsx("option",{value:"hard",children:"Hard"})]})]})]}),i!=="any"&&G&&H.jsxs("div",{className:"specifics-wrap",children:[H.jsx("button",{className:"secondary-btn",type:"button",onClick:()=>m($=>!$),children:d?"Hide specifics":"Want something more specific?"}),d&&H.jsxs("label",{className:"specifics-select",children:["Subcategory:",H.jsxs("select",{value:p,onChange:$=>_($.target.value),children:[H.jsx("option",{value:"",children:" Select "}),q.specifics.map($=>H.jsx("option",{value:$.id,children:$.name},$.id))]})]})]}),H.jsx("button",{className:"primary-btn",onClick:F,children:"Start Game"}),H.jsx("button",{className:"secondary-btn",style:{marginTop:"0.75rem"},onClick:ie,children:" Endless mode"}),H.jsxs("div",{className:"scoreboard",style:{width:"100%",textAlign:"left",marginTop:"1.25rem"},children:[H.jsxs("h3",{children:[" Best Score: ",l]}),T.length>0&&H.jsxs("div",{className:"recent-wrap",children:[H.jsx("div",{className:"recent-header",children:"Recent"}),H.jsx("ul",{className:"recent-list",children:T.map(($,fe)=>H.jsxs("li",{className:"recent-item",children:[H.jsx("span",{className:"recent-time",children:BM($.date)}),H.jsxs("span",{className:"recent-score",children:[$.score,"/",$.total]}),H.jsx("span",{className:"recent-badge topic",children:Z($.groupId)}),H.jsx("span",{className:"recent-badge diff",children:$.difficulty})]},fe))})]})]}),H.jsx(UM,{})]})},SS=r=>{const e=document.createElement("textarea");return e.innerHTML=r,e.value},jM=["Good job!","Well done!","Nice work!"," Correct!"],qM=["Oops, try next one!","Don't worry!","Keep going!"," Wrong, next one!"],FM=1800,oI=({question:r,handleAnswer:e})=>{Ra();const[t,i]=z.useState([]),[a,l]=z.useState(null),[c,d]=z.useState(""),[m,p]=z.useState(!1);z.useEffect(()=>{if(!r)return;const T=[...r.incorrect_answers,r.correct_answer].sort(()=>Math.random()-.5);i(T),l(null),d(""),p(!1)},[r]);const _=T=>{if(a)return;l(T);const b=T===r.correct_answer,N=b?jM:qM,q=N[Math.floor(Math.random()*N.length)];d(q),p(!0),setTimeout(()=>{e(b),l(null),d(""),p(!1)},FM)};return r?H.jsxs("div",{className:"question-card",children:[H.jsx("h2",{style:{color:"#111"},children:SS(r.question)}),H.jsx("div",{className:"answers-grid",children:t.map((T,b)=>{let N="answer-btn";return a&&(T===r.correct_answer?N+=" correct":T===a&&T!==r.correct_answer&&(N+=" wrong")),H.jsx("button",{onClick:()=>_(T),className:N,disabled:!!a,children:SS(T)},b)})}),c&&H.jsx("p",{className:`feedback ${m?"show":""}`,children:c})]}):null},HM=({score:r,total:e,restartGame:t,meta:i})=>{const a=z.useRef(!1);z.useEffect(()=>{if(a.current)return;a.current=!0;const d=Number(localStorage.getItem("triviaBestScore")||0);r>d&&localStorage.setItem("triviaBestScore",String(r));const m=localStorage.getItem("triviaRecentScores");let p=[];try{p=m?JSON.parse(m):[],Array.isArray(p)||(p=[])}catch{p=[]}const _={date:new Date().toISOString(),score:r,total:e,difficulty:i?.difficulty||"easy",groupId:i?.groupId||"any",subcategoryId:i?.subcategoryId??null},T=p.filter(N=>!(N.score===_.score&&N.total===_.total&&N.groupId===_.groupId&&N.subcategoryId===_.subcategoryId&&N.difficulty===_.difficulty)),b=[_,...T].slice(0,5);localStorage.setItem("triviaRecentScores",JSON.stringify(b))},[r,e,i]);const l=e?r/e:0,c=l>.8?" Outstanding!":l>.5?" Nice work!":" Keep practicing!";return H.jsxs("div",{className:"result-container",children:[H.jsxs("h2",{children:["Your Score: ",r," / ",e]}),H.jsx("p",{className:"result-message",children:c}),H.jsx("button",{className:"primary-btn",onClick:t,children:"Play Again"})]})},GM=({open:r,onClose:e,onApply:t,initialGroupId:i,initialSubcategoryId:a,initialDifficulty:l})=>{const c=z.useMemo(()=>jS(),[]),[d,m]=z.useState(i||"any"),[p,_]=z.useState(l||"easy"),[T,b]=z.useState(a?String(a):""),N=z.useMemo(()=>Qu(d),[d]),q=!!(N?.specifics&&N.specifics.length);return z.useEffect(()=>{b("")},[d]),r?H.jsx("div",{className:"modal-backdrop",onClick:e,role:"dialog","aria-modal":"true",children:H.jsxs("div",{className:"modal-card",onClick:G=>G.stopPropagation(),children:[H.jsx("h3",{children:"Quick switch"}),H.jsxs("div",{className:"modal-row",children:[H.jsxs("label",{children:["Topic",H.jsx("select",{value:d,onChange:G=>m(G.target.value),children:c.map(G=>H.jsx("option",{value:G.id,children:G.name},G.id))})]}),H.jsxs("label",{children:["Difficulty",H.jsxs("select",{value:p,onChange:G=>_(G.target.value),children:[H.jsx("option",{value:"easy",children:"Easy"}),H.jsx("option",{value:"medium",children:"Medium"}),H.jsx("option",{value:"hard",children:"Hard"})]})]})]}),d!=="any"&&q&&H.jsx("div",{className:"modal-row",children:H.jsxs("label",{children:["Specific (optional)",H.jsxs("select",{value:T,onChange:G=>b(G.target.value),children:[H.jsx("option",{value:"",children:" None "}),N.specifics.map(G=>H.jsx("option",{value:G.id,children:G.name},G.id))]})]})}),H.jsxs("div",{className:"modal-actions",children:[H.jsx("button",{className:"secondary-btn",onClick:e,children:"Cancel"}),H.jsx("button",{className:"primary-btn",onClick:()=>t({groupId:d,difficulty:p,subcategoryId:T?Number(T):null}),children:"Apply & reload"})]})]})}):null},Yf="opentdb_token_v1",lI="https://opentdb.com/api_token.php",KM=1440*60*1e3;function $y(){return Date.now()}function uI(){try{const r=localStorage.getItem(Yf);if(!r)return null;const{token:e,ts:t}=JSON.parse(r);return!e||t&&$y()-t>KM?null:e}catch{return null}}async function hc(){const r=`${lI}?command=request`,t=await(await fetch(r)).json();return t?.response_code===0&&t.token?(localStorage.setItem(Yf,JSON.stringify({token:t.token,ts:$y()})),t.token):(localStorage.removeItem(Yf),null)}async function cI(){const r=uI();if(!r)return hc();const e=`${lI}?command=reset&token=${r}`;return(await(await fetch(e)).json())?.response_code===0?(localStorage.setItem(Yf,JSON.stringify({token:r,ts:$y()})),r):hc()}async function hI(){let r=uI();return r||(r=await hc(),r)}function tf(r){const e=[...r];for(let t=e.length-1;t>0;t--){const i=Math.floor(Math.random()*(t+1));[e[t],e[i]]=[e[i],e[t]]}return e}const QM=()=>{const r=Ci(),e=Ra(),t=r.state?.difficulty||"easy",i=r.state?.groupId||"any",a=r.state?.subcategoryId||null,[l,c]=z.useState(t),[d,m]=z.useState(i),[p,_]=z.useState(a),[T,b]=z.useState([]),[N,q]=z.useState(0),[G,F]=z.useState(0),[ie,Z]=z.useState(!1),[$,fe]=z.useState(!0),[se,de]=z.useState(null),[D,w]=z.useState(!1),I=z.useMemo(()=>{if(p)return[p];const je=Qu(d);return!je||d==="any"?[]:tf(je.categoryIds)},[d,p]),M=async(je=!1,qe=0)=>{fe(!0),de(null);const X=p?`trivia_cat_${p}_diff_${l}`:`trivia_group_${d}_diff_${l}`,he=!je,_e=localStorage.getItem(X);if(he&&_e){b(tf(JSON.parse(_e))),fe(!1);return}const xe=async(x,te,ue=0,le=0)=>{let ye=`https://opentdb.com/api.php?amount=10&type=multiple&difficulty=${l}`;x&&(ye+=`&category=${x}`),te&&(ye+=`&token=${te}`);const Ne=await fetch(ye);if(Ne.status===429){if(le<3)return await new Promise(ot=>setTimeout(ot,5e3)),xe(x,te,ue,le+1);throw new Error("Rate limit hit")}const Se=await Ne.json();if(Se?.response_code===3&&ue<1){const ot=await hc();if(ot)return xe(x,ot,ue+1,le)}if(Se?.response_code===4&&ue<2){const ot=await cI();if(ot)return xe(x,ot,ue+1,le)}return Se};try{let x=null;const te=await hI();if(p)x=await xe(p,te);else if(d!=="any"&&I.length)for(const ue of I){if(x=await xe(ue,te),x?.results?.length)break;x=null}else x=await xe(null,te);x?.results&&x.results.length>0?(localStorage.setItem(X,JSON.stringify(x.results)),b(tf(x.results))):_e?b(tf(JSON.parse(_e))):de("No questions found for this selection."),fe(!1)}catch(x){if(x.message==="Rate limit hit"&&qe<3){setTimeout(()=>M(je,qe+1),5e3);return}de(x.message==="Rate limit hit"?"Too many requests. Please wait and try again.":"Failed to fetch questions."),fe(!1)}};z.useEffect(()=>{b([]),q(0),F(0),Z(!1),M(!1)},[l,d,p]);const V=je=>{je&&F(X=>X+1);const qe=N+1;qe<T.length?q(qe):Z(!0)},P=()=>{F(0),q(0),Z(!1),M(!0)},R=({groupId:je,difficulty:qe,subcategoryId:X})=>{m(je),c(qe),_(X??null),w(!1)};return $?H.jsx("div",{className:"app-container loading-container",children:H.jsx("h2",{children:"Loading questions..."})}):se?H.jsxs("div",{className:"app-container loading-container",children:[H.jsxs("h2",{children:["Error: ",se]}),H.jsx("button",{className:"primary-btn",onClick:()=>M(!0),children:"Retry"})]}):H.jsxs("div",{className:"app-container trivia-page",children:[H.jsxs("div",{className:"trivia-toolbar",children:[H.jsxs("div",{className:"trivia-meta",children:[H.jsxs("span",{children:[H.jsx("strong",{children:"Topic:"})," ",Qu(d).name,p?"  specific":""]}),H.jsxs("span",{children:[H.jsx("strong",{children:"Difficulty:"})," ",l]})]}),H.jsxs("div",{className:"toolbar-actions",children:[H.jsx("button",{className:"ghost-btn",onClick:()=>w(!0),children:"Change topic"}),H.jsx("button",{className:"ghost-btn",onClick:P,children:"Restart"}),H.jsx("button",{className:"ghost-btn",onClick:()=>e("/"),children:"Back to menu"})]})]}),H.jsx("div",{className:"trivia-header",children:H.jsxs("h3",{children:["Score: ",G," / ",T.length]})}),ie?H.jsx(HM,{score:G,total:T.length,restartGame:P,meta:{difficulty:l,groupId:d,subcategoryId:p}}):H.jsx(oI,{question:T[N],handleAnswer:V}),H.jsx(GM,{open:D,onClose:()=>w(!1),onApply:R,initialGroupId:d,initialSubcategoryId:p,initialDifficulty:l})]})},YM=()=>{const r=Ra(),t=Ci().state?.difficulty||"easy",i=()=>{r("/endless/play",{state:{difficulty:t}})};return H.jsxs("div",{className:"app-container landing-page",children:[H.jsx("h1",{children:" Endless Mode"}),H.jsx("p",{children:"Try to build the longest streak you can. Questions come from any category."}),H.jsxs("div",{style:{background:"#f8fafc",borderRadius:16,padding:"18px 20px",maxWidth:600,width:"100%",textAlign:"left",marginBottom:"1.5rem",boxShadow:"0 6px 18px rgba(0,0,0,0.08)"},children:[H.jsx("h3",{style:{marginBottom:8,color:"#1e3a8a"},children:" Rules"}),H.jsxs("ul",{style:{paddingLeft:20,lineHeight:1.6,color:"#374151"},children:[H.jsxs("li",{children:["You start with ",H.jsx("strong",{children:"60 seconds"}),"."]}),H.jsxs("li",{children:["Each correct answer adds ",H.jsx("strong",{children:"+10 seconds"})," to the timer."]}),H.jsxs("li",{children:["If you answer ",H.jsx("strong",{children:"wrong"})," or the timer hits ",H.jsx("strong",{children:"0"}),", the run ends."]}),H.jsxs("li",{children:["Your score is your ",H.jsx("strong",{children:"correct streak"}),"."]}),H.jsxs("li",{children:["Endless mode uses questions from ",H.jsx("strong",{children:"all categories"}),"."]}),H.jsxs("li",{children:["Submit your best streak to the ",H.jsx("strong",{children:"public leaderboard"}),"."]})]})]}),H.jsx("button",{className:"primary-btn",onClick:i,children:"Start Endless Mode"}),H.jsx("button",{className:"ghost-btn",style:{marginTop:"0.75rem"},onClick:()=>r("/"),children:"Back to menu"})]})};function $M({score:r}){const[e,t]=z.useState(()=>localStorage.getItem("endlessLastName")||""),[i,a]=z.useState(!1),[l,c]=z.useState(""),d=Ra();z.useEffect(()=>{localStorage.setItem("endlessLastName",e)},[e]);async function m(){c("");const p=e.trim();if(!p)return c("Please enter a name");if(p.length>20)return c("Name too long (max 20 chars)");try{a(!0),await kM(),await bM(Np(Vp,"endlessLeaderboard"),{name:p,score:Math.max(0,Number(r)),createdAt:MM()}),d("/",{replace:!0})}catch(_){console.error(_),c("Could not submit score. Please try again.")}finally{a(!1)}}return r<=0?null:H.jsxs("div",{style:{marginTop:16},children:[H.jsx("div",{style:{fontWeight:700,marginBottom:6},children:"Add your endless streak to the global leaderboard?"}),H.jsxs("div",{style:{display:"flex",gap:8,justifyContent:"center"},children:[H.jsx("input",{value:e,onChange:p=>t(p.target.value),placeholder:"Your name",maxLength:20,disabled:i,style:{padding:"8px 10px",borderRadius:8,border:"1px solid #d1d5db"}}),H.jsx("button",{className:"primary-btn",onClick:m,disabled:i,children:i?"Saving...":"Submit"})]}),l&&H.jsx("div",{style:{marginTop:6,color:"#b91c1c",fontWeight:600},children:l}),H.jsx("div",{style:{marginTop:6,color:"#6b7280"},children:"Youll be taken to the endless leaderboard after submitting."})]})}const XM=({score:r,restartEndless:e})=>{const t=r>=20?" Incredible streak!":r>=10?" Great run!":r>=5?" Nice effort!":" Keep going, youll get there!";return H.jsxs("div",{className:"result-container",children:[H.jsxs("h2",{children:["Your streak: ",r]}),H.jsx("p",{className:"result-message",children:t}),H.jsx("button",{className:"primary-btn",onClick:e,children:"Try again"}),H.jsx($M,{score:r})]})};function JM(r){const e=[...r];for(let t=e.length-1;t>0;t--){const i=Math.floor(Math.random()*(t+1));[e[t],e[i]]=[e[i],e[t]]}return e}function WM(r){const e=Math.max(0,Math.floor(r)),t=Math.floor(e/60),i=e%60;return`${t}:${i.toString().padStart(2,"0")}`}const ZM=()=>{const r=Ci(),e=Ra(),t=r.state?.difficulty||"easy",[i,a]=z.useState([]),[l,c]=z.useState(0),[d,m]=z.useState(0),[p,_]=z.useState(60),[T,b]=z.useState(!0),[N,q]=z.useState(""),[G,F]=z.useState(!1),ie=async(fe=0)=>{b(!0),q("");const se=await hI(),de=async(D,w=0,I=0)=>{let M=`https://opentdb.com/api.php?amount=15&type=multiple&difficulty=${t}`;D&&(M+=`&token=${D}`);const V=await fetch(M);if(V.status===429){if(I<3)return await new Promise(R=>setTimeout(R,5e3)),de(D,w,I+1);throw new Error("Rate limit hit")}const P=await V.json();if(P.response_code===3&&w<1){const R=await hc();if(R)return de(R,w+1,I)}if(P.response_code===4&&w<2){const R=await cI();if(R)return de(R,w+1,I)}return P};try{const D=await de(se);D?.results&&D.results.length>0?(a(JM(D.results)),c(0),b(!1)):(q("No questions found for endless mode."),b(!1))}catch(D){if(D.message==="Rate limit hit"&&fe<3){setTimeout(()=>ie(fe+1),5e3);return}q(D.message==="Rate limit hit"?"Too many requests. Please wait and try again.":"Failed to fetch questions."),b(!1)}};z.useEffect(()=>{ie()},[t]),z.useEffect(()=>{if(G||T)return;const fe=setInterval(()=>{_(se=>se<=1?(clearInterval(fe),F(!0),0):se-1)},1e3);return()=>clearInterval(fe)},[G,T]);const Z=fe=>{if(!G)if(fe){m(de=>de+1),_(de=>de+10);const se=l+1;se<i.length?c(se):ie()}else F(!0)},$=()=>{m(0),F(!1),_(60),ie(!0)};return T&&!G?H.jsx("div",{className:"app-container loading-container",children:H.jsx("h2",{children:"Loading endless mode"})}):N&&!G?H.jsxs("div",{className:"app-container loading-container",children:[H.jsxs("h2",{children:["Error: ",N]}),H.jsx("button",{className:"primary-btn",onClick:()=>ie(!0),children:"Retry"})]}):H.jsxs("div",{className:"app-container trivia-page",children:[H.jsxs("div",{className:"trivia-toolbar",children:[H.jsx("div",{className:"trivia-meta",children:H.jsxs("span",{children:[H.jsx("strong",{children:"Mode:"})," Endless"]})}),H.jsxs("div",{className:"toolbar-actions",children:[H.jsx("button",{className:"ghost-btn",onClick:$,children:"Restart"}),H.jsx("button",{className:"ghost-btn",onClick:()=>e("/"),children:"Back to menu"})]})]}),H.jsxs("div",{className:"trivia-header",style:{display:"flex",justifyContent:"space-between"},children:[H.jsxs("span",{children:["Streak: ",d]}),H.jsxs("span",{children:["Time left: ",WM(p)]})]}),G?H.jsx(XM,{score:d,restartEndless:$}):H.jsx(oI,{question:i[l],handleAnswer:Z})]})};function eP(){return H.jsx(oC,{children:H.jsxs(UR,{children:[H.jsx(Du,{path:"/",element:H.jsx(zM,{})}),H.jsx(Du,{path:"/trivia",element:H.jsx(QM,{})}),H.jsx(Du,{path:"/endless",element:H.jsx(YM,{})}),H.jsx(Du,{path:"/endless/play",element:H.jsx(ZM,{})})]})})}Y1.createRoot(document.getElementById("root")).render(H.jsx(z.StrictMode,{children:H.jsx(eP,{})}));
